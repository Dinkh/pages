(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-examples_menu_panel_app_mjs"],{

/***/ "./examples/menu/panel/MainContainer.mjs":
/*!***********************************************!*\
  !*** ./examples/menu/panel/MainContainer.mjs ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MainContainer)
/* harmony export */ });
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_menu_Panel_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/menu/Panel.mjs */ "./src/menu/Panel.mjs");
/* harmony import */ var _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/form/field/Number.mjs */ "./src/form/field/Number.mjs");




/**
 * @class Neo.examples.menu.panel.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_0__.default {
    static getConfig() {return {
        className           : 'Neo.examples.menu.panel.MainContainer',
        autoMount           : true,
        configItemLabelWidth: 130,
        configItemWidth     : 230,
        layout              : {ntype: 'hbox', align: 'stretch'}
    }}

    createConfigurationComponents() {
        let me = this;

        return [{
            module    :  _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__.default,
            clearable : true,
            labelText : 'height',
            listeners : {change: me.onConfigChange.bind(me, 'height')},
            maxValue  : 800,
            minValue  : 30,
            stepSize  : 5,
            value     : me.exampleComponent.height,
            style     : {marginTop: '10px'}
        }, {
            module    :  _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__.default,
            clearable : true,
            labelText : 'subMenuGap',
            listeners : {change: me.onConfigChange.bind(me, 'subMenuGap')},
            maxValue  : 20,
            minValue  : 0,
            stepSize  : 1,
            style     : {marginTop: '10px'},
            value     : me.exampleComponent.subMenuGap
        }, {
            module    :  _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__.default,
            clearable : true,
            labelText : 'width',
            listeners : {change: me.onConfigChange.bind(me, 'width')},
            maxValue  : 800,
            minValue  : 100,
            stepSize  : 5,
            style     : {marginTop: '10px'},
            value     : me.exampleComponent.width
        }];
    }

    createExampleComponent() {
        return Neo.create({
            module: _src_menu_Panel_mjs__WEBPACK_IMPORTED_MODULE_1__.default,

            listConfig: {
                displayField: 'name'
            },

            listItems: [{
                iconCls: 'fa fa-user',
                id     : 1,
                name   : 'Item 1'
            }, {
                iconCls: 'fa fa-home',
                id     : 2,
                name   : 'Group 1',
                items  : [{
                    iconCls: 'fa fa-home',
                    id     : 6,
                    name   : 'Item 1'
                }, {
                    iconCls: 'fa fa-home',
                    id     : 7,
                    name   : 'Item 2'
                }, {
                    iconCls: 'fa fa-home',
                    id     : 8,
                    name   : 'Item 3'
                }]
            }, {
                iconCls: 'fa fa-cog',
                id     : 3,
                name   : 'Item 2'
            }, {
                iconCls: 'far fa-calendar',
                id     : 4,
                name   : 'Item 3'
            }, {
                iconCls: 'far fa-clock',
                id     : 5,
                name   : 'Group 2',
                items  : [{
                    iconCls: 'fa fa-clock',
                    id     : 9,
                    name   : 'Item 1'
                }, {
                    iconCls: 'fa fa-clock',
                    id     : 10,
                    name   : 'Item 2'
                }, {
                    iconCls: 'fa fa-clock',
                    id     : 11,
                    name   : 'Group 1',
                    items  : [{
                        iconCls: 'far fa-clock',
                        id     : 12,
                        name   : 'Item 1'
                    }, {
                        iconCls: 'far fa-clock',
                        id     : 13,
                        name   : 'Item 2'
                    }, {
                        iconCls: 'far fa-clock',
                        id     : 14,
                        name   : 'Item 3'
                    }]
                }]
            }]
        });
    }
}

Neo.applyClassConfig(MainContainer);




/***/ }),

/***/ "./examples/menu/panel/app.mjs":
/*!*************************************!*\
  !*** ./examples/menu/panel/app.mjs ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "onStart": () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/menu/panel/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__.default,
    name    : 'Neo.examples.menu.panel'
});




/***/ }),

/***/ "./src/menu/List.mjs":
/*!***************************!*\
  !*** ./src/menu/List.mjs ***!
  \***************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ List)
/* harmony export */ });
/* harmony import */ var _list_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../list/Base.mjs */ "./src/list/Base.mjs");
/* harmony import */ var _selection_menu_ListModel_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../selection/menu/ListModel.mjs */ "./src/selection/menu/ListModel.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/Array.mjs */ "./src/util/Array.mjs");
/* harmony import */ var _Store_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Store.mjs */ "./src/menu/Store.mjs");





/**
 * @class Neo.menu.List
 * @extends Neo.list.Base
 */
class List extends _list_Base_mjs__WEBPACK_IMPORTED_MODULE_0__.default {
    static getConfig() {return {
        /**
         * @member {String} className='Neo.menu.List'
         * @protected
         */
        className: 'Neo.menu.List',
        /**
         * @member {String} ntype='menu-list'
         * @protected
         */
        ntype: 'menu-list',
        /**
         * Read only. We are storing the currently visible subMenu instance.
         * @member {Neo.menu.List|Neo.menu.Panel|null} activeSubMenu=null
         */
        activeSubMenu: null,
        /**
         * @member {String[]} cls=['neo-menu-list','neo-list']
         */
        cls: ['neo-menu-list', 'neo-list'],
        /**
         * True will add 'neo-floating' to the instance cls list.
         * @member {Boolean} floating_=false
         */
        floating_: false,
        /**
         * Optionally pass menu.Store data directly
         * @member {Object[]|null} items_=null
         */
        items_: null,
        /**
         * Storing the list item index of the parent menu in case it exists.
         * @member {Number} parentIndex=0
         * @protected
         */
        parentIndex: 0,
        /**
         * Storing a reference to the parent menu in case it exists.
         * @member {Neo.menu.List|Neo.menu.Panel|null} parentMenu=null
         * @protected
         */
        parentMenu: null,
        /**
         * Value for the list.Base selectionModel_ config
         * @member {Neo.selection.menu.ListModel} selectionModel=ListModel
         */
        selectionModel: _selection_menu_ListModel_mjs__WEBPACK_IMPORTED_MODULE_1__.default,
        /**
         * Value for the list.Base store_ config
         * @member {Neo.menu.Store} store=Store
         */
        store: _Store_mjs__WEBPACK_IMPORTED_MODULE_3__.default,
        /**
         * The distance in px between a menu and a child menu
         * See: https://github.com/neomjs/neo/issues/2569
         * @member {Number} subMenuGap=0
         */
        subMenuGap: 0,
        /**
         * Storing childMenus by record keyProperty
         * @member {Object} subMenuMap=null
         * @protected
         */
        subMenuMap: null
    }}

    /**
     * Triggered after the floating config got changed
     * @param {Object[]} value
     * @param {Object[]} oldValue
     * @protected
     */
    afterSetFloating(value, oldValue) {
        let cls = this.cls;

        _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__.default[value ? 'add' : 'remove'](cls, 'neo-floating');
        this.cls = cls;
    }

    /**
     * Triggered after the items config got changed
     * @param {Object[]} value
     * @param {Object[]} oldValue
     * @protected
     */
    afterSetItems(value, oldValue) {
        let store = this.store;

        oldValue && store.remove(oldValue);
        value    && store.add(value);
    }

    /**
     * Override this method for custom renderers
     * @param {Object} record
     * @param {Number} index
     * @returns {Object|Object[]|String} Either a config object to assign to the item, a vdom cn array or a html string
     */
    createItemContent(record, index) {
        let me     = this,
            id     = record[me.store.keyProperty],
            vdomCn = [{tag: 'span', cls: ['neo-content'], html: record[me.displayField]}];

        if (record.iconCls && record.iconCls !== '') {
            vdomCn.unshift({tag: 'i', cls: ['neo-icon', record.iconCls], id: me.getIconId(id)});
        }

        if (me.hasChildren(record)) {
            vdomCn.push({tag: 'i', cls: ['neo-arrow-icon', 'neo-icon', 'fas fa-chevron-right'], id: me.getArrowIconId(id)});
        }

        return vdomCn;
    }

    /**
     *
     */
    destroy(...args) {
        let me            = this,
            activeSubMenu = me.activeSubMenu,
            subMenuMap    = me.subMenuMap;

        me.store.destroy();
        me.store = null;

        if (activeSubMenu) {
            activeSubMenu.unmount();
            me.activeSubMenu = null;
        }

        Object.entries(subMenuMap).forEach(([key, value]) => {
            value.destroy();
            subMenuMap[key] = null;
        });

        super.destroy(...args);
    }

    /**
     *
     * @param {Number|String} recordId
     * @returns {String}
     */
    getArrowIconId(recordId) {
        return `${this.id}__arrow_icon__${recordId}`;
    }

    /**
     *
     * @param {Number|String} recordId
     * @returns {String}
     */
    getIconId(recordId) {
        return `${this.id}__icon__${recordId}`;
    }

    /**
     * Checks if a record has items
     * @param {Object} record
     * @returns {Boolean}
     */
    hasChildren(record) {
        return Array.isArray(record.items) && record.items.length > 0;
    }

    /**
     *
     */
    hideSubMenu() {
        let me            = this,
            activeSubMenu = me.activeSubMenu;

        if (activeSubMenu) {
            activeSubMenu.unmount();
            me.activeSubMenu = null;
        }
    }

    /**
     *
     * @param {String[]} items
     */
    onSelect(items) {
        let me     = this,
            nodeId = items[0],
            record = me.store.get(me.getItemRecordId(nodeId));

        if (me.hasChildren(record)) {
            me.showSubMenu(nodeId, record);
        } else {
            me.hideSubMenu();
        }
    }

    /**
     *
     * @param {String} nodeId
     * @param {Object} record
     */
    showSubMenu(nodeId, record) {
        let me         = this,
            store      = me.store,
            recordId   = record[store.keyProperty],
            subMenuMap = me.subMenuMap || {},
            subMenu    = subMenuMap[`menu__${recordId}`], // ids can be Numbers, so we do need a prefix
            menuStyle, style;

        // We need to check if the subMenu is already mounted, since this method gets triggered
        // when navigating out of it (arrow left key)
        if (!(subMenu?.mounted)) {
            Neo.main.DomAccess.getBoundingClientRect({
                appName: me.appName,
                id     : nodeId
            }).then(rect => {
                style = {
                    left: `${rect.right + me.subMenuGap}px`,
                    top : `${rect.top - 1}px` // minus the border
                };

                if (subMenu) {
                    menuStyle = subMenu.style;

                    Object.assign(menuStyle, style);

                    subMenu.setSilent({style: menuStyle});
                } else {
                    subMenuMap[`menu__${recordId}`] = subMenu = Neo.create({
                        module     : List,
                        appName    : me.appName,
                        floating   : true,
                        items      : record.items,
                        parentId   : Neo.apps[me.appName].mainView.id,
                        parentIndex: store.indexOf(record),
                        parentMenu : me,
                        style      : style
                    });
                }

                me.activeSubMenu = subMenu;
                me.subMenuMap    = subMenuMap;

                subMenu.render(true);
            });
        }
    }

    /**
     *
     */
    unmount() {
        this.selectionModel.deselectAll(true); // silent update
        this.hideSubMenu();

        super.unmount();
    }
}

Neo.applyClassConfig(List);




/***/ }),

/***/ "./src/menu/Model.mjs":
/*!****************************!*\
  !*** ./src/menu/Model.mjs ***!
  \****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Model)
/* harmony export */ });
/* harmony import */ var _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/data/Model.mjs */ "./src/data/Model.mjs");


/**
 * @class Neo.menu.Model
 * @extends Neo.data.Model
 */
class Model extends _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__.default {
    static getConfig() {return {
        /**
         * @member {String} className='Neo.menu.Model'
         * @protected
         */
        className: 'Neo.menu.Model',
        /**
         * @member {String} keyProperty='id'
         */
        keyProperty: 'id',
        /**
         * @member {Object[]} fields
         */
        fields: [{
            name: 'iconCls',
            type: 'String'
        }, {
            name: 'id',
            type: 'Integer'
        }, {
            name: 'items', // optional
            type: 'Array'
        }, {
            name: 'name',
            type: 'String'
        }]
    }}
}

Neo.applyClassConfig(Model);




/***/ }),

/***/ "./src/menu/Panel.mjs":
/*!****************************!*\
  !*** ./src/menu/Panel.mjs ***!
  \****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Panel)
/* harmony export */ });
/* harmony import */ var _container_Panel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../container/Panel.mjs */ "./src/container/Panel.mjs");
/* harmony import */ var _util_ClassSystem_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/ClassSystem.mjs */ "./src/util/ClassSystem.mjs");
/* harmony import */ var _List_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./List.mjs */ "./src/menu/List.mjs");




/**
 * @class Neo.menu.Panel
 * @extends Neo.container.Panel
 */
class Panel extends _container_Panel_mjs__WEBPACK_IMPORTED_MODULE_0__.default {
    static getConfig() {return {
        /**
         * @member {String} className='Neo.menu.Panel'
         * @protected
         */
        className: 'Neo.menu.Panel',
        /**
         * @member {String} ntype='menu'
         * @protected
         */
        ntype: 'menu',
        /**
         * @member {String[]} cls=['neo-menu','neo-panel','neo-container']
         */
        cls: ['neo-menu', 'neo-panel', 'neo-container'],
        /**
         * @member {Neo.menu.List} list_=List
         * @protected
         */
        list_: _List_mjs__WEBPACK_IMPORTED_MODULE_2__.default,
        /**
         * Pass config options to the contained Neo.menu.List
         * @member {Object|null} listConfig=null
         */
        listConfig: null,
        /**
         * Optionally pass menu.Store data directly
         * @member {Object[]|null} listItems_=null
         */
        listItems_: null,
        /**
         * The distance in px between a menu and a child menu
         * See: https://github.com/neomjs/neo/issues/2569
         * @member {Number} subMenuGap_=0
         */
        subMenuGap_: 0
    }}

    /**
     * Triggered after the list config got changed
     * @param {Neo.menu.List} value
     * @param {Neo.menu.List} oldValue
     * @protected
     */
    afterSetList(value, oldValue) {
        this.add(value);
    }

    /**
     * Triggered after the listItems config got changed
     * @param {Object[]} value
     * @param {Object[]} oldValue
     * @protected
     */
    afterSetListItems(value, oldValue) {
        this.list.items = value;
    }

    /**
     * Triggered after the subMenuGap config got changed
     * @param {Number} value
     * @param {Number} oldValue
     * @protected
     */
    afterSetSubMenuGap(value, oldValue) {
        this.list.subMenuGap = value;
    }

    /**
     * Triggered before the list config gets changed.
     * @param {Neo.menu.List} value
     * @param {Neo.menu.List} oldValue
     * @protected
     */
    beforeSetList(value, oldValue) {
        oldValue && oldValue.destroy();
        return _util_ClassSystem_mjs__WEBPACK_IMPORTED_MODULE_1__.default.beforeSetInstance(value, _List_mjs__WEBPACK_IMPORTED_MODULE_2__.default, this.listConfig);
    }
}

Neo.applyClassConfig(Panel);




/***/ }),

/***/ "./src/menu/Store.mjs":
/*!****************************!*\
  !*** ./src/menu/Store.mjs ***!
  \****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Store)
/* harmony export */ });
/* harmony import */ var _Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Model.mjs */ "./src/menu/Model.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../src/data/Store.mjs */ "./src/data/Store.mjs");



/**
 * @class Neo.menu.Store
 * @extends Neo.data.Store
 */
class Store extends _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__.default {
    static getConfig() {return {
        /**
         * @member {String} className='Neo.menu.Store'
         * @protected
         */
        className: 'Neo.menu.Store',
        /**
         * @member {Neo.menu.Model} model=Model
         */
        model: _Model_mjs__WEBPACK_IMPORTED_MODULE_0__.default
    }}
}

Neo.applyClassConfig(Store);




/***/ }),

/***/ "./src/selection/menu/ListModel.mjs":
/*!******************************************!*\
  !*** ./src/selection/menu/ListModel.mjs ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ListModel)
/* harmony export */ });
/* harmony import */ var _ListModel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ListModel.mjs */ "./src/selection/ListModel.mjs");


/**
 * @class Neo.selection.menu.ListModel
 * @extends Neo.selection.ListModel
 */
class ListModel extends _ListModel_mjs__WEBPACK_IMPORTED_MODULE_0__.default {
    static getConfig() {return {
        /**
         * @member {String} className='Neo.selection.menu.ListModel'
         * @protected
         */
        className: 'Neo.selection.menu.ListModel',
        /**
         * @member {String} ntype='selection-menu-listmodel'
         * @protected
         */
        ntype: 'selection-menu-listmodel'
    }}

    /**
     *
     * @param {Object} data
     */
    onKeyDownLeft(data) {
        let view       = this.view,
            parentMenu = view.parentMenu;

        if (parentMenu) {
            view.selectionModel.deselectAll();
            parentMenu.selectionModel.selectAt(view.parentIndex);
        }
    }

    /**
     *
     * @param {Object} data
     */
    onKeyDownRight(data) {
        let activeSubMenu = this.view.activeSubMenu;

        if (activeSubMenu) {
            activeSubMenu.selectionModel.selectAt(0);
        }
    }
}

Neo.applyClassConfig(ListModel);




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZW8ubWpzLy4vZXhhbXBsZXMvbWVudS9wYW5lbC9NYWluQ29udGFpbmVyLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vZXhhbXBsZXMvbWVudS9wYW5lbC9hcHAubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvbWVudS9MaXN0Lm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL21lbnUvTW9kZWwubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvbWVudS9QYW5lbC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL3NyYy9tZW51L1N0b3JlLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL3NlbGVjdGlvbi9tZW51L0xpc3RNb2RlbC5tanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFvRTtBQUNKO0FBQ087O0FBRXZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtEQUFxQjtBQUNqRCx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QiwrREFBVztBQUNwQztBQUNBO0FBQ0EseUJBQXlCLDZDQUE2QztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixTQUFTO0FBQ1QseUJBQXlCLCtEQUFXO0FBQ3BDO0FBQ0E7QUFDQSx5QkFBeUIsaURBQWlEO0FBQzFFO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixrQkFBa0I7QUFDM0M7QUFDQSxTQUFTO0FBQ1QseUJBQXlCLCtEQUFXO0FBQ3BDO0FBQ0E7QUFDQSx5QkFBeUIsNENBQTRDO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixrQkFBa0I7QUFDM0M7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQix3REFBSTs7QUFFeEI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7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LG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUU4QiIsImZpbGUiOiJjaHVua3MvYXBwL3ZlbmRvcnMtZXhhbXBsZXNfbWVudV9wYW5lbF9hcHBfbWpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbmZpZ3VyYXRpb25WaWV3cG9ydCBmcm9tICcuLi8uLi9Db25maWd1cmF0aW9uVmlld3BvcnQubWpzJztcbmltcG9ydCBNZW51ICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL21lbnUvUGFuZWwubWpzJztcbmltcG9ydCBOdW1iZXJGaWVsZCAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvTnVtYmVyLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5leGFtcGxlcy5tZW51LnBhbmVsLk1haW5Db250YWluZXJcbiAqIEBleHRlbmRzIE5lby5leGFtcGxlcy5Db25maWd1cmF0aW9uVmlld3BvcnRcbiAqL1xuY2xhc3MgTWFpbkNvbnRhaW5lciBleHRlbmRzIENvbmZpZ3VyYXRpb25WaWV3cG9ydCB7XG4gICAgc3RhdGljIGdldENvbmZpZygpIHtyZXR1cm4ge1xuICAgICAgICBjbGFzc05hbWUgICAgICAgICAgIDogJ05lby5leGFtcGxlcy5tZW51LnBhbmVsLk1haW5Db250YWluZXInLFxuICAgICAgICBhdXRvTW91bnQgICAgICAgICAgIDogdHJ1ZSxcbiAgICAgICAgY29uZmlnSXRlbUxhYmVsV2lkdGg6IDEzMCxcbiAgICAgICAgY29uZmlnSXRlbVdpZHRoICAgICA6IDIzMCxcbiAgICAgICAgbGF5b3V0ICAgICAgICAgICAgICA6IHtudHlwZTogJ2hib3gnLCBhbGlnbjogJ3N0cmV0Y2gnfVxuICAgIH19XG5cbiAgICBjcmVhdGVDb25maWd1cmF0aW9uQ29tcG9uZW50cygpIHtcbiAgICAgICAgbGV0IG1lID0gdGhpcztcblxuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgIG1vZHVsZSAgICA6ICBOdW1iZXJGaWVsZCxcbiAgICAgICAgICAgIGNsZWFyYWJsZSA6IHRydWUsXG4gICAgICAgICAgICBsYWJlbFRleHQgOiAnaGVpZ2h0JyxcbiAgICAgICAgICAgIGxpc3RlbmVycyA6IHtjaGFuZ2U6IG1lLm9uQ29uZmlnQ2hhbmdlLmJpbmQobWUsICdoZWlnaHQnKX0sXG4gICAgICAgICAgICBtYXhWYWx1ZSAgOiA4MDAsXG4gICAgICAgICAgICBtaW5WYWx1ZSAgOiAzMCxcbiAgICAgICAgICAgIHN0ZXBTaXplICA6IDUsXG4gICAgICAgICAgICB2YWx1ZSAgICAgOiBtZS5leGFtcGxlQ29tcG9uZW50LmhlaWdodCxcbiAgICAgICAgICAgIHN0eWxlICAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J31cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgIDogIE51bWJlckZpZWxkLFxuICAgICAgICAgICAgY2xlYXJhYmxlIDogdHJ1ZSxcbiAgICAgICAgICAgIGxhYmVsVGV4dCA6ICdzdWJNZW51R2FwJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyA6IHtjaGFuZ2U6IG1lLm9uQ29uZmlnQ2hhbmdlLmJpbmQobWUsICdzdWJNZW51R2FwJyl9LFxuICAgICAgICAgICAgbWF4VmFsdWUgIDogMjAsXG4gICAgICAgICAgICBtaW5WYWx1ZSAgOiAwLFxuICAgICAgICAgICAgc3RlcFNpemUgIDogMSxcbiAgICAgICAgICAgIHN0eWxlICAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgICAgICB2YWx1ZSAgICAgOiBtZS5leGFtcGxlQ29tcG9uZW50LnN1Yk1lbnVHYXBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgIDogIE51bWJlckZpZWxkLFxuICAgICAgICAgICAgY2xlYXJhYmxlIDogdHJ1ZSxcbiAgICAgICAgICAgIGxhYmVsVGV4dCA6ICd3aWR0aCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgOiB7Y2hhbmdlOiBtZS5vbkNvbmZpZ0NoYW5nZS5iaW5kKG1lLCAnd2lkdGgnKX0sXG4gICAgICAgICAgICBtYXhWYWx1ZSAgOiA4MDAsXG4gICAgICAgICAgICBtaW5WYWx1ZSAgOiAxMDAsXG4gICAgICAgICAgICBzdGVwU2l6ZSAgOiA1LFxuICAgICAgICAgICAgc3R5bGUgICAgIDoge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgICAgIHZhbHVlICAgICA6IG1lLmV4YW1wbGVDb21wb25lbnQud2lkdGhcbiAgICAgICAgfV07XG4gICAgfVxuXG4gICAgY3JlYXRlRXhhbXBsZUNvbXBvbmVudCgpIHtcbiAgICAgICAgcmV0dXJuIE5lby5jcmVhdGUoe1xuICAgICAgICAgICAgbW9kdWxlOiBNZW51LFxuXG4gICAgICAgICAgICBsaXN0Q29uZmlnOiB7XG4gICAgICAgICAgICAgICAgZGlzcGxheUZpZWxkOiAnbmFtZSdcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGxpc3RJdGVtczogW3tcbiAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEgZmEtdXNlcicsXG4gICAgICAgICAgICAgICAgaWQgICAgIDogMSxcbiAgICAgICAgICAgICAgICBuYW1lICAgOiAnSXRlbSAxJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYSBmYS1ob21lJyxcbiAgICAgICAgICAgICAgICBpZCAgICAgOiAyLFxuICAgICAgICAgICAgICAgIG5hbWUgICA6ICdHcm91cCAxJyxcbiAgICAgICAgICAgICAgICBpdGVtcyAgOiBbe1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEgZmEtaG9tZScsXG4gICAgICAgICAgICAgICAgICAgIGlkICAgICA6IDYsXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgICA6ICdJdGVtIDEnXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEgZmEtaG9tZScsXG4gICAgICAgICAgICAgICAgICAgIGlkICAgICA6IDcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgICA6ICdJdGVtIDInXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEgZmEtaG9tZScsXG4gICAgICAgICAgICAgICAgICAgIGlkICAgICA6IDgsXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgICA6ICdJdGVtIDMnXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEgZmEtY29nJyxcbiAgICAgICAgICAgICAgICBpZCAgICAgOiAzLFxuICAgICAgICAgICAgICAgIG5hbWUgICA6ICdJdGVtIDInXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgaWNvbkNsczogJ2ZhciBmYS1jYWxlbmRhcicsXG4gICAgICAgICAgICAgICAgaWQgICAgIDogNCxcbiAgICAgICAgICAgICAgICBuYW1lICAgOiAnSXRlbSAzJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYXIgZmEtY2xvY2snLFxuICAgICAgICAgICAgICAgIGlkICAgICA6IDUsXG4gICAgICAgICAgICAgICAgbmFtZSAgIDogJ0dyb3VwIDInLFxuICAgICAgICAgICAgICAgIGl0ZW1zICA6IFt7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYSBmYS1jbG9jaycsXG4gICAgICAgICAgICAgICAgICAgIGlkICAgICA6IDksXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgICA6ICdJdGVtIDEnXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEgZmEtY2xvY2snLFxuICAgICAgICAgICAgICAgICAgICBpZCAgICAgOiAxMCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSAgIDogJ0l0ZW0gMidcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYSBmYS1jbG9jaycsXG4gICAgICAgICAgICAgICAgICAgIGlkICAgICA6IDExLFxuICAgICAgICAgICAgICAgICAgICBuYW1lICAgOiAnR3JvdXAgMScsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zICA6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmFyIGZhLWNsb2NrJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkICAgICA6IDEyLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSAgIDogJ0l0ZW0gMSdcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkNsczogJ2ZhciBmYS1jbG9jaycsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZCAgICAgOiAxMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgICA6ICdJdGVtIDInXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYXIgZmEtY2xvY2snLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgICAgIDogMTQsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgOiAnSXRlbSAzJ1xuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbk5lby5hcHBseUNsYXNzQ29uZmlnKE1haW5Db250YWluZXIpO1xuXG5leHBvcnQge01haW5Db250YWluZXIgYXMgZGVmYXVsdH07XG4iLCJpbXBvcnQgTWFpbkNvbnRhaW5lciBmcm9tICcuL01haW5Db250YWluZXIubWpzJztcblxuY29uc3Qgb25TdGFydCA9ICgpID0+IE5lby5hcHAoe1xuICAgIG1haW5WaWV3OiBNYWluQ29udGFpbmVyLFxuICAgIG5hbWUgICAgOiAnTmVvLmV4YW1wbGVzLm1lbnUucGFuZWwnXG59KTtcblxuZXhwb3J0IHtvblN0YXJ0IGFzIG9uU3RhcnR9O1xuIiwiaW1wb3J0IEJhc2VMaXN0ICBmcm9tICcuLi9saXN0L0Jhc2UubWpzJztcbmltcG9ydCBMaXN0TW9kZWwgZnJvbSAnLi4vc2VsZWN0aW9uL21lbnUvTGlzdE1vZGVsLm1qcyc7XG5pbXBvcnQgTmVvQXJyYXkgIGZyb20gJy4uL3V0aWwvQXJyYXkubWpzJztcbmltcG9ydCBTdG9yZSAgICAgZnJvbSAnLi9TdG9yZS5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8ubWVudS5MaXN0XG4gKiBAZXh0ZW5kcyBOZW8ubGlzdC5CYXNlXG4gKi9cbmNsYXNzIExpc3QgZXh0ZW5kcyBCYXNlTGlzdCB7XG4gICAgc3RhdGljIGdldENvbmZpZygpIHtyZXR1cm4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5tZW51Lkxpc3QnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5tZW51Lkxpc3QnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0nbWVudS1saXN0J1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBudHlwZTogJ21lbnUtbGlzdCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWFkIG9ubHkuIFdlIGFyZSBzdG9yaW5nIHRoZSBjdXJyZW50bHkgdmlzaWJsZSBzdWJNZW51IGluc3RhbmNlLlxuICAgICAgICAgKiBAbWVtYmVyIHtOZW8ubWVudS5MaXN0fE5lby5tZW51LlBhbmVsfG51bGx9IGFjdGl2ZVN1Yk1lbnU9bnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgYWN0aXZlU3ViTWVudTogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBjbHM9WyduZW8tbWVudS1saXN0JywnbmVvLWxpc3QnXVxuICAgICAgICAgKi9cbiAgICAgICAgY2xzOiBbJ25lby1tZW51LWxpc3QnLCAnbmVvLWxpc3QnXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRydWUgd2lsbCBhZGQgJ25lby1mbG9hdGluZycgdG8gdGhlIGluc3RhbmNlIGNscyBsaXN0LlxuICAgICAgICAgKiBAbWVtYmVyIHtCb29sZWFufSBmbG9hdGluZ189ZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIGZsb2F0aW5nXzogZmFsc2UsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPcHRpb25hbGx5IHBhc3MgbWVudS5TdG9yZSBkYXRhIGRpcmVjdGx5XG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdFtdfG51bGx9IGl0ZW1zXz1udWxsXG4gICAgICAgICAqL1xuICAgICAgICBpdGVtc186IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yaW5nIHRoZSBsaXN0IGl0ZW0gaW5kZXggb2YgdGhlIHBhcmVudCBtZW51IGluIGNhc2UgaXQgZXhpc3RzLlxuICAgICAgICAgKiBAbWVtYmVyIHtOdW1iZXJ9IHBhcmVudEluZGV4PTBcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgcGFyZW50SW5kZXg6IDAsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yaW5nIGEgcmVmZXJlbmNlIHRvIHRoZSBwYXJlbnQgbWVudSBpbiBjYXNlIGl0IGV4aXN0cy5cbiAgICAgICAgICogQG1lbWJlciB7TmVvLm1lbnUuTGlzdHxOZW8ubWVudS5QYW5lbHxudWxsfSBwYXJlbnRNZW51PW51bGxcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgcGFyZW50TWVudTogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZhbHVlIGZvciB0aGUgbGlzdC5CYXNlIHNlbGVjdGlvbk1vZGVsXyBjb25maWdcbiAgICAgICAgICogQG1lbWJlciB7TmVvLnNlbGVjdGlvbi5tZW51Lkxpc3RNb2RlbH0gc2VsZWN0aW9uTW9kZWw9TGlzdE1vZGVsXG4gICAgICAgICAqL1xuICAgICAgICBzZWxlY3Rpb25Nb2RlbDogTGlzdE1vZGVsLFxuICAgICAgICAvKipcbiAgICAgICAgICogVmFsdWUgZm9yIHRoZSBsaXN0LkJhc2Ugc3RvcmVfIGNvbmZpZ1xuICAgICAgICAgKiBAbWVtYmVyIHtOZW8ubWVudS5TdG9yZX0gc3RvcmU9U3RvcmVcbiAgICAgICAgICovXG4gICAgICAgIHN0b3JlOiBTdG9yZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkaXN0YW5jZSBpbiBweCBiZXR3ZWVuIGEgbWVudSBhbmQgYSBjaGlsZCBtZW51XG4gICAgICAgICAqIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL25lb21qcy9uZW8vaXNzdWVzLzI1NjlcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyfSBzdWJNZW51R2FwPTBcbiAgICAgICAgICovXG4gICAgICAgIHN1Yk1lbnVHYXA6IDAsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yaW5nIGNoaWxkTWVudXMgYnkgcmVjb3JkIGtleVByb3BlcnR5XG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gc3ViTWVudU1hcD1udWxsXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHN1Yk1lbnVNYXA6IG51bGxcbiAgICB9fVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBmbG9hdGluZyBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0W119IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0RmxvYXRpbmcodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBjbHMgPSB0aGlzLmNscztcblxuICAgICAgICBOZW9BcnJheVt2YWx1ZSA/ICdhZGQnIDogJ3JlbW92ZSddKGNscywgJ25lby1mbG9hdGluZycpO1xuICAgICAgICB0aGlzLmNscyA9IGNscztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIGl0ZW1zIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7T2JqZWN0W119IHZhbHVlXG4gICAgICogQHBhcmFtIHtPYmplY3RbXX0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRJdGVtcyh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgbGV0IHN0b3JlID0gdGhpcy5zdG9yZTtcblxuICAgICAgICBvbGRWYWx1ZSAmJiBzdG9yZS5yZW1vdmUob2xkVmFsdWUpO1xuICAgICAgICB2YWx1ZSAgICAmJiBzdG9yZS5hZGQodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIGZvciBjdXN0b20gcmVuZGVyZXJzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlY29yZFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgICAqIEByZXR1cm5zIHtPYmplY3R8T2JqZWN0W118U3RyaW5nfSBFaXRoZXIgYSBjb25maWcgb2JqZWN0IHRvIGFzc2lnbiB0byB0aGUgaXRlbSwgYSB2ZG9tIGNuIGFycmF5IG9yIGEgaHRtbCBzdHJpbmdcbiAgICAgKi9cbiAgICBjcmVhdGVJdGVtQ29udGVudChyZWNvcmQsIGluZGV4KSB7XG4gICAgICAgIGxldCBtZSAgICAgPSB0aGlzLFxuICAgICAgICAgICAgaWQgICAgID0gcmVjb3JkW21lLnN0b3JlLmtleVByb3BlcnR5XSxcbiAgICAgICAgICAgIHZkb21DbiA9IFt7dGFnOiAnc3BhbicsIGNsczogWyduZW8tY29udGVudCddLCBodG1sOiByZWNvcmRbbWUuZGlzcGxheUZpZWxkXX1dO1xuXG4gICAgICAgIGlmIChyZWNvcmQuaWNvbkNscyAmJiByZWNvcmQuaWNvbkNscyAhPT0gJycpIHtcbiAgICAgICAgICAgIHZkb21Dbi51bnNoaWZ0KHt0YWc6ICdpJywgY2xzOiBbJ25lby1pY29uJywgcmVjb3JkLmljb25DbHNdLCBpZDogbWUuZ2V0SWNvbklkKGlkKX0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1lLmhhc0NoaWxkcmVuKHJlY29yZCkpIHtcbiAgICAgICAgICAgIHZkb21Dbi5wdXNoKHt0YWc6ICdpJywgY2xzOiBbJ25lby1hcnJvdy1pY29uJywgJ25lby1pY29uJywgJ2ZhcyBmYS1jaGV2cm9uLXJpZ2h0J10sIGlkOiBtZS5nZXRBcnJvd0ljb25JZChpZCl9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2ZG9tQ247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBkZXN0cm95KC4uLmFyZ3MpIHtcbiAgICAgICAgbGV0IG1lICAgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgYWN0aXZlU3ViTWVudSA9IG1lLmFjdGl2ZVN1Yk1lbnUsXG4gICAgICAgICAgICBzdWJNZW51TWFwICAgID0gbWUuc3ViTWVudU1hcDtcblxuICAgICAgICBtZS5zdG9yZS5kZXN0cm95KCk7XG4gICAgICAgIG1lLnN0b3JlID0gbnVsbDtcblxuICAgICAgICBpZiAoYWN0aXZlU3ViTWVudSkge1xuICAgICAgICAgICAgYWN0aXZlU3ViTWVudS51bm1vdW50KCk7XG4gICAgICAgICAgICBtZS5hY3RpdmVTdWJNZW51ID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHN1Yk1lbnVNYXApLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgdmFsdWUuZGVzdHJveSgpO1xuICAgICAgICAgICAgc3ViTWVudU1hcFtrZXldID0gbnVsbDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3VwZXIuZGVzdHJveSguLi5hcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gcmVjb3JkSWRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfVxuICAgICAqL1xuICAgIGdldEFycm93SWNvbklkKHJlY29yZElkKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmlkfV9fYXJyb3dfaWNvbl9fJHtyZWNvcmRJZH1gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSByZWNvcmRJZFxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0SWNvbklkKHJlY29yZElkKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmlkfV9faWNvbl9fJHtyZWNvcmRJZH1gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhIHJlY29yZCBoYXMgaXRlbXNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVjb3JkXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICovXG4gICAgaGFzQ2hpbGRyZW4ocmVjb3JkKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHJlY29yZC5pdGVtcykgJiYgcmVjb3JkLml0ZW1zLmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBoaWRlU3ViTWVudSgpIHtcbiAgICAgICAgbGV0IG1lICAgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgYWN0aXZlU3ViTWVudSA9IG1lLmFjdGl2ZVN1Yk1lbnU7XG5cbiAgICAgICAgaWYgKGFjdGl2ZVN1Yk1lbnUpIHtcbiAgICAgICAgICAgIGFjdGl2ZVN1Yk1lbnUudW5tb3VudCgpO1xuICAgICAgICAgICAgbWUuYWN0aXZlU3ViTWVudSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nW119IGl0ZW1zXG4gICAgICovXG4gICAgb25TZWxlY3QoaXRlbXMpIHtcbiAgICAgICAgbGV0IG1lICAgICA9IHRoaXMsXG4gICAgICAgICAgICBub2RlSWQgPSBpdGVtc1swXSxcbiAgICAgICAgICAgIHJlY29yZCA9IG1lLnN0b3JlLmdldChtZS5nZXRJdGVtUmVjb3JkSWQobm9kZUlkKSk7XG5cbiAgICAgICAgaWYgKG1lLmhhc0NoaWxkcmVuKHJlY29yZCkpIHtcbiAgICAgICAgICAgIG1lLnNob3dTdWJNZW51KG5vZGVJZCwgcmVjb3JkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lLmhpZGVTdWJNZW51KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBub2RlSWRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVjb3JkXG4gICAgICovXG4gICAgc2hvd1N1Yk1lbnUobm9kZUlkLCByZWNvcmQpIHtcbiAgICAgICAgbGV0IG1lICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgc3RvcmUgICAgICA9IG1lLnN0b3JlLFxuICAgICAgICAgICAgcmVjb3JkSWQgICA9IHJlY29yZFtzdG9yZS5rZXlQcm9wZXJ0eV0sXG4gICAgICAgICAgICBzdWJNZW51TWFwID0gbWUuc3ViTWVudU1hcCB8fCB7fSxcbiAgICAgICAgICAgIHN1Yk1lbnUgICAgPSBzdWJNZW51TWFwW2BtZW51X18ke3JlY29yZElkfWBdLCAvLyBpZHMgY2FuIGJlIE51bWJlcnMsIHNvIHdlIGRvIG5lZWQgYSBwcmVmaXhcbiAgICAgICAgICAgIG1lbnVTdHlsZSwgc3R5bGU7XG5cbiAgICAgICAgLy8gV2UgbmVlZCB0byBjaGVjayBpZiB0aGUgc3ViTWVudSBpcyBhbHJlYWR5IG1vdW50ZWQsIHNpbmNlIHRoaXMgbWV0aG9kIGdldHMgdHJpZ2dlcmVkXG4gICAgICAgIC8vIHdoZW4gbmF2aWdhdGluZyBvdXQgb2YgaXQgKGFycm93IGxlZnQga2V5KVxuICAgICAgICBpZiAoIShzdWJNZW51Py5tb3VudGVkKSkge1xuICAgICAgICAgICAgTmVvLm1haW4uRG9tQWNjZXNzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCh7XG4gICAgICAgICAgICAgICAgYXBwTmFtZTogbWUuYXBwTmFtZSxcbiAgICAgICAgICAgICAgICBpZCAgICAgOiBub2RlSWRcbiAgICAgICAgICAgIH0pLnRoZW4ocmVjdCA9PiB7XG4gICAgICAgICAgICAgICAgc3R5bGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGAke3JlY3QucmlnaHQgKyBtZS5zdWJNZW51R2FwfXB4YCxcbiAgICAgICAgICAgICAgICAgICAgdG9wIDogYCR7cmVjdC50b3AgLSAxfXB4YCAvLyBtaW51cyB0aGUgYm9yZGVyXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChzdWJNZW51KSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnVTdHlsZSA9IHN1Yk1lbnUuc3R5bGU7XG5cbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtZW51U3R5bGUsIHN0eWxlKTtcblxuICAgICAgICAgICAgICAgICAgICBzdWJNZW51LnNldFNpbGVudCh7c3R5bGU6IG1lbnVTdHlsZX0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Yk1lbnVNYXBbYG1lbnVfXyR7cmVjb3JkSWR9YF0gPSBzdWJNZW51ID0gTmVvLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGUgICAgIDogTGlzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcE5hbWUgICAgOiBtZS5hcHBOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmcgICA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyAgICAgIDogcmVjb3JkLml0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SWQgICA6IE5lby5hcHBzW21lLmFwcE5hbWVdLm1haW5WaWV3LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SW5kZXg6IHN0b3JlLmluZGV4T2YocmVjb3JkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudE1lbnUgOiBtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlICAgICAgOiBzdHlsZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtZS5hY3RpdmVTdWJNZW51ID0gc3ViTWVudTtcbiAgICAgICAgICAgICAgICBtZS5zdWJNZW51TWFwICAgID0gc3ViTWVudU1hcDtcblxuICAgICAgICAgICAgICAgIHN1Yk1lbnUucmVuZGVyKHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIHVubW91bnQoKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZWwuZGVzZWxlY3RBbGwodHJ1ZSk7IC8vIHNpbGVudCB1cGRhdGVcbiAgICAgICAgdGhpcy5oaWRlU3ViTWVudSgpO1xuXG4gICAgICAgIHN1cGVyLnVubW91bnQoKTtcbiAgICB9XG59XG5cbk5lby5hcHBseUNsYXNzQ29uZmlnKExpc3QpO1xuXG5leHBvcnQge0xpc3QgYXMgZGVmYXVsdH07XG4iLCJpbXBvcnQgQmFzZU1vZGVsIGZyb20gJy4uLy4uL3NyYy9kYXRhL01vZGVsLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5tZW51Lk1vZGVsXG4gKiBAZXh0ZW5kcyBOZW8uZGF0YS5Nb2RlbFxuICovXG5jbGFzcyBNb2RlbCBleHRlbmRzIEJhc2VNb2RlbCB7XG4gICAgc3RhdGljIGdldENvbmZpZygpIHtyZXR1cm4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5tZW51Lk1vZGVsJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdOZW8ubWVudS5Nb2RlbCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGtleVByb3BlcnR5PSdpZCdcbiAgICAgICAgICovXG4gICAgICAgIGtleVByb3BlcnR5OiAnaWQnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119IGZpZWxkc1xuICAgICAgICAgKi9cbiAgICAgICAgZmllbGRzOiBbe1xuICAgICAgICAgICAgbmFtZTogJ2ljb25DbHMnLFxuICAgICAgICAgICAgdHlwZTogJ1N0cmluZydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ2lkJyxcbiAgICAgICAgICAgIHR5cGU6ICdJbnRlZ2VyJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAnaXRlbXMnLCAvLyBvcHRpb25hbFxuICAgICAgICAgICAgdHlwZTogJ0FycmF5J1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAnbmFtZScsXG4gICAgICAgICAgICB0eXBlOiAnU3RyaW5nJ1xuICAgICAgICB9XVxuICAgIH19XG59XG5cbk5lby5hcHBseUNsYXNzQ29uZmlnKE1vZGVsKTtcblxuZXhwb3J0IHtNb2RlbCBhcyBkZWZhdWx0fTtcbiIsImltcG9ydCBCYXNlUGFuZWwgICAgICAgZnJvbSAnLi4vY29udGFpbmVyL1BhbmVsLm1qcyc7XG5pbXBvcnQgQ2xhc3NTeXN0ZW1VdGlsIGZyb20gJy4uL3V0aWwvQ2xhc3NTeXN0ZW0ubWpzJztcbmltcG9ydCBMaXN0ICAgICAgICAgICAgZnJvbSAnLi9MaXN0Lm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5tZW51LlBhbmVsXG4gKiBAZXh0ZW5kcyBOZW8uY29udGFpbmVyLlBhbmVsXG4gKi9cbmNsYXNzIFBhbmVsIGV4dGVuZHMgQmFzZVBhbmVsIHtcbiAgICBzdGF0aWMgZ2V0Q29uZmlnKCkge3JldHVybiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLm1lbnUuUGFuZWwnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5tZW51LlBhbmVsJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gbnR5cGU9J21lbnUnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAnbWVudScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gY2xzPVsnbmVvLW1lbnUnLCduZW8tcGFuZWwnLCduZW8tY29udGFpbmVyJ11cbiAgICAgICAgICovXG4gICAgICAgIGNsczogWyduZW8tbWVudScsICduZW8tcGFuZWwnLCAnbmVvLWNvbnRhaW5lciddLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TmVvLm1lbnUuTGlzdH0gbGlzdF89TGlzdFxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBsaXN0XzogTGlzdCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBhc3MgY29uZmlnIG9wdGlvbnMgdG8gdGhlIGNvbnRhaW5lZCBOZW8ubWVudS5MaXN0XG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdHxudWxsfSBsaXN0Q29uZmlnPW51bGxcbiAgICAgICAgICovXG4gICAgICAgIGxpc3RDb25maWc6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPcHRpb25hbGx5IHBhc3MgbWVudS5TdG9yZSBkYXRhIGRpcmVjdGx5XG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdFtdfG51bGx9IGxpc3RJdGVtc189bnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEl0ZW1zXzogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkaXN0YW5jZSBpbiBweCBiZXR3ZWVuIGEgbWVudSBhbmQgYSBjaGlsZCBtZW51XG4gICAgICAgICAqIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL25lb21qcy9uZW8vaXNzdWVzLzI1NjlcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyfSBzdWJNZW51R2FwXz0wXG4gICAgICAgICAqL1xuICAgICAgICBzdWJNZW51R2FwXzogMFxuICAgIH19XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIGxpc3QgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtOZW8ubWVudS5MaXN0fSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7TmVvLm1lbnUuTGlzdH0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRMaXN0KHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICB0aGlzLmFkZCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBsaXN0SXRlbXMgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtPYmplY3RbXX0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldExpc3RJdGVtcyh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgdGhpcy5saXN0Lml0ZW1zID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBzdWJNZW51R2FwIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldFN1Yk1lbnVHYXAodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHRoaXMubGlzdC5zdWJNZW51R2FwID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGJlZm9yZSB0aGUgbGlzdCBjb25maWcgZ2V0cyBjaGFuZ2VkLlxuICAgICAqIEBwYXJhbSB7TmVvLm1lbnUuTGlzdH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge05lby5tZW51Lkxpc3R9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGJlZm9yZVNldExpc3QodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIG9sZFZhbHVlICYmIG9sZFZhbHVlLmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIENsYXNzU3lzdGVtVXRpbC5iZWZvcmVTZXRJbnN0YW5jZSh2YWx1ZSwgTGlzdCwgdGhpcy5saXN0Q29uZmlnKTtcbiAgICB9XG59XG5cbk5lby5hcHBseUNsYXNzQ29uZmlnKFBhbmVsKTtcblxuZXhwb3J0IHtQYW5lbCBhcyBkZWZhdWx0fTtcbiIsImltcG9ydCBNb2RlbCAgICAgZnJvbSAnLi9Nb2RlbC5tanMnO1xuaW1wb3J0IEJhc2VTdG9yZSBmcm9tICcuLi8uLi9zcmMvZGF0YS9TdG9yZS5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8ubWVudS5TdG9yZVxuICogQGV4dGVuZHMgTmVvLmRhdGEuU3RvcmVcbiAqL1xuY2xhc3MgU3RvcmUgZXh0ZW5kcyBCYXNlU3RvcmUge1xuICAgIHN0YXRpYyBnZXRDb25maWcoKSB7cmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8ubWVudS5TdG9yZSdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLm1lbnUuU3RvcmUnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TmVvLm1lbnUuTW9kZWx9IG1vZGVsPU1vZGVsXG4gICAgICAgICAqL1xuICAgICAgICBtb2RlbDogTW9kZWxcbiAgICB9fVxufVxuXG5OZW8uYXBwbHlDbGFzc0NvbmZpZyhTdG9yZSk7XG5cbmV4cG9ydCB7U3RvcmUgYXMgZGVmYXVsdH07XG4iLCJpbXBvcnQgQmFzZUxpc3RNb2RlbCBmcm9tICcuLi9MaXN0TW9kZWwubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLnNlbGVjdGlvbi5tZW51Lkxpc3RNb2RlbFxuICogQGV4dGVuZHMgTmVvLnNlbGVjdGlvbi5MaXN0TW9kZWxcbiAqL1xuY2xhc3MgTGlzdE1vZGVsIGV4dGVuZHMgQmFzZUxpc3RNb2RlbCB7XG4gICAgc3RhdGljIGdldENvbmZpZygpIHtyZXR1cm4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5zZWxlY3Rpb24ubWVudS5MaXN0TW9kZWwnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5zZWxlY3Rpb24ubWVudS5MaXN0TW9kZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0nc2VsZWN0aW9uLW1lbnUtbGlzdG1vZGVsJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBudHlwZTogJ3NlbGVjdGlvbi1tZW51LWxpc3Rtb2RlbCdcbiAgICB9fVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqL1xuICAgIG9uS2V5RG93bkxlZnQoZGF0YSkge1xuICAgICAgICBsZXQgdmlldyAgICAgICA9IHRoaXMudmlldyxcbiAgICAgICAgICAgIHBhcmVudE1lbnUgPSB2aWV3LnBhcmVudE1lbnU7XG5cbiAgICAgICAgaWYgKHBhcmVudE1lbnUpIHtcbiAgICAgICAgICAgIHZpZXcuc2VsZWN0aW9uTW9kZWwuZGVzZWxlY3RBbGwoKTtcbiAgICAgICAgICAgIHBhcmVudE1lbnUuc2VsZWN0aW9uTW9kZWwuc2VsZWN0QXQodmlldy5wYXJlbnRJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgb25LZXlEb3duUmlnaHQoZGF0YSkge1xuICAgICAgICBsZXQgYWN0aXZlU3ViTWVudSA9IHRoaXMudmlldy5hY3RpdmVTdWJNZW51O1xuXG4gICAgICAgIGlmIChhY3RpdmVTdWJNZW51KSB7XG4gICAgICAgICAgICBhY3RpdmVTdWJNZW51LnNlbGVjdGlvbk1vZGVsLnNlbGVjdEF0KDApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5OZW8uYXBwbHlDbGFzc0NvbmZpZyhMaXN0TW9kZWwpO1xuXG5leHBvcnQge0xpc3RNb2RlbCBhcyBkZWZhdWx0fTtcbiJdLCJzb3VyY2VSb290IjoiIn0=