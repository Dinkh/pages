"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["src_calendar_view_SettingsContainer_mjs"],{

/***/ "./src/calendar/view/SettingsContainer.mjs":
/*!*************************************************!*\
  !*** ./src/calendar/view/SettingsContainer.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SettingsContainer)
/* harmony export */ });
/* harmony import */ var _container_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../container/Base.mjs */ "./src/container/Base.mjs");
/* harmony import */ var _tab_Container_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../tab/Container.mjs */ "./src/tab/Container.mjs");



/**
 * @class Neo.calendar.view.SettingsContainer
 * @extends Neo.container.Base
 */
class SettingsContainer extends _container_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static getConfig() {return {
        /**
         * @member {String} className='Neo.calendar.view.SettingsContainer'
         * @protected
         */
        className: 'Neo.calendar.view.SettingsContainer',
        /**
         * @member {String[]} cls=['neo-calendar-settingscontainer', 'neo-container']
         */
        cls: ['neo-calendar-settingscontainer', 'neo-container'],
        /**
         * Read only
         * @member {Boolean} collapsed=false
         */
        collapsed: false,
        /**
         * @member {Object} layout={ntype:'vbox',align:'stretch'}
         * @protected
         */
        layout: {ntype: 'vbox', align: 'stretch'},
        /**
         * True to only keep the active view inside the DOM
         * @member {Boolean} removeInactiveCards=true
         */
        removeInactiveCards: true
    }}

    /**
     * @param {Object} config
     */
    construct(config) {
        super.construct(config);

        let me = this;

        if (me.collapsed) {
            me.vdom.removeDom = true;
        }
    }

    /**
     * @param {Number} width
     */
    collapse(width) {
        let me    = this,
            style = me.style || {},
            vdom;

        style.marginRight = `-${width}px`;
        me._style      = style; // silent update
        me._vdom.style = style; // silent update

        Neo.getComponent(me.parentId).promiseVdomUpdate().then(() => {
            setTimeout(() => {
                me.collapsed = true;

                vdom = me.vdom;
                vdom.removeDom = true;
                me.vdom = vdom;

                me.mounted = false;
            }, 400);
        });
    }

    /**
     *
     */
    createItems() {
        let me = this;

        me.items = [{
            ntype : 'component',
            cls   : ['neo-header'],
            height: 48,
            html  : '<i class="fa fa-cog"></i>Settings'
        }, {
            module             : _tab_Container_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
            removeInactiveCards: me.removeInactiveCards,

            items: [{
                module: () => Promise.all(/*! import() */[__webpack_require__.e("vendors-src_form_field_Number_mjs"), __webpack_require__.e("vendors-src_calendar_view_settings_GeneralContainer_mjs")]).then(__webpack_require__.bind(__webpack_require__, /*! ./settings/GeneralContainer.mjs */ "./src/calendar/view/settings/GeneralContainer.mjs")),
                flag  : 'general',
                style : {padding: '20px'},

                tabButtonConfig: {
                    text: 'General'
                }
            }, {
                ntype: 'component',
                flag : 'day',
                html : 'Day',
                style: {padding: '20px'},

                tabButtonConfig: {
                    text: 'Day'
                }
            }, {
                module: () => Promise.all(/*! import() */[__webpack_require__.e("vendors-src_form_field_Number_mjs"), __webpack_require__.e("src_calendar_view_settings_WeekContainer_mjs")]).then(__webpack_require__.bind(__webpack_require__, /*! ./settings/WeekContainer.mjs */ "./src/calendar/view/settings/WeekContainer.mjs")),
                flag  : 'week',
                style : {padding: '20px'},

                tabButtonConfig: {
                    text: 'Week'
                }
            }, {
                module: () => __webpack_require__.e(/*! import() */ "src_calendar_view_settings_MonthContainer_mjs").then(__webpack_require__.bind(__webpack_require__, /*! ./settings/MonthContainer.mjs */ "./src/calendar/view/settings/MonthContainer.mjs")),
                flag  : 'month',
                style : {padding: '20px'},

                tabButtonConfig: {
                    text: 'Month'
                }
            }, {
                module: () => Promise.all(/*! import() */[__webpack_require__.e("vendors-src_form_field_Number_mjs"), __webpack_require__.e("src_calendar_view_settings_YearContainer_mjs")]).then(__webpack_require__.bind(__webpack_require__, /*! ./settings/YearContainer.mjs */ "./src/calendar/view/settings/YearContainer.mjs")),
                flag  : 'year',
                style : {padding: '20px'},

                tabButtonConfig: {
                    text: 'Year'
                }
            }],

            listeners: {
                activeIndexChange: me.onCardIndexChange,
                scope            : me
            }
        }];

        super.createItems();
    }

    /**
     *
     */
    expand() {
        let me = this,
            style;

        delete me.vdom.removeDom;

        Neo.getComponent(me.parentId).promiseVdomUpdate().then(() => {
            me.collapsed = false;
            me.mounted   = true;

            setTimeout(() => {
                style = me.style || {}
                style.marginRight = '0px';
                me.style = style;
            }, 50);
        });
    }

    /**
     * @returns {Neo.calendar.view.MainContainer}
     */
    getMainContainer() {
        return this.up('calendar-maincontainer');
    }

    /**
     * @param {Object} data
     */
    onCardIndexChange(data) {
        let me            = this,
            container     = data.item,
            mainContainer = me.getMainContainer(),
            listenerId;

        if (mainContainer) {
            if (Neo.isFunction(container.createContent) && container.items.length < 1) {
                if (Neo.typeOf(mainContainer[`${container.flag}Component`]) !== 'NeoInstance') {
                    listenerId = mainContainer.on('cardLoaded', () => {
                        mainContainer.un('cardLoaded', listenerId);
                        setTimeout(() => {container.createContent();}, 30);
                    });
                } else {
                    setTimeout(() => {container.createContent();}, 30);
                }
            }

            if (container.flag !== 'general') {
                mainContainer.activeView = container.flag;
            }
        }
    }
}

Neo.applyClassConfig(SettingsContainer);




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC9zcmNfY2FsZW5kYXJfdmlld19TZXR0aW5nc0NvbnRhaW5lcl9tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQW9EO0FBQ0Q7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDJEQUFTO0FBQ3pDLHdCQUF3QjtBQUN4QjtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUSxRQUFRO0FBQ3BDO0FBQ0E7QUFDQSxpQkFBaUIsZ0NBQWdDO0FBQ2pEO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQzs7QUFFQSxnQ0FBZ0MsTUFBTTtBQUN0QyxnQ0FBZ0M7QUFDaEMsZ0NBQWdDOztBQUVoQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsaUNBQWlDLDBEQUFZO0FBQzdDOztBQUVBO0FBQ0EsOEJBQThCLDBUQUF5QztBQUN2RTtBQUNBLHlCQUF5QixnQkFBZ0I7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCOztBQUV4QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsOEJBQThCLHlTQUFzQztBQUNwRTtBQUNBLHlCQUF5QixnQkFBZ0I7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYiw4QkFBOEIsa09BQXVDO0FBQ3JFO0FBQ0EseUJBQXlCLGdCQUFnQjs7QUFFekM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLDhCQUE4Qix5U0FBc0M7QUFDcEU7QUFDQSx5QkFBeUIsZ0JBQWdCOztBQUV6QztBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0RBQWdELGVBQWU7QUFDL0Q7QUFDQTtBQUNBLDBDQUEwQywyQkFBMkI7QUFDckUscUJBQXFCO0FBQ3JCLGtCQUFrQjtBQUNsQixzQ0FBc0MsMkJBQTJCO0FBQ2pFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVzQyIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9zcmMvY2FsZW5kYXIvdmlldy9TZXR0aW5nc0NvbnRhaW5lci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbnRhaW5lciAgICBmcm9tICcuLi8uLi9jb250YWluZXIvQmFzZS5tanMnO1xuaW1wb3J0IFRhYkNvbnRhaW5lciBmcm9tICcuLi8uLi90YWIvQ29udGFpbmVyLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5jYWxlbmRhci52aWV3LlNldHRpbmdzQ29udGFpbmVyXG4gKiBAZXh0ZW5kcyBOZW8uY29udGFpbmVyLkJhc2VcbiAqL1xuY2xhc3MgU2V0dGluZ3NDb250YWluZXIgZXh0ZW5kcyBDb250YWluZXIge1xuICAgIHN0YXRpYyBnZXRDb25maWcoKSB7cmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8uY2FsZW5kYXIudmlldy5TZXR0aW5nc0NvbnRhaW5lcidcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmNhbGVuZGFyLnZpZXcuU2V0dGluZ3NDb250YWluZXInLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGNscz1bJ25lby1jYWxlbmRhci1zZXR0aW5nc2NvbnRhaW5lcicsICduZW8tY29udGFpbmVyJ11cbiAgICAgICAgICovXG4gICAgICAgIGNsczogWyduZW8tY2FsZW5kYXItc2V0dGluZ3Njb250YWluZXInLCAnbmVvLWNvbnRhaW5lciddLFxuICAgICAgICAvKipcbiAgICAgICAgICogUmVhZCBvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IGNvbGxhcHNlZD1mYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgY29sbGFwc2VkOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gbGF5b3V0PXtudHlwZTondmJveCcsYWxpZ246J3N0cmV0Y2gnfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBsYXlvdXQ6IHtudHlwZTogJ3Zib3gnLCBhbGlnbjogJ3N0cmV0Y2gnfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRydWUgdG8gb25seSBrZWVwIHRoZSBhY3RpdmUgdmlldyBpbnNpZGUgdGhlIERPTVxuICAgICAgICAgKiBAbWVtYmVyIHtCb29sZWFufSByZW1vdmVJbmFjdGl2ZUNhcmRzPXRydWVcbiAgICAgICAgICovXG4gICAgICAgIHJlbW92ZUluYWN0aXZlQ2FyZHM6IHRydWVcbiAgICB9fVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ1xuICAgICAqL1xuICAgIGNvbnN0cnVjdChjb25maWcpIHtcbiAgICAgICAgc3VwZXIuY29uc3RydWN0KGNvbmZpZyk7XG5cbiAgICAgICAgbGV0IG1lID0gdGhpcztcblxuICAgICAgICBpZiAobWUuY29sbGFwc2VkKSB7XG4gICAgICAgICAgICBtZS52ZG9tLnJlbW92ZURvbSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gd2lkdGhcbiAgICAgKi9cbiAgICBjb2xsYXBzZSh3aWR0aCkge1xuICAgICAgICBsZXQgbWUgICAgPSB0aGlzLFxuICAgICAgICAgICAgc3R5bGUgPSBtZS5zdHlsZSB8fCB7fSxcbiAgICAgICAgICAgIHZkb207XG5cbiAgICAgICAgc3R5bGUubWFyZ2luUmlnaHQgPSBgLSR7d2lkdGh9cHhgO1xuICAgICAgICBtZS5fc3R5bGUgICAgICA9IHN0eWxlOyAvLyBzaWxlbnQgdXBkYXRlXG4gICAgICAgIG1lLl92ZG9tLnN0eWxlID0gc3R5bGU7IC8vIHNpbGVudCB1cGRhdGVcblxuICAgICAgICBOZW8uZ2V0Q29tcG9uZW50KG1lLnBhcmVudElkKS5wcm9taXNlVmRvbVVwZGF0ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbWUuY29sbGFwc2VkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHZkb20gPSBtZS52ZG9tO1xuICAgICAgICAgICAgICAgIHZkb20ucmVtb3ZlRG9tID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBtZS52ZG9tID0gdmRvbTtcblxuICAgICAgICAgICAgICAgIG1lLm1vdW50ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sIDQwMCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgY3JlYXRlSXRlbXMoKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgbWUuaXRlbXMgPSBbe1xuICAgICAgICAgICAgbnR5cGUgOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgIGNscyAgIDogWyduZW8taGVhZGVyJ10sXG4gICAgICAgICAgICBoZWlnaHQ6IDQ4LFxuICAgICAgICAgICAgaHRtbCAgOiAnPGkgY2xhc3M9XCJmYSBmYS1jb2dcIj48L2k+U2V0dGluZ3MnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgICAgICA6IFRhYkNvbnRhaW5lcixcbiAgICAgICAgICAgIHJlbW92ZUluYWN0aXZlQ2FyZHM6IG1lLnJlbW92ZUluYWN0aXZlQ2FyZHMsXG5cbiAgICAgICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgICAgIG1vZHVsZTogKCkgPT4gaW1wb3J0KCcuL3NldHRpbmdzL0dlbmVyYWxDb250YWluZXIubWpzJyksXG4gICAgICAgICAgICAgICAgZmxhZyAgOiAnZ2VuZXJhbCcsXG4gICAgICAgICAgICAgICAgc3R5bGUgOiB7cGFkZGluZzogJzIwcHgnfSxcblxuICAgICAgICAgICAgICAgIHRhYkJ1dHRvbkNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnR2VuZXJhbCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbnR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgICAgIGZsYWcgOiAnZGF5JyxcbiAgICAgICAgICAgICAgICBodG1sIDogJ0RheScsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nOiAnMjBweCd9LFxuXG4gICAgICAgICAgICAgICAgdGFiQnV0dG9uQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdEYXknXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZTogKCkgPT4gaW1wb3J0KCcuL3NldHRpbmdzL1dlZWtDb250YWluZXIubWpzJyksXG4gICAgICAgICAgICAgICAgZmxhZyAgOiAnd2VlaycsXG4gICAgICAgICAgICAgICAgc3R5bGUgOiB7cGFkZGluZzogJzIwcHgnfSxcblxuICAgICAgICAgICAgICAgIHRhYkJ1dHRvbkNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnV2VlaydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlOiAoKSA9PiBpbXBvcnQoJy4vc2V0dGluZ3MvTW9udGhDb250YWluZXIubWpzJyksXG4gICAgICAgICAgICAgICAgZmxhZyAgOiAnbW9udGgnLFxuICAgICAgICAgICAgICAgIHN0eWxlIDoge3BhZGRpbmc6ICcyMHB4J30sXG5cbiAgICAgICAgICAgICAgICB0YWJCdXR0b25Db25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ01vbnRoJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBtb2R1bGU6ICgpID0+IGltcG9ydCgnLi9zZXR0aW5ncy9ZZWFyQ29udGFpbmVyLm1qcycpLFxuICAgICAgICAgICAgICAgIGZsYWcgIDogJ3llYXInLFxuICAgICAgICAgICAgICAgIHN0eWxlIDoge3BhZGRpbmc6ICcyMHB4J30sXG5cbiAgICAgICAgICAgICAgICB0YWJCdXR0b25Db25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1llYXInXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV0sXG5cbiAgICAgICAgICAgIGxpc3RlbmVyczoge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4Q2hhbmdlOiBtZS5vbkNhcmRJbmRleENoYW5nZSxcbiAgICAgICAgICAgICAgICBzY29wZSAgICAgICAgICAgIDogbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV07XG5cbiAgICAgICAgc3VwZXIuY3JlYXRlSXRlbXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIGV4cGFuZCgpIHtcbiAgICAgICAgbGV0IG1lID0gdGhpcyxcbiAgICAgICAgICAgIHN0eWxlO1xuXG4gICAgICAgIGRlbGV0ZSBtZS52ZG9tLnJlbW92ZURvbTtcblxuICAgICAgICBOZW8uZ2V0Q29tcG9uZW50KG1lLnBhcmVudElkKS5wcm9taXNlVmRvbVVwZGF0ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgbWUuY29sbGFwc2VkID0gZmFsc2U7XG4gICAgICAgICAgICBtZS5tb3VudGVkICAgPSB0cnVlO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBzdHlsZSA9IG1lLnN0eWxlIHx8IHt9XG4gICAgICAgICAgICAgICAgc3R5bGUubWFyZ2luUmlnaHQgPSAnMHB4JztcbiAgICAgICAgICAgICAgICBtZS5zdHlsZSA9IHN0eWxlO1xuICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7TmVvLmNhbGVuZGFyLnZpZXcuTWFpbkNvbnRhaW5lcn1cbiAgICAgKi9cbiAgICBnZXRNYWluQ29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cCgnY2FsZW5kYXItbWFpbmNvbnRhaW5lcicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgb25DYXJkSW5kZXhDaGFuZ2UoZGF0YSkge1xuICAgICAgICBsZXQgbWUgICAgICAgICAgICA9IHRoaXMsXG4gICAgICAgICAgICBjb250YWluZXIgICAgID0gZGF0YS5pdGVtLFxuICAgICAgICAgICAgbWFpbkNvbnRhaW5lciA9IG1lLmdldE1haW5Db250YWluZXIoKSxcbiAgICAgICAgICAgIGxpc3RlbmVySWQ7XG5cbiAgICAgICAgaWYgKG1haW5Db250YWluZXIpIHtcbiAgICAgICAgICAgIGlmIChOZW8uaXNGdW5jdGlvbihjb250YWluZXIuY3JlYXRlQ29udGVudCkgJiYgY29udGFpbmVyLml0ZW1zLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoTmVvLnR5cGVPZihtYWluQ29udGFpbmVyW2Ake2NvbnRhaW5lci5mbGFnfUNvbXBvbmVudGBdKSAhPT0gJ05lb0luc3RhbmNlJykge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcklkID0gbWFpbkNvbnRhaW5lci5vbignY2FyZExvYWRlZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5Db250YWluZXIudW4oJ2NhcmRMb2FkZWQnLCBsaXN0ZW5lcklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge2NvbnRhaW5lci5jcmVhdGVDb250ZW50KCk7fSwgMzApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtjb250YWluZXIuY3JlYXRlQ29udGVudCgpO30sIDMwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjb250YWluZXIuZmxhZyAhPT0gJ2dlbmVyYWwnKSB7XG4gICAgICAgICAgICAgICAgbWFpbkNvbnRhaW5lci5hY3RpdmVWaWV3ID0gY29udGFpbmVyLmZsYWc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbk5lby5hcHBseUNsYXNzQ29uZmlnKFNldHRpbmdzQ29udGFpbmVyKTtcblxuZXhwb3J0IHtTZXR0aW5nc0NvbnRhaW5lciBhcyBkZWZhdWx0fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==