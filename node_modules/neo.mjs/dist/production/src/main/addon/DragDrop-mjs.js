(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{15:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1);class s extends a.a{static getConfig(){return{className:"Neo.main.draggable.sensor.Base",currentElement:null,dragTargetClasses:["neo-draggable"],isDragging:!1,lastEvent:null,startEvent:null}}onConstructed(){this.attach(),super.onConstructed()}attach(){}detach(){}trigger(e,t){const n=document.createEvent("Event");return n.detail=t,n.initEvent(t.type,!0,!0),e.dispatchEvent(n),this.lastEvent=t,t}}Neo.applyClassConfig(s);class r extends s{static getConfig(){return{className:"Neo.main.draggable.sensor.Mouse",delay:200,minDistance:0,mouseDownTime:0,mouseDownTimeout:null,pageX:null,pageY:null}}constructor(e){super(e),Neo.bindMethods(this,["onDistanceChange","onMouseDown","onMouseMove","onMouseUp"])}attach(){document.addEventListener("mousedown",this.onMouseDown,!0)}detach(){document.removeEventListener("mousedown",this.onMouseDown,!0)}onDistanceChange(e){let t=this;if(t.currentElement){const{pageX:n,pageY:a}=e,s=Date.now()-t.mouseDownTime,r=o.a.getDistance(t.startEvent.pageX,t.startEvent.pageY,n,a)||0;Object.assign(t,{pageX:n,pageY:a}),s>=t.delay&&r>=t.minDistance&&(clearTimeout(t.mouseDownTimeout),document.removeEventListener("mousemove",t.onDistanceChange),t.startDrag())}}onMouseDown(e){if(0===e.button&&!e.ctrlKey&&!e.metaKey){let t=this,n=o.a.testPathInclusion(e,t.dragTargetClasses);n&&(Object.assign(t,{currentElement:n.node,mouseDownTime:Date.now(),pageX:e.pageX,pageY:e.pageY,startEvent:e}),document.addEventListener("dragstart",i),document.addEventListener("mousemove",t.onDistanceChange),document.addEventListener("mouseup",t.onMouseUp),t.mouseDownTimeout=window.setTimeout(()=>{t.onDistanceChange({pageX:t.pageX,pageY:t.pageY})},t.delay))}}onMouseMove(e){let t=this;if(t.dragging){let n=t.currentElement,a=document.elementFromPoint(e.clientX,e.clientY);t.trigger(n,{clientX:e.clientX,clientY:e.clientY,element:n,originalEvent:e,path:t.startEvent.path||t.startEvent.composedPath(),target:a,type:"drag:move"})}}onMouseUp(e){if(0===e.button){let t=this;if(clearTimeout(t.mouseDownTimeout),document.removeEventListener("dragstart",i),document.removeEventListener("mousemove",t.onDistanceChange),document.removeEventListener("mouseup",t.onMouseUp),t.dragging){let n=t.currentElement,a=document.elementFromPoint(e.clientX,e.clientY);t.trigger(n,{clientX:e.clientX,clientY:e.clientY,element:n,originalEvent:e,path:t.startEvent.path||t.startEvent.composedPath(),target:a,type:"drag:end"}),document.removeEventListener("contextmenu",i,!0),document.removeEventListener("mousemove",t.onMouseMove),Object.assign(t,{currentElement:null,dragging:!1,startEvent:null})}t.dragging=!1}}startDrag(){let e=this,t=e.currentElement,n=e.startEvent;e.trigger(t,{clientX:n.clientX,clientY:n.clientY,element:t,originalEvent:n,path:n.path||n.composedPath(),target:n.target,type:"drag:start"}),e.dragging=!0,e.dragging&&(document.addEventListener("contextmenu",i,!0),document.addEventListener("mousemove",e.onMouseMove))}}function i(e){e.preventDefault()}Neo.applyClassConfig(r);class l extends a.a{static getConfig(){return{className:"Neo.main.addon.DragDrop",dragProxyElement:null,offsetX:0,offsetY:0,remote:{app:["setDragProxyElement"]},singleton:!0}}constructor(e){super(e),this.addGlobalEventListeners();Neo.create({module:r})}addGlobalEventListeners(){let e=this;document.addEventListener("drag:end",e.onDragEnd.bind(e),!0),document.addEventListener("drag:move",e.onDragMove.bind(e),!0),document.addEventListener("drag:start",e.onDragStart.bind(e),!0)}getEventData(e){const t={...o.a.getEventData(e.detail.originalEvent),clientX:e.detail.clientX,clientY:e.detail.clientY};return t.targetPath=t.path,t.path=e.path.map(e=>o.a.getTargetData(e)),t}onDragEnd(e){this.dragProxyElement=null,o.a.sendMessageToApp({...this.getEventData(e),type:"drag:end"})}onDragMove(e){let t=this;t.dragProxyElement&&(t.dragProxyElement.style.left=e.detail.clientX-t.offsetX+"px",t.dragProxyElement.style.top=e.detail.clientY-t.offsetY+"px"),o.a.sendMessageToApp({...t.getEventData(e),type:"drag:move"})}onDragStart(e){let t=e.target.getBoundingClientRect();this.offsetX=e.detail.clientX-t.left,this.offsetY=e.detail.clientY-t.top,o.a.sendMessageToApp({...this.getEventData(e),type:"drag:start"})}setDragProxyElement(e){this.dragProxyElement=document.getElementById(e.id)}}Neo.applyClassConfig(l);let g=Neo.create(l);Neo.applyToGlobalNs(g);t.default=g}}]);