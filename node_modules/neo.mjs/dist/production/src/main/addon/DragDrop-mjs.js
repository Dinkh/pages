(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{15:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n(1);class l extends o.a{static getConfig(){return{className:"Neo.main.draggable.sensor.Base",currentElement:null,dragTargetClasses:["neo-draggable"],isDragging:!1,lastEvent:null,startEvent:null}}onConstructed(){this.attach(),super.onConstructed()}attach(){}detach(){}trigger(e,t){const n=document.createEvent("Event");return n.detail=t,n.initEvent(t.type,!0,!0),e.dispatchEvent(n),this.lastEvent=t,t}}Neo.applyClassConfig(l);class r extends l{static getConfig(){return{className:"Neo.main.draggable.sensor.Mouse",delay:200,minDistance:0,mouseDownTime:0,mouseDownTimeout:null,pageX:null,pageY:null}}constructor(e){super(e),Neo.bindMethods(this,["onDistanceChange","onMouseDown","onMouseMove","onMouseUp"])}attach(){document.addEventListener("mousedown",this.onMouseDown,!0)}detach(){document.removeEventListener("mousedown",this.onMouseDown,!0)}onDistanceChange(e){let t=this;if(t.currentElement){const{pageX:n,pageY:o}=e,l=Date.now()-t.mouseDownTime,r=a.a.getDistance(t.startEvent.pageX,t.startEvent.pageY,n,o)||0;Object.assign(t,{pageX:n,pageY:o}),l>=t.delay&&r>=t.minDistance&&(clearTimeout(t.mouseDownTimeout),document.removeEventListener("mousemove",t.onDistanceChange),t.startDrag())}}onMouseDown(e){if(0===e.button&&!e.ctrlKey&&!e.metaKey){let t=this,n=a.a.testPathInclusion(e,t.dragTargetClasses);n&&(Object.assign(t,{currentElement:n.node,mouseDownTime:Date.now(),pageX:e.pageX,pageY:e.pageY,startEvent:e}),document.addEventListener("dragstart",i),document.addEventListener("mousemove",t.onDistanceChange),document.addEventListener("mouseup",t.onMouseUp),t.mouseDownTimeout=window.setTimeout(()=>{t.onDistanceChange({pageX:t.pageX,pageY:t.pageY})},t.delay))}}onMouseMove(e){let t=this;if(t.dragging){let n=t.currentElement,o=document.elementFromPoint(e.clientX,e.clientY);t.trigger(n,{clientX:e.clientX,clientY:e.clientY,element:n,originalEvent:e,path:t.startEvent.path||t.startEvent.composedPath(),target:o,type:"drag:move"})}}onMouseUp(e){if(0===e.button){let t=this;if(clearTimeout(t.mouseDownTimeout),document.removeEventListener("dragstart",i),document.removeEventListener("mousemove",t.onDistanceChange),document.removeEventListener("mouseup",t.onMouseUp),t.dragging){let n=t.currentElement,o=document.elementFromPoint(e.clientX,e.clientY);t.trigger(n,{clientX:e.clientX,clientY:e.clientY,element:n,originalEvent:e,path:t.startEvent.path||t.startEvent.composedPath(),target:o,type:"drag:end"}),document.removeEventListener("contextmenu",i,!0),document.removeEventListener("mousemove",t.onMouseMove),Object.assign(t,{currentElement:null,dragging:!1,startEvent:null})}t.dragging=!1}}startDrag(){let e=this,t=e.currentElement,n=e.startEvent;e.trigger(t,{clientX:n.clientX,clientY:n.clientY,element:t,originalEvent:n,path:n.path||n.composedPath(),target:n.target,type:"drag:start"}),e.dragging=!0,e.dragging&&(document.addEventListener("contextmenu",i,!0),document.addEventListener("mousemove",e.onMouseMove))}}function i(e){e.preventDefault()}Neo.applyClassConfig(r);class s extends o.a{static getConfig(){return{className:"Neo.main.addon.DragDrop",boundaryContainerRect:null,dragProxyElement:null,dragProxyRect:null,clientX:0,clientY:0,initialScrollLeft:0,initialScrollTop:0,offsetX:0,offsetY:0,remote:{app:["setBoundaryContainer","setDragProxyElement","setScrollContainer","setScrollFactorLeft","setScrollFactorTop"]},scrollContainerElement:null,scrollContainerRect:null,scrollFactorLeft:1,scrollFactorTop:1,singleton:!0}}constructor(e){super(e),this.addGlobalEventListeners();Neo.create({module:r})}addGlobalEventListeners(){let e=this;document.addEventListener("drag:end",e.onDragEnd.bind(e),!0),document.addEventListener("drag:move",e.onDragMove.bind(e),!0),document.addEventListener("drag:start",e.onDragStart.bind(e),!0)}getEventData(e){const t=e.path||e.composedPath(),n={...a.a.getEventData(e.detail.originalEvent),clientX:e.detail.clientX,clientY:e.detail.clientY};return n.targetPath=n.path||n.composedPath(),n.path=t.map(e=>a.a.getTargetData(e)),n}onDragEnd(e){Object.assign(this,{boundaryContainerRect:null,dragProxyElement:null,dragProxyRect:null,initialScrollLeft:0,initialScrollTop:0,scrollContainerElement:null,scrollContainerRect:null,setScrollFactorLeft:1,scrollFactorTop:1}),a.a.sendMessageToApp({...this.getEventData(e),type:"drag:end"})}onDragMove(e){let t,n,o,l=this,r=l.dragProxyRect,i=l.boundaryContainerRect;l.scrollContainerElement&&(t=l.scrollContainer({clientX:e.detail.clientX,clientY:e.detail.clientY}),e.detail.clientX=t.clientX,e.detail.clientY=t.clientY),l.dragProxyElement?(n=e.detail.clientX-l.offsetX,o=e.detail.clientY-l.offsetY,i&&(n<i.left?n=i.left:n>i.right-r.width&&(n=i.right-r.width),o<i.top?o=i.top:o>i.bottom-r.height&&(o=i.bottom-r.height)),l.dragProxyElement.style.left=n+"px",l.dragProxyElement.style.top=o+"px"):a.a.sendMessageToApp({...l.getEventData(e),type:"drag:move"})}onDragStart(e){let t=this.dragProxyRect=e.target.getBoundingClientRect();this.offsetX=e.detail.clientX-t.left,this.offsetY=e.detail.clientY-t.top,a.a.sendMessageToApp({...this.getEventData(e),type:"drag:start"})}scrollContainer(e){let t=this,n=e.clientX-t.clientX,o=e.clientY-t.clientY,a=t.scrollContainerElement,l=t.scrollContainerRect;return t.clientX=e.clientX,t.clientY=e.clientY,(n<0&&e.clientX<l.left+250||n>0&&e.clientX>l.right-250)&&(a.scrollLeft+=n*t.scrollFactorLeft),(o<0&&e.clientY<l.top+250||o>0&&e.clientY>l.bottom-250)&&(a.scrollTop+=o*t.scrollFactorTop),{clientX:t.clientX+a.scrollLeft-t.initialScrollLeft,clientY:t.clientY+a.scrollTop-t.initialScrollTop}}setBoundaryContainer(e){let t="document.body"===e.id?document.body:document.getElementById(e.id);this.boundaryContainerRect=t.getBoundingClientRect()}setDragProxyElement(e){this.dragProxyElement=document.getElementById(e.id)}setScrollContainer(e){let t="document.body"===e.id?document.body:document.getElementById(e.id);Object.assign(this,{scrollContainerElement:t,scrollContainerRect:t.getBoundingClientRect(),initialScrollLeft:t.scrollLeft,initialScrollTop:t.scrollTop})}setScrollFactorLeft(e){this.scrollFactorLeft=e.value}setScrollFactorTop(e){this.scrollFactorTop=e.value}}Neo.applyClassConfig(s);let c=Neo.create(s);Neo.applyToGlobalNs(c);t.default=c}}]);