(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[316],{316:(e,t,n)=>{"use strict";n.r(t),n.d(t,{onStart:()=>J});var o=n(1354),a=n(7875),r=n(2680);class i extends r.Z{static getConfig(){return{className:"Neo.calendar.view.CalendarsContainer",ntype:"calendar-calendarscontainer",bind:{calendarStore:"stores.calendars"},calendarStore_:null,cls:["neo-calendar-calendarscontainer","neo-container"],itemDefaults:{module:a.Z,flex:"none",hideLabel:!0,hideValueLabel:!1},layout:{ntype:"vbox",align:"stretch"}}}afterSetCalendarStore(e,t){let n=this;t&&t.un("load",n.onCalendarStoreLoad,n),e&&e.on("load",n.onCalendarStoreLoad,n)}onCalendarStoreLoad(e){let t=this,n=[];if(!t.mounted&&t.rendering){const n=t.on("rendered",(()=>{t.un("rendered",n),t.onCalendarStoreLoad(e)}))}else e.forEach((e=>{n.push({checked:e.active,cls:["neo-checkboxfield",`neo-color-${e.color}`],fieldValue:e[t.calendarStore.keyProperty],listeners:{change:t.onCheckboxChange,scope:t},valueLabelText:e.name})})),t._items=n,t.parseItemConfigs(n),t.createItems()}onCheckboxChange(e){this.calendarStore.get(e.component.fieldValue).active=e.value}}Neo.applyClassConfig(i);var s=n(2705),l=n(6076),c=n(9132);const d=new Date;d.getDate(),d.getMonth(),d.getFullYear();class m extends c.Z{static getConfig(){return{className:"Neo.calendar.view.DayComponent",ntype:"calendar-view-daycomponent",cls:["neo-calendar-daycomponent"],currentDate_:null,eventStore_:null,html:"todo: Day View",owner:null,vdom:{},weekStartDay_:0}}}Neo.applyClassConfig(m);var h=n(3474),u=n(5062),g=n(4759);class p extends h.Z{static getConfig(){return{className:"Neo.calendar.view.EditEventContainer",ntype:"calendar-edit-event-container",cls:["neo-calendar-edit-event-container"],currentView:null,endTimeFieldConfig:null,owner:null,record_:null,startTimeFieldConfig:null,titleFieldConfig:null}}constructor(e){super(e),this.vdom.tabIndex=-1}afterSetMounted(e,t){super.afterSetMounted(e,t),e&&this.getField("title").focus()}afterSetRecord(e,t){if(e&&t){let t=this,n=t.owner.intlFormat_time;t.getField("endTime").minValue=t.getEndTimeMinValue(e),t.getField("startTime").maxValue=t.getStartTimeMaxValue(e),t.reset({endTime:n.format(e.endDate),startTime:n.format(e.startDate),title:e.title})}else e&&this.createItems()}createItems(){let e=this,t=e.owner,n=e.record,o={module:g.Z,clearToOriginalValue:!0,flex:"none",labelPosition:"inline",listeners:{change:e.onTimeFieldChange,scope:e},stepSize:900,width:"9em"};n&&(e.items=[{module:u.Z,clearToOriginalValue:!0,flex:"none",labelPosition:"inline",labelText:"Event Title",listeners:{change:e.onTitleFieldChange,scope:e},name:"title",required:!0,value:n.title,...e.titleFieldConfig},{labelText:"Start Time",maxValue:e.getStartTimeMaxValue(n),minValue:t.startTime,name:"startTime",value:t.intlFormat_time.format(n.startDate),...o,...e.startTimeFieldConfig},{labelText:"End Time",maxValue:t.endTime,minValue:e.getEndTimeMinValue(n),name:"endTime",value:t.intlFormat_time.format(n.endDate),...o,...e.endTimeFieldConfig}],super.createItems())}getEndTimeMinValue(e){let t=new Date(e.startDate.valueOf());return t.setMinutes(t.getMinutes()+this.owner.minimumEventDuration),this.owner.intlFormat_time.format(t)}getStartTimeMaxValue(e){let t=new Date(e.endDate.valueOf());return t.setMinutes(t.getMinutes()-this.owner.minimumEventDuration),this.owner.intlFormat_time.format(t)}onFocusLeave(e){setTimeout((()=>{this.unmount()}),100)}onTimeFieldChange(e){let t=this,n=e.component.name,o=t.record,a=t.record["endTime"===n?"endDate":"startDate"],r=e.value.split(":").map((e=>Number(e)));a.setHours(r[0]),a.setMinutes(r[1]),t.currentView.updateEvents(),"endTime"===n?t.getField("startTime").maxValue=t.getStartTimeMaxValue(o):t.getField("endTime").minValue=t.getEndTimeMinValue(o)}onTitleFieldChange(e){Neo.isEmpty(e.value)||(this.record.title=e.value,this.currentView.updateEvents())}}Neo.applyClassConfig(p);var f=n(231);class v extends f.Z{static getConfig(){return{className:"Neo.calendar.model.Calendar",fields:[{name:"active",type:"Boolean"},{name:"color",type:"String"},{name:"id",type:"Integer"},{name:"name",type:"String"}]}}}Neo.applyClassConfig(v);var y=n(7816);class C extends y.Z{static getConfig(){return{className:"Neo.calendar.store.Calendars",keyProperty:"id",model:v,sorters:[{property:"name",direction:"ASC"}]}}}Neo.applyClassConfig(C);class D extends f.Z{static getConfig(){return{className:"Neo.calendar.model.Event",fields:[{name:"attendees",type:"Array"},{name:"allDay",type:"Boolean"},{name:"id",type:"Integer"},{name:"calendarId",type:"String"},{name:"description",type:"String"},{name:"endDate",type:"Date"},{name:"startDate",type:"Date"},{name:"title",type:"String"}]}}}Neo.applyClassConfig(D);class w extends y.Z{static getConfig(){return{className:"Neo.calendar.store.Events",keyProperty:"id",model:D,sorters:[{property:"startDate",direction:"ASC"}]}}getDayRecords(e){let t,n=this,o=[],a=0,r=n.getCount();for(;a<r;a++)t=n.items[a],l.Z.matchDate(e,t.startDate)&&l.Z.matchDate(e,t.endDate)&&o.push(t);return o}}Neo.applyClassConfig(w);var S=n(1645);const k=new Date;class N extends S.Z{static getConfig(){return{className:"Neo.calendar.view.MainContainerModel",data:{currentDate:k,endTime:"24:00",events:{border:"left",enableDrag:!0,enableEdit:!0,enableResizingAcrossOppositeEdge:!0},scrollNewYearFromTop:!1,startTime:"00:00"}}}constructor(e){super(e);let t=this.component;this.stores={calendars:{module:C,...t.calendarStoreConfig},events:{module:w,...t.eventStoreConfig}}}}Neo.applyClassConfig(N);var b=n(3501),x=n(524);const _=new Date;_.getDate(),_.getMonth(),_.getFullYear();class E extends c.Z{static getConfig(){return{className:"Neo.calendar.view.month.Component",ntype:"calendar-view-monthcomponent",bind:{calendarStore:"stores.calendars",currentDate:e=>e.currentDate,eventBorder:e=>e.events.border,eventStore:"stores.events"},calendarStore_:null,cls:["neo-calendar-monthcomponent"],currentDate_:null,dayNameFormat_:"short",eventBorder_:null,eventStore_:null,headerHeight:null,intlFormat_day:null,intlFormat_month:null,intlFormat_time:null,isScrolling:!1,locale_:Neo.config.locale,monthNameFormat_:"short",owner:null,scrollTaskId:null,showWeekends_:!0,timeFormat_:{hour:"2-digit",minute:"2-digit"},useScrollBoxShadows_:!0,vdom:{cn:[{cls:["neo-days-header"],cn:[{cls:["neo-static-header"],style:{},cn:[{tag:"span",cls:["neo-month-name"],flag:"month-name"},{vtype:"text"}]}]},{cls:["neo-c-m-scrollcontainer"]}]},weekStartDay_:0}}constructor(e){super(e);let t=this,n=t.domListeners;n.push({dblclick:t.onEventDoubleClick,delegate:"neo-event",scope:t},{wheel:t.onWheel,scope:t}),t.domListeners=n,t.updateHeader(!0)}afterSetCalendarStore(e,t){let n=this;t&&t.un({load:n.onCalendarStoreLoad,recordChange:n.onCalendarStoreRecordChange,scope:n}),e&&e.on({load:n.onCalendarStoreLoad,recordChange:n.onCalendarStoreRecordChange,scope:n})}afterSetCurrentDate(e,t){if(void 0!==t){let e=this;e.createContent(!0),e.updateHeader(),e.afterSetMounted(!0,!1)}}afterSetDayNameFormat(e,t){let n=this;n.intlFormat_day=new Intl.DateTimeFormat(n.locale,{weekday:e}),void 0!==t&&n.updateHeader()}afterSetEventBorder(e,t){let n=this.cls;t&&b.Z.remove(n,`neo-event-border-${t}`),e&&b.Z.add(n,`neo-event-border-${e}`),this.cls=n}afterSetEventStore(e,t){let n=this;t&&t.un("load",n.onEventStoreLoad,n),e&&e.on("load",n.onEventStoreLoad,n)}afterSetLocale(e,t){if(void 0!==t){let t=this;t.intlFormat_day=new Intl.DateTimeFormat(e,{weekday:t.dayNameFormat}),t.intlFormat_month=new Intl.DateTimeFormat(e,{month:t.monthNameFormat}),t.intlFormat_time=new Intl.DateTimeFormat(e,t.timeFormat),t.updateMonthNames(!0),t.updateHeader()}}afterSetMonthNameFormat(e,t){let n=this;n.intlFormat_month=new Intl.DateTimeFormat(n.locale,{month:e}),void 0!==t&&n.updateMonthNames()}afterSetMounted(e,t){e&&setTimeout((()=>{let e=this;Neo.main.DomAccess.getBoundingClientRect({id:[e.vdom.cn[1].id,e.vdom.cn[0].id]}).then((t=>{e.headerHeight=t[1].height,Neo.main.DomAccess.scrollTo({direction:"top",id:e.vdom.cn[1].id,value:t[0].height-t[1].height})}))}),20)}afterSetShowWeekends(e,t){if(void 0!==t){let t,n,o=this;o.vdom.cn[1].cn.forEach((o=>{if(o.flag)for(t=0;t<7;t++)n=o.cn[t],n.cls.includes("neo-weekend")&&(e?delete n.removeDom:n.removeDom=!0)})),o.updateHeader()}}afterSetTimeFormat(e,t){this.intlFormat_time=new Intl.DateTimeFormat(this.locale,e)}afterSetUseScrollBoxShadows(e,t){let n=this,o=n.vdom;b.Z[e?"add":"remove"](n.vdom.cn[1].cls,"neo-scroll-shadows"),n.vdom=o}afterSetWeekStartDay(e,t){void 0!==t&&(this.createContent(!0),this.updateHeader())}beforeSetDayNameFormat(e,t){return this.beforeSetEnumValue(e,t,"dayNameFormat",l.Z.prototype.dayNameFormats)}beforeSetMonthNameFormat(e,t){return this.beforeSetEnumValue(e,t,"monthNameFormat",l.Z.prototype.monthNameFormats)}createContent(e=!1){let t,n,o=this,a=o.currentDate,r=o.vdom,i=0;for(r.cn[1].cn=[],t=l.Z.getFirstDayOffset(a,o.weekStartDay),a.setDate(1-t),a.setDate(a.getDate()-42);i<18;i++)n=o.createWeek(l.Z.clone(a)),n.header&&r.cn[1].cn.push(n.header),r.cn[1].cn.push(n.row),a.setDate(a.getDate()+7);o[e?"_vdom":"vdom"]=r}createWeek(e){let t,n,o,a,r,i,s,c=this,d=0,m=c.calendarStore,h=c.eventStore,u=null,g=l.Z.convertToyyyymmdd(e);for(i={flag:g,cls:["neo-week"],cn:[],id:`${c.id}__week__${g}`};d<7;d++)n=e.getDate(),g=l.Z.convertToyyyymmdd(e),1===n&&(i.flag=g,u={cls:["neo-month-header"],cn:[{cls:["neo-month-header-content"],cn:[{tag:"span",cls:["neo-month-name"],flag:"month-name",html:c.intlFormat_month.format(e)},{vtype:"text",html:` ${e.getFullYear()}`}]}]}),o={cls:["neo-day"],id:`${c.id}__day__${g}`,cn:[{cls:["neo-day-number"],html:n,id:`${c.id}__day_number__${g}`}]},s=e.getDay(),0!==s&&6!==s||(o.cls.push("neo-weekend"),c.showWeekends||(o.removeDom=!0)),o.removeDom||(a=h.getDayRecords(e),a.forEach((e=>{r=e[h.keyProperty],t=m.get(e.calendarId),t.active&&o.cn.push({cls:["neo-event",`neo-${t.color}`],flag:r,id:c.id+"__"+r,tabIndex:-1,cn:[{cls:["neo-event-title"],html:e.title,id:c.id+"__title__"+r},{cls:["neo-event-time"],html:c.intlFormat_time.format(e.startDate),id:c.id+"__time__"+r}]})}))),i.cn.push(o),e.setDate(e.getDate()+1);return{header:u,row:i}}onCalendarStoreLoad(e){this.eventStore.getCount()>0&&this.createContent()}onCalendarStoreRecordChange(e){this.createContent()}onEventDoubleClick(e){if(this.data.events.enableEdit){let t=this,n=t.owner.editEventContainer,o=e.path[0],a=e.path[2],r=e.path[3],i=x.Z.findVdomChild(t.vdom,o.id).vdom,s=t.eventStore.get(i.flag),l=n.style;Object.assign(l,{left:o.rect.right-a.rect.left+15+"px",top:o.rect.top-r.rect.top+r.scrollTop-12+"px"}),n.setSilent({currentView:t,parentId:e.path[1].id,record:s,style:l}),n.render(!0)}}onEventStoreLoad(e){this.calendarStore.getCount()>0&&this.createContent()}onFocusChange(e){let t=e.oldPath,n=e.path;t&&t[0].cls&&t[0].cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:t[0].id,cls:{remove:["neo-focus"]}}),n&&n[0].cls&&n[0].cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:n[0].id,cls:{add:["neo-focus"]}})}onWheel(e){if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){let t,n,o,a=this,r=a.vdom,i=r.cn[1],s=0;if(e.deltaY>0&&Math.round(e.scrollTop/(e.clientHeight-a.headerHeight)*6)>11){for(t=new Date(i.cn[i.cn.length-1].flag),t.setDate(t.getDate()-(t.getDay()-a.weekStartDay));s<6;s++)i.cn[1].cls.includes("neo-month-header")&&i.cn.splice(1,1),i.cn.shift(),t.setDate(t.getDate()+7),o=a.createWeek(l.Z.clone(t)),o.header&&i.cn.push(o.header),i.cn.push(o.row);a.vdom=r}else if(e.deltaY<0&&Math.round(e.scrollTop/(e.clientHeight-a.headerHeight)*6)<1){for(t=i.cn[0].flag?new Date(i.cn[0].flag):new Date(i.cn[1].flag),t.setDate(t.getDate()-(t.getDay()-a.weekStartDay));s<6;s++)n=i.cn.length,i.cn[n-2].cls.includes("neo-month-header")&&i.cn.splice(n-2,1),i.cn.pop(),t.setDate(t.getDate()-7),o=a.createWeek(l.Z.clone(t)),i.cn.unshift(o.row),o.header&&i.cn.unshift(o.header);a.promiseVdomUpdate(a.vdom).then((()=>{Neo.main.DomAccess.scrollTo({direction:"top",id:a.vdom.cn[1].id,value:e.clientHeight-a.headerHeight})}))}a.isScrolling||(a.isScrolling=!0,b.Z.add(a.vdom.cn[1].cls,"neo-is-scrolling"),a.vdom.cn[0].cn[0].style.opacity=0,a.vdom=r),a.scrollTaskId&&clearTimeout(a.scrollTaskId),a.scrollTaskId=setTimeout(a.onWheelEnd.bind(a),300)}}onWheelEnd(){let e,t,n=this,o=n.vdom,a=o.cn[0].cn[0],r=6;for(n.isScrolling=!1;r<12;r++)if(t=o.cn[1].cn[r].flag,t){e=new Date(t),e.setMonth(e.getMonth()+1),a.cn[0].html=n.intlFormat_month.format(e),a.cn[1].html=` ${e.getFullYear()}`;break}b.Z.remove(o.cn[1].cls,"neo-is-scrolling"),a.style.opacity=1,n.vdom=o}updateEvents(){this.createContent()}updateHeader(e=!1){let t,n,o=this,a=o.currentDate,r=o.vdom,i=r.cn[0].cn[0],s=1;for(i.cn[0].html=o.intlFormat_month.format(a),i.cn[1].html=` ${a.getFullYear()}`,a.setDate(o.currentDate.getDate()-o.currentDate.getDay()+o.weekStartDay);s<8;s++)t=a.getDay(),e?(n={cls:["neo-day-name"],html:o.intlFormat_day.format(a)},o.showWeekends||0!==t&&6!==t||(n.removeDom=!0),r.cn[0].cn.push(n)):(n=r.cn[0].cn[s],n.html=o.intlFormat_day.format(a),o.showWeekends||0!==t&&6!==t?delete n.removeDom:n.removeDom=!0),a.setDate(a.getDate()+1);o.vdom=r}updateMonthNames(e=!1){let t=this,n=t.currentDate,o=t.vdom;x.Z.getFlags(o,"month-name").forEach((e=>{e.html=t.intlFormat_month.format(n),n.setMonth(n.getMonth()+1)})),t[e?"_vdom":"vdom"]=o}}Neo.applyClassConfig(E);var T=n(4959),F=n(1735),I=n(8192);class M extends I.default{static getConfig(){return{className:"Neo.calendar.view.week.EventDragZone",ntype:"calendar-week-event-dragzone",addDragProxyCls:!1,enableResizingAcrossOppositeEdge:!0,axisEndTime:0,axisStartTime:0,columnHeight:0,columnTop:0,currentInterval:0,eventDuration:0,eventRecord:null,forceUpdate:!1,hasOverflow:!1,intervalSize:15,keepEndDate:!1,keepStartDate:!1,moveHorizontal:!1,moveInMainThread:!1,newEndDate:null,newStartDate:null,scrollFactorLeft:3,useProxyWrapper:!1}}addBodyCursorCls(){Neo.applyDeltas(this.appName,{id:"document.body",cls:{add:["neo-cursor-move"]}})}adjustEndDate(e){return 0===e.getHours()&&0===e.getMinutes()?e.setMinutes(e.getMinutes()-1):23===e.getHours()&&59===e.getMinutes()||e.getMinutes()%this.intervalSize==0||e.setMinutes(e.getMinutes()+1),e}afterSetProxyParentId(e,t){if(e&&void 0!==t){let t=this;t.dragProxy&&t.dragProxy.vdom.cn[0].id&&Neo.applyDeltas(t.appName,{action:"moveNode",id:t.dragProxy.id,index:0,parentId:e})}}createDragProxy(e){let t=this,n=Neo.getComponent(t.getDragElementRoot().id)||t.owner,o=t.dragProxyConfig&&t.dragProxyConfig.vdom,a=x.Z.clone(o||t.dragElement);a.cn[2].removeDom=!1;const r={module:F.Z,appName:t.appName,moveInMainThread:t.moveInMainThread,parentId:t.proxyParentId,...t.dragProxyConfig,vdom:t.useProxyWrapper?{cn:[a]}:a};r.cls=r.cls||[],r.cls.push("neo-focus"),n&&r.cls.push(n.getTheme()),a.cls&&!t.useProxyWrapper&&r.cls.push(...a.cls),t.addDragProxyCls&&b.Z.add(r.cls,t.dragProxyCls),Object.assign(r.style,{height:`${e.height}px`,top:e.y-t.columnTop+"px",width:`${e.width}px`}),t.dragProxy=Neo.create(r)}dragEnd(e){super.dragEnd(e);let t,n,o=this,a=o.owner,r=o.eventRecord;o.keepStartDate?(t=o.newEndDate,n=o.newStartDate||r.startDate):(n=new Date(x.Z.findVdomChild(a.vdom,o.proxyParentId).vdom.flag+" 00:00:00"),n.setHours(o.axisStartTime),n.setMinutes(o.currentInterval*o.intervalSize),o.keepEndDate?(t=o.newEndDate||r.endDate,n=o.newStartDate||n):(t=l.Z.clone(n),t.setMinutes(t.getMinutes()+o.eventDuration))),t=o.adjustEndDate(t),r.endDate=t,r.startDate=n,Object.assign(o,{hasOverflow:!1,keepEndDate:!1,keepStartDate:!1,newEndDate:null,newStartDate:null,proxyParentId:null}),a.getModel().getStore("events").doSort(),a.updateEvents()}dragMove(e){let t,n,o,a,r,i,s,c,d,m,h,u,g,p,f,v=this,y=v.axisEndTime,C=v.axisStartTime,D=v.columnHeight,w=v.eventDuration,S=0,k=v.intervalSize,N=v.keepEndDate,b=v.keepStartDate,x=e.targetPath,_=x.length,E=v.owner,T=v.eventRecord,F=!1,I=E.timeAxis;if(v.dragProxy){if(!N&&!b)for(;S<_;S++)if(x[S].cls.includes("neo-c-w-column")){v.proxyParentId=x[S].id;break}if(m=60*(y-C)/k,d=D/m,g=Math.min(D,e.clientY-v.offsetY-v.columnTop),n=Math.floor(g/d),r=l.Z.clone(T.endDate),p=l.Z.clone(T.startDate),N&&C>p.getHours()&&(p.setHours(C),p.setMinutes(0),w=(r-p)/60/1e3),b&&y<r.getHours()&&(r.setHours(y),r.setMinutes(0),w=(r-p)/60/1e3),N||(n=Math.min(n,m-w/k)),o=[{id:v.dragProxy.id,style:{}}],N||b)if(t=l.Z.clone(T.startDate),t.setHours(C),t.setMinutes(0),u=E.minimumEventDuration/k,f=(T.startDate-t)/k/60/1e3,N){if(h=f+w/k,v.enableResizingAcrossOppositeEdge){if(v.forceUpdate&&n>h-u&&n<h+u)return;n>=h+u?(F=!0,v.forceUpdate=!0,r.setHours(C),r.setMinutes(n*k),r=v.adjustEndDate(r),v.newEndDate=r,p.setHours(C),p.setMinutes(h*k),v.newStartDate=p,a=(r-p)/60/60/1e3,o[0].style.top=`calc(${h*d/D*100}% + 1px)`):(v.forceUpdate=!1,v.newStartDate=null)}F||(n=Math.min(n,h-u))}else if(b){if(h=f-w/k,v.enableResizingAcrossOppositeEdge)if(n=Math.max(-w/k,n),n<=h-u)F=!0,v.forceUpdate=!0,r.setHours(C),r.setMinutes(w+h*k),r=v.adjustEndDate(r),v.newEndDate=r,p.setHours(C),p.setMinutes(w+n*k),v.newStartDate=p,a=(r-p)/60/60/1e3,g=(w/k+n)*d,g=g/D*100,o[0].style.top=`calc(${g}% + 1px)`;else{if(v.forceUpdate&&n<h+u)return;v.forceUpdate&&n>=h+u&&v.currentInterval!==n&&(v.forceUpdate=!1,v.newStartDate=null,o[0].style.top=`calc(${f*d/D*100}% + 1px)`)}F||(n=Math.max(n,h+u))}b||(n=Math.max(0,n)),v.currentInterval!==n&&(F||(N||(r.setHours(C),r.setMinutes(w+n*k)),b?(v.newEndDate=r,a=(r-T.startDate)/60/60/1e3):(p.setHours(C),p.setMinutes(n*k),g=n*d,g=g/D*100,o[0].style.top=`calc(${g}% + 1px)`),N&&(a=(T.endDate-p)/60/60/1e3)),r=v.adjustEndDate(r),o.push({id:v.dragProxy.vdom.cn[2].id,innerHTML:E.intlFormat_time.format(r)}),(N||b)&&(c=Math.round(a/(y-C)*100*1e3)/1e3,o[0].style.height=`calc(${c}% - 2px)`),o.push({id:v.dragProxy.vdom.cn[0].id,innerHTML:E.intlFormat_time.format(p)}),v.dragProxy.vdom.cn[0].id&&(i=(a&&60*a||w)/I.interval,i<=2?(s=I.rowHeight/i<25,s&&(v.hasOverflow||(o.push({id:v.dragProxy.id,cls:{add:["neo-overflow"]}}),v.hasOverflow=!0))):v.hasOverflow&&(o.push({id:v.dragProxy.id,cls:{remove:["neo-overflow"]}}),v.hasOverflow=!1),Neo.applyDeltas(v.appName,o))),v.currentInterval=n}}dragStart(e){let t,n,o,a=this;Neo.main.DomAccess.getBoundingClientRect({id:[a.getDragElementRoot().id,e.path[1].id]}).then((r=>{t=(a.eventRecord.endDate-a.eventRecord.startDate)/60/1e3,n=e.clientX-r[0].left,o=e.clientY-r[0].top,Object.assign(a,{columnHeight:r[1].height,columnTop:r[1].top,dragElementRect:r[0],eventDuration:Math.round(t/a.intervalSize)*a.intervalSize,offsetX:n,offsetY:o}),a.createDragProxy(r[0]),a.fire("dragStart",{dragElementRect:r[0],id:a.id,offsetX:n,offsetY:o}),a.dragMove(e)}))}removeBodyCursorCls(){Neo.applyDeltas(this.appName,{id:"document.body",cls:{remove:["neo-cursor-move"]}})}}Neo.applyClassConfig(M);var Z=n(2430);class P extends Z.default{static getConfig(){return{className:"Neo.calendar.view.week.EventResizable"}}onDragEnd(e){let t=this;t.isDragging=!1,t.removeBodyCursorCls(),t.removeAllNodes()}onDragMove(e){}onDragStart(e){let t=this;t.isDragging=!0,t.addBodyCursorCls(),t.owner.eventDragZone["top"===t.currentNodeName?"keepEndDate":"keepStartDate"]=!0}onMouseMove(e){this.owner.data.events.enableDrag&&super.onMouseMove(e)}}Neo.applyClassConfig(P);class H extends c.Z{static getStaticConfig(){return{intervals:[15,30,60]}}static getConfig(){return{className:"Neo.calendar.view.week.TimeAxisComponent",ntype:"calendar-timeaxis",bind:{endTime:e=>e.endTime,startTime:e=>e.startTime},cls:["neo-calendar-timeaxis"],endTime_:"24:00",interval_:30,rowHeight_:20,startTime_:"00:00",vdom:{style:{}}}}constructor(e){super(e);let t=this;t.createItems(),t.afterSetRowHeight(t.rowHeight,0)}afterSetEndTime(e,t){if(void 0!==t){let t=this;e||(t._endTime="24:00"),t.afterSetRowHeight(t.rowHeight,0)}}afterSetInterval(e,t){void 0!==t&&this.afterSetRowHeight(this.rowHeight,0)}afterSetRowHeight(e,t){if(void 0!==t&&this.vdom.cn){let e,t,n=this,o=n.getTime(n.endTime),a=n.getTime(n.startTime),r=n.vdom,i=n.rowHeight,s=n.getRowsPerItem(),l=s*i+s,c=i+(o-a)*l;for(Object.assign(r.style,{backgroundImage:`linear-gradient(var(--c-w-background-color) ${l-1}px, var(--c-w-border-color) 1px)`,backgroundPositionY:1-l+"px",backgroundSize:`0.4em ${l}px`,height:c-i+1+"px",maxHeight:c-i+1+"px"}),e=0;e<25;e++)t={height:`${l}px`},e===a?t.marginTop=-2-i*(1===s?.5:2===s?1:2)+"px":delete t.marginTop,r.cn[e].style=t,r.cn[e].removeDom=e<a||e-1>=o;n._vdom=r,n.fire("change",{component:n,rowHeight:i,rowsPerItem:s,totalHeight:c})}}afterSetStartTime(e,t){void 0!==t&&this.afterSetRowHeight(this.rowHeight,0)}beforeSetInterval(e,t){return this.beforeSetEnumValue(e,t,"interval")}createItems(){let e,t,n=this.vdom;for(n.cn=[],t=0;t<25;t++)e=24===t?"00:00":(t<10?"0":"")+t+":00",n.cn.push({cls:["neo-c-w-timeaxis-item"],cn:[{html:e}]})}getRowsPerItem(){return 60===this.interval?1:30===this.interval?2:4}getTime(e){return e.split(":").map(Number)[0]}}Neo.applyClassConfig(H);const V=new Date,L=V.getDate(),R=V.getMonth(),B=V.getFullYear();class O extends c.Z{static getStaticConfig(){return{timeAxisPositions:["end","start"]}}static getConfig(){return{className:"Neo.calendar.view.week.Component",ntype:"calendar-view-weekcomponent",bind:{calendarStore:"stores.calendars",currentDate:e=>e.currentDate,eventBorder:e=>e.events.border,eventStore:"stores.events"},calendarStore_:null,cls:["neo-calendar-weekcomponent"],currentDate_:null,dayNameFormat_:"short",eventBorder_:null,eventDragZone:null,eventStore_:null,firstColumnDate:null,headerCreated:!1,intlFormat_day:null,intlFormat_time:null,isDragging:!1,isUpdating:!1,locale_:Neo.config.locale,minimumEventDuration:30,owner:null,resizablePluginConfig:null,showEventEndTime_:!1,timeAxis:null,timeAxisConfig:null,timeAxisPosition_:"start",timeFormat_:{hour:"2-digit",minute:"2-digit"},vdom:{cn:[{cls:["neo-scroll-overlay"]},{cls:["neo-c-w-scrollcontainer"],flag:"neo-c-w-scrollcontainer",cn:[{cls:["neo-header-row"],flag:"neo-header-row",cn:[]},{cls:["neo-c-w-column-timeaxis-container"],flag:"neo-c-w-column-timeaxis-container",cn:[{cls:["neo-c-w-column-container"],flag:"neo-c-w-column-container",style:{},cn:[]}]}]}]},weekStartDay_:0}}constructor(e){super(e);let t=this,n=t.domListeners,o={scope:t,delegate:".neo-c-w-column"},a={scope:t,delegate:".neo-event"},r=t.plugins||[];n.push({dblclick:t.onEventDoubleClick,...a},{"drag:end":t.onColumnDragEnd,...o},{"drag:end":t.onEventDragEnd,...a},{"drag:move":t.onColumnDragMove,...o},{"drag:move":t.onEventDragMove,...a},{"drag:start":t.onColumnDragStart,...o},{"drag:start":t.onEventDragStart,...a},{wheel:t.onWheel,scope:t}),t.domListeners=n,r.push({module:P,appName:t.appName,delegationCls:"neo-event",directions:["b","t"],flag:"resizable",...t.resizablePluginConfig}),t.plugins=r,t.timeAxis=Neo.create(H,{appName:t.appName,parentId:t.id,listeners:{change:t.onTimeAxisChange,scope:t},...t.timeAxisConfig}),t.getColumnTimeAxisContainer().cn["start"===t.timeAxisPosition?"unshift":"push"](t.timeAxis.vdom),t.updateHeader(!0),t.headerCreated=!0}adjustResizeEvent(e){return e.path.shift(),e.targetPath.shift(),e.target=e.path[0],e}adjustTotalHeight(e,t=!1){let n=this,o=e.rowHeight,a=e.rowsPerItem,r=e.totalHeight-o,i=n.vdom,s=0,l=[];for(;s<a;s++)l.push(`var(--c-w-background-color) ${s*o+s}px`,`var(--c-w-background-color) ${(s+1)*o+s}px`,"var(--c-w-border-color) 0");Object.assign(n.getColumnContainer().style,{backgroundImage:`linear-gradient(${l.join(",")})`,backgroundSize:`1px ${a*o+a}px`,height:`${r}px`,maxHeight:`${r}px`}),n[t?"_vdom":"vdom"]=i}afterSetCalendarStore(e,t){let n=this;t&&t.un({load:n.onCalendarStoreLoad,recordChange:n.onCalendarStoreRecordChange,scope:n}),e&&e.on({load:n.onCalendarStoreLoad,recordChange:n.onCalendarStoreRecordChange,scope:n})}afterSetCurrentDate(e,t){void 0!==t&&(this.updateHeader(!1,!0),this.updateEvents())}afterSetDayNameFormat(e,t){let n=this;n.intlFormat_day=new Intl.DateTimeFormat(n.locale,{weekday:e}),void 0!==t&&n.updateHeader()}afterSetEventBorder(e,t){let n=this.cls;t&&b.Z.remove(n,`neo-event-border-${t}`),e&&b.Z.add(n,`neo-event-border-${e}`),this.cls=n}afterSetEventStore(e,t){let n=this;t&&t.un("load",n.onEventStoreLoad,n),e&&e.on("load",n.onEventStoreLoad,n)}afterSetLocale(e,t){if(void 0!==t){let t=this;t.intlFormat_day=new Intl.DateTimeFormat(e,{weekday:t.dayNameFormat}),t.intlFormat_time=new Intl.DateTimeFormat(e,t.timeFormat),t.updateHeader()}}afterSetMounted(e,t){super.afterSetMounted(e,t),e&&setTimeout((()=>{let e=this;Neo.main.DomAccess.getBoundingClientRect({id:e.getColumnContainer().id}).then((t=>{Neo.main.DomAccess.scrollBy({direction:"left",id:e.getScrollContainer().id,value:t.width/3})}))}),20)}afterSetShowEventEndTime(e,t){void 0!==t&&this.updateEvents()}afterSetTimeAxisPosition(e,t){let n=this,o=n.cls,a=n.vdom,r=n.getColumnTimeAxisContainer();b.Z["end"===e?"add":"remove"](o,"neo-timeaxis-end"),void 0!==t&&r.cn.unshift(r.cn.pop()),n._cls=o,n.vdom=a}afterSetTimeFormat(e,t){this.intlFormat_time=new Intl.DateTimeFormat(this.locale,e)}afterSetWeekStartDay(e,t){void 0!==t&&(this.updateHeader(!1,!0),this.updateEvents())}beforeSetDayNameFormat(e,t){return this.beforeSetEnumValue(e,t,"dayNameFormat",l.Z.prototype.dayNameFormats)}beforeSetTimeAxisPosition(e,t){return this.beforeSetEnumValue(e,t,"timeAxisPosition")}beforeSetWeekStartDay(e,t){return this.beforeSetEnumValue(e,t,"weekStartDay",l.Z.prototype.weekStartDays)}createColumnAndHeader(e){let t,n,o=["neo-c-w-column","neo-draggable"],a=e.getDate(),r=e.getDay(),i=["neo-date"];return 0===r||6===r?o.push("neo-weekend"):b.Z.remove(o,"neo-weekend"),a===L&&e.getMonth()===R&&e.getFullYear()===B&&i.push("neo-today"),t={cls:o,flag:l.Z.convertToyyyymmdd(e)},n={cls:["neo-header-row-item"],cn:[{cls:["neo-day"],html:this.intlFormat_day.format(e)},{cls:i,html:a}]},{column:t,header:n}}destroy(...e){this.timeAxis=null,super.destroy(...e)}getColumnContainer(){return x.Z.getByFlag(this.vdom,"neo-c-w-column-container")}getColumnId(e){return`${this.id}_col_${l.Z.convertToyyyymmdd(e)}`}getColumnHeaderId(e){return`${this.id}_ch_${l.Z.convertToyyyymmdd(e)}`}getColumnTimeAxisContainer(){return x.Z.getByFlag(this.vdom,"neo-c-w-column-timeaxis-container")}getHeaderContainer(){return x.Z.getByFlag(this.vdom,"neo-header-row")}getIdKey(){return"c-w"}getScrollContainer(){return x.Z.getByFlag(this.vdom,"neo-c-w-scrollcontainer")}isTopLevelColumn(e){return e.path[0].cls.includes("neo-c-w-column")}isTopLevelEvent(e){return e.path[0].cls.includes("neo-event")}onCalendarStoreLoad(e){this.eventStore.getCount()>0&&this.updateEvents()}onCalendarStoreRecordChange(e){this.updateEvents()}onColumnDragEnd(e){this.isTopLevelColumn(e)&&console.log("onColumnDragEnd",e)}onColumnDragMove(e){this.isTopLevelColumn(e)&&console.log("onColumnDragMove",e)}onColumnDragStart(e){this.isTopLevelColumn(e)&&console.log("onColumnDragStart",e)}onEventDoubleClick(e){if(this.data.events.enableEdit){e.path[0].cls.includes("neo-event")||e.path.shift();let t=this,n=t.owner.editEventContainer,o=e.path[0],a=x.Z.findVdomChild(t.vdom,o.id).vdom,r=t.eventStore.get(a.flag),i=n.style;Object.assign(i,{left:`${o.rect.width+15}px`,top:a.style.top}),n.setSilent({currentView:t,parentId:e.path[1].id,record:r,style:i}),n.render(!0)}}onEventDragEnd(e){if(this.data.events.enableDrag){let t=this;t.eventDragZone.dragEnd(),t.isTopLevelEvent(e)?t.eventDragZone.removeBodyCursorCls():(e=t.adjustResizeEvent(e),t.getPlugin({flag:"resizable"}).onDragEnd(e)),t.isDragging=!1}}onEventDragMove(e){if(this.data.events.enableDrag){let t=this;t.isTopLevelEvent(e)||(e=t.adjustResizeEvent(e)),t.eventDragZone.dragMove(e)}}onEventDragStart(e){if(this.data.events.enableDrag){let t,n,o=this,a=o.eventDragZone,r=o.isTopLevelEvent(e);r||(e=o.adjustResizeEvent(e)),t=x.Z.findVdomChild(o.vdom,e.path[0].id).vdom,n=o.timeAxis,o.isDragging=!0;const i={axisEndTime:n.getTime(n.endTime),axisStartTime:n.getTime(n.startTime),dragElement:t,enableResizingAcrossOppositeEdge:o.data.events.enableResizingAcrossOppositeEdge,eventRecord:o.eventStore.get(t.flag),proxyParentId:e.path[1].id};a?a.set(i):o.eventDragZone=a=Neo.create({module:M,appName:o.appName,owner:o,scrollContainerId:o.getScrollContainer().id,...i,dragProxyConfig:{style:{transition:"none",willChange:"height"}}}),r?a.addBodyCursorCls():o.getPlugin({flag:"resizable"}).onDragStart(e),a.dragStart(e)}}onEventStoreLoad(e){this.calendarStore.getCount()>0&&this.updateEvents()}onFocusChange(e){let t=e.oldPath,n=e.path;t&&t[0].cls&&t[0].cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:t[0].id,cls:{remove:["neo-focus"]}}),n&&n[0].cls&&n[0].cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:n[0].id,cls:{add:["neo-focus"]}})}onTimeAxisChange(e){let t=this;t.adjustTotalHeight(e,t.headerCreated),t.headerCreated&&t.updateEvents()}onWheel(e){if(!this.isUpdating&&Math.abs(e.deltaX)>Math.abs(e.deltaY)){let t,n,o,a=this,r=a.getColumnContainer(),i=a.firstColumnDate,s=a.getHeaderContainer(),l=0,c=50,d=e.clientWidth-c;if(e.deltaX>0&&Math.round(e.scrollLeft/d*7)>13){for(n=new Date(r.cn[r.cn.length-1].flag),r.cn.splice(0,7),s.cn.splice(0,7);l<7;l++)n.setDate(n.getDate()+1),t=a.createColumnAndHeader(n),r.cn.push(t.column),s.cn.push(t.header);i.setDate(i.getDate()+7),setTimeout((()=>{a.updateEvents(13,20)}),50),o=-d}else if(e.deltaX<0&&Math.round(e.scrollLeft/d*7)<1){for(n=new Date(r.cn[0].flag),r.cn.length=14,s.cn.length=14;l<7;l++)n.setDate(n.getDate()-1),t=a.createColumnAndHeader(n),r.cn.unshift(t.column),s.cn.unshift(t.header);i.setDate(i.getDate()-7),setTimeout((()=>{a.updateEvents(0,6)}),50),o=d}o&&(a.isUpdating=!0,a.promiseVdomUpdate().then((()=>{Neo.main.DomAccess.scrollBy({direction:"left",id:a.getScrollContainer().id,value:o}).then((()=>{a.isUpdating=!1}))})))}}updateEvents(e=0,t=21,n=!1){let o,a,r,i,s,c,d,m,h,u,g,p,f,v,y,C,D=this,w=D.calendarStore,S=D.eventStore,k=D.timeAxis,N=k.getTime(k.endTime),b=k.getTime(k.startTime),x=N-b,_=l.Z.clone(D.firstColumnDate),E=D.vdom,T=D.getColumnContainer(),F=e,I=D.showEventEndTime;for(_.setDate(_.getDate()+e);F<t;F++){for(a=T.cn[F],a.cn=[],r=S.getDayRecords(_),g=r.length,u=0;u<g;u++)if(p=r[u],o=w.get(p.calendarId),o.active){if(s=l.Z.clone(p.endDate),v=l.Z.clone(p.startDate),N<=v.getHours())continue;if(b>=s.getHours())continue;N<s.getHours()&&(s.setHours(N),s.setMinutes(0)),b>v.getHours()&&(v.setHours(b),v.setMinutes(0)),i=(s-v)/60/60/1e3,c=["neo-event","neo-draggable",`neo-${o.color}`],d=60*i/k.interval,m=!1,h=Math.round(i/x*100*1e3)/1e3,f=p[S.keyProperty],y=(60*v.getHours()+v.getMinutes())/60,C=Math.round((y-b)/x*100*1e3)/1e3,d<=2&&(m=k.rowHeight*d<(I?50:34),!m||I&&k.rowHeight/d>=34||c.push("neo-overflow")),I=!(m&&1===d||!I),I&&c.push("neo-show-end-time"),a.cn.push({cls:c,flag:f,id:D.id+"__"+f,tabIndex:-1,cn:[{cls:["neo-event-time"],html:D.intlFormat_time.format(p.startDate),id:D.id+"__time__"+f},{cls:["neo-event-title"],html:p.title,id:D.id+"__title__"+f},{cls:["neo-event-time","neo-event-end-time"],html:D.intlFormat_time.format(p.endDate),id:D.id+"__enddate__"+f,removeDom:!I}],style:{height:`calc(${h}% - 2px)`,top:`calc(${C}% + 1px)`,width:"calc(100% - 1px)"}})}_.setDate(_.getDate()+1)}D[n?"_vdom":"vdom"]=E}updateHeader(e=!1,t=!1){let n,o,a,r,i,s=this,c=s.currentDate,d=s.vdom,m=s.getColumnContainer(),h=s.getHeaderContainer(),u=0;for(c.setDate(s.currentDate.getDate()-s.currentDate.getDay()+s.weekStartDay-7),s.firstColumnDate=l.Z.clone(c);u<21;u++)n=["neo-c-w-column","neo-draggable"],o=c.getDate(),a=c.getDay(),r=["neo-date"],0===a||6===a?n.push("neo-weekend"):b.Z.remove(n,"neo-weekend"),o===L&&c.getMonth()===R&&c.getFullYear()===B?r.push("neo-today"):b.Z.remove(r,"neo-today"),i=s.getColumnHeaderId(c),e?(m.cn.push({cls:n,flag:l.Z.convertToyyyymmdd(c),id:s.getColumnId(c)}),h.cn.push({cls:["neo-header-row-item"],id:i,cn:[{cls:["neo-day"],html:s.intlFormat_day.format(c),id:`${i}_day`},{cls:r,html:o,id:`${i}_date`}]})):(Object.assign(m.cn[u],{cls:n,flag:l.Z.convertToyyyymmdd(c),id:s.getColumnId(c)}),h.cn[u].id=i,Object.assign(h.cn[u].cn[0],{html:s.intlFormat_day.format(c),id:`${i}_day`}),Object.assign(h.cn[u].cn[1],{cls:r,html:o,id:`${i}_date`})),c.setDate(c.getDate()+1);s[t?"_vdom":"vdom"]=d}}Neo.applyClassConfig(O);const W=new Date,$=W.getDate(),A=W.getMonth(),Y=W.getFullYear();class j extends c.Z{static getConfig(){return{className:"Neo.calendar.view.YearComponent",ntype:"calendar-view-yearcomponent",bind:{calendarStore:"stores.calendars",currentDate:e=>e.currentDate,eventStore:"stores.events",scrollNewYearFromTop:e=>e.scrollNewYearFromTop},cachedUpdate:null,calendarStore_:null,cls:["neo-calendar-yearcomponent"],currentDate_:null,dayNameFormat_:"narrow",eventIndicatorHigh_:3,eventIndicatorLow_:1,eventIndicatorMedium_:2,eventStore_:null,intlFormat_day:null,intlFormat_month:null,isUpdating_:!1,locale_:Neo.config.locale,monthNameFormat_:"long",owner:null,scrollNewYearFromTop:!1,showCellBorders_:!1,showDisabledDays_:!0,showWeekends_:!0,showWeekNumbers_:!0,sixWeeksPerMonth_:!1,useAnimations:!0,vdom:{cn:[{cls:["neo-content-wrapper"],cn:[{cls:["neo-year-header"],cn:[{},{cls:["neo-nav-button","neo-prev-button"]},{cls:["neo-nav-button","neo-next-button"]}]},{cls:["neo-months-container"]}]}]},weekStartDay_:0}}constructor(e){super(e);let t=this,n=t.domListeners;n.push({click:t.onNavButtonClick,delegate:".neo-nav-button",scope:t},{wheel:t.onWheel,scope:t}),t.domListeners=n,t.updateHeaderYear()}afterSetCalendarStore(e,t){let n=this;t&&t.un({load:n.onCalendarStoreLoad,recordChange:n.onCalendarStoreRecordChange,scope:n}),e&&e.on({load:n.onCalendarStoreLoad,recordChange:n.onCalendarStoreRecordChange,scope:n})}afterSetCurrentDate(e,t){if(void 0!==t){let n=t.getFullYear(),o=e.getFullYear();o!==n?this.changeYear(o-n):console.log("## select a new day",e.getMonth(),e.getDate())}}afterSetDayNameFormat(e,t){this.updateDayNamesRows(e,t)}afterSetEventIndicatorHigh(e,t){void 0!==t&&this.createMonths()}afterSetEventIndicatorLow(e,t){void 0!==t&&this.createMonths()}afterSetEventIndicatorMedium(e,t){void 0!==t&&this.createMonths()}afterSetEventStore(e,t){let n=this;t&&t.un("load",n.onEventStoreLoad,n),e&&e.on("load",n.onEventStoreLoad,n)}afterSetLocale(e,t){if(void 0!==t){let e=this;e.updateDayNamesRows(e.dayNameFormat,"",!0),e.updateMonthNameFormat(e.monthNameFormat,"")}}afterSetMonthNameFormat(e,t){this.updateMonthNameFormat(e,t)}afterSetShowCellBorders(e,t){let n=this.cls;b.Z[e?"add":"remove"](n,"neo-show-cell-borders"),this.cls=n}afterSetShowWeekends(e,t){if(void 0!==t){let t,n,o,a,r,i=this,s=i.vdom,l=0;for(;l<12;l++)for(n=s.cn[0].cn[1].cn[l].cn,r=n.length,o=1;o<r;o++)for(a=1;a<8;a++)t=n[o].cn[a],t.cls.includes("neo-weekend")&&(e?delete t.removeDom:t.removeDom=!0);i.updateDayNamesRows(i.dayNameFormat,"")}}afterSetShowWeekNumbers(e,t){if(void 0!==t){let t,n,o,a=this,r=a.vdom,i=0;for(;i<12;i++)for(t=r.cn[0].cn[1].cn[i].cn,o=t.length,n=1;n<o;n++)t[n].cn[0].removeDom=!e;a.vdom=r}}afterSetSixWeeksPerMonth(e,t){if(void 0!==t){let t=this,n=t.vdom,o=t.currentDate,a=0;for(o.setMonth(0),o.setDate(1);a<12;a++)n.cn[0].cn[1].cn[a].cn[7].removeDom=5===l.Z.getWeeksOfMonth(o,t.weekStartDay)&&!e,o.setMonth(o.getMonth()+1);t.vdom=n}}afterSetWeekStartDay(e,t){void 0!==t&&this.createMonths()}beforeSetDayNameFormat(e,t){return this.beforeSetEnumValue(e,t,"dayNameFormat",l.Z.prototype.dayNameFormats)}beforeSetMonthNameFormat(e,t){return this.beforeSetEnumValue(e,t,"monthNameFormat",l.Z.prototype.monthNameFormats)}cacheUpdate(e=this.currentDate){this.cachedUpdate=e}changeYear(e){let t,n,o,a=this;a.useAnimations&&(a.isUpdating||(a.isUpdating=!0,Neo.main.DomAccess.getBoundingClientRect({id:a.id}).then((r=>{t=a.scrollNewYearFromTop&&e<0||!a.scrollNewYearFromTop&&e>0,n=a.vdom,o=t?0:-r.height,n.cn.push({cls:["neo-relative"],cn:[{cls:["neo-animation-wrapper"],cn:[{cls:["neo-content-wrapper"],cn:[{cls:["neo-year-header"],cn:[{html:a.currentDate.getFullYear()},{cls:["neo-nav-button","neo-prev-button"]},{cls:["neo-nav-button","neo-next-button"]}]},{cls:["neo-months-container"]}]}],style:{height:2*r.height+"px",transform:`translateY(${o}px)`,width:`${r.width}px`}}]}),a.createMonths(!0,n.cn[1].cn[0].cn[0].cn[1]),n.cn[1].cn[0].cn[t?"unshift":"push"](n.cn[0]),n.cn.splice(0,1),a.promiseVdomUpdate(n).then((()=>{o=t?-r.height:0,n.cn[0].cn[0].style.transform=`translateY(${o}px)`,a.vdom=n,setTimeout((()=>{n.cn[0]=n.cn[0].cn[0].cn[t?1:0],a.triggerVdomUpdate()}),300)}))}))))}createDayNamesRow(){let e,t,n=this,o=n.currentDate,a=0,r={cls:["neo-calendar-week"],cn:[{cls:["neo-cell","neo-top-left-spacer"]}]};for(o.setDate(n.currentDate.getDate()-n.currentDate.getDay()+n.weekStartDay);a<7;a++)t={cls:["neo-cell","neo-weekday-cell"],html:n.intlFormat_day.format(o)},e=o.getDay(),n.showWeekends||0!==e&&6!==e||(t.removeDom=!0),r.cn.push(t),o.setDate(o.getDate()+1);return r}createMonthContent(e,t){let n,o,a,r,i,s,c,d,m,h,u=this,g=u.calendarStore,p=t.getDate(),f=t.getMonth(),v=t.getFullYear(),y=l.Z.clone(t),C=u.eventStore,D=u.currentDate,w=D.getMonth(),S=D.getFullYear(),k=l.Z.getDaysInMonth(t),N=l.Z.getFirstDayOffset(t,u.weekStartDay),b=0,x=l.Z.clone(t);for(h=(k+N)/7>5?6:5,i=1-N,y.setDate(i),x.setDate(i+7);b<6;b++){for(m={cls:["neo-calendar-week"],removeDom:b===h&&!u.sixWeeksPerMonth,cn:[{cls:["neo-cell","neo-weeknumber-cell"],html:l.Z.getWeekOfYear(x),removeDom:!u.showWeekNumbers}]},x.setDate(x.getDate()+7),d=0;d<7;d++)c=i>0&&i<=k,n=u.getCellId(v,f+1,i),r=y.getDay(),o={id:n,cls:c?["neo-cell"]:["neo-cell","neo-disabled"],tabIndex:c?-1:null,cn:[{cls:["neo-cell-content"],html:c?i:u.showDisabledDays?y.getDate():""}]},a=o.cls,0!==r&&6!==r||(a.push("neo-weekend"),u.showWeekends||(o.removeDom=!0)),Y===v&&A===f&&$===i&&o.cn[0].cls.push("neo-today"),S===v&&w===f&&i===p&&a.push("neo-selected"),o.removeDom||(s=C.getDayRecords(y),s=s.filter((e=>g.get(e.calendarId).active)),s.length>=u.eventIndicatorHigh?a.push("neo-events-high"):s.length>=u.eventIndicatorMedium?a.push("neo-events-medium"):s.length>=u.eventIndicatorLow&&a.push("neo-events-low")),m.cn.push(o),y.setDate(y.getDate()+1),i++;e.cn.push(m)}return e}createMonths(e=!1,t){let n,o=this,a=o.currentDate,r=o.vdom,i=t||r.cn[0].cn[1],s=0;for(i.cn=[];s<12;s++)a.setMonth(s),a.setDate(1),n={cls:["neo-month"],cn:[{cls:["neo-month-name"],html:o.intlFormat_month.format(a)},o.createDayNamesRow()]},n=o.createMonthContent(n,l.Z.clone(a)),i.cn.push(n);e||(o.vdom=r)}getCellId(e,t,n){return(n=n.toString()).length<2&&(n="0"+n),(t=t.toString()).length<2&&(t="0"+t),this.id+"__"+e+"-"+t+"-"+n}onCalendarStoreLoad(e){this.eventStore.getCount()>0&&this.createMonths()}onCalendarStoreRecordChange(e){this.createMonths()}onEventStoreLoad(e){this.calendarStore.getCount()>0&&this.createMonths()}onNavButtonClick(e){let t=this.currentDate;t.setFullYear(t.getFullYear()+(e.path[0].cls.includes("neo-next-button")?1:-1)),this.currentDate=t}onWheel(e){if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){let t=this,n=t.currentDate;n.setFullYear(n.getFullYear()+(e.deltaY>0?1:-1)),t.currentDate=n}}triggerVdomUpdate(e=!1){if(!e){let e=this;e.isUpdating=!0,e.promiseVdomUpdate(e.vdom).then((()=>{e.isUpdating=!1}))}}updateDayNamesRows(e,t,n=!1){let o=this;if(o.intlFormat_day=new Intl.DateTimeFormat(o.locale,{weekday:e}),void 0!==t){let e,t,a,r=o.currentDate,i=o.vdom,s=1;for(r.setDate(o.currentDate.getDate()-o.currentDate.getDay()+o.weekStartDay);s<8;s++){for(t=0;t<12;t++)e=r.getDay(),a=i.cn[0].cn[1].cn[t].cn[1].cn[s],a.html=o.intlFormat_day.format(r),o.showWeekends||0!==e&&6!==e?delete a.removeDom:a.removeDom=!0;r.setDate(r.getDate()+1)}o[n?"_vdom":"vdom"]=i}}updateHeaderYear(){this.vdom.cn[0].cn[0].cn[0].html=this.currentDate.getFullYear()}updateMonthNameFormat(e,t,n=!1){let o=this;if(o.intlFormat_month=new Intl.DateTimeFormat(o.locale,{month:e}),void 0!==t){let e=o.vdom,t=0,a=o.currentDate;for(;t<12;t++)a.setMonth(t),a.setDate(1),e.cn[0].cn[1].cn[t].cn[0].html=o.intlFormat_month.format(a);o[n?"_vdom":"vdom"]=e}}}Neo.applyClassConfig(j);const z=new Date;class U extends r.Z{static getStaticConfig(){return{validViews:["day","week","month","year"]}}static getConfig(){return{className:"Neo.calendar.view.MainContainer",ntype:"calendar-maincontainer",activeView_:"week",baseFontSize_:null,bind:{currentDate:{twoWay:!0,value:e=>e.currentDate},endTime:{twoWay:!0,value:e=>e.endTime},scrollNewYearFromTop:{twoWay:!0,value:e=>e.scrollNewYearFromTop},startTime:{twoWay:!0,value:e=>e.startTime}},calendarsContainer:null,calendarStoreConfig_:null,cls:["neo-calendar-maincontainer","neo-container"],currentDate_:z,dateSelector:null,dateSelectorConfig:null,dayComponent:null,dayComponentConfig:null,editEventContainer_:null,editEventContainerConfig:null,endTime_:"24:00",eventStoreConfig_:null,intlFormat_time:null,layout:{ntype:"vbox",align:"stretch"},locale_:Neo.config.locale,minimumEventDuration_:30,model:N,monthComponent:null,monthComponentConfig:null,removeInactiveCards:!0,scrollNewYearFromTop_:!1,settingsContainerConfig:null,settingsContainerWidth:310,settingsExpanded_:!1,showWeekends_:!0,sideBarExpanded_:!0,sideBarWidth:220,startTime_:"00:00",timeFormat_:{hour:"2-digit",minute:"2-digit"},useSettingsContainer_:!0,views_:["day","week","month","year"],weekComponent:null,weekComponentConfig:null,weekStartDay_:0,yearComponent:null,yearComponentConfig:null}}constructor(e){super(e);let t=this;t.createItemsContent(),t.sideBarExpanded||t.afterSetSideBarExpanded(!1,!0)}afterSetBaseFontSize(e,t){if(void 0!==t){let t=this.style||{};e?t.fontSize=`${e}px`:delete t.fontSize,this.style=t}}afterSetLocale(e,t){if(void 0!==t){let t=this;t.intlFormat_time=new Intl.DateTimeFormat(e,t.timeFormat),t.setViewConfig("locale",e)}}afterSetMinimumEventDuration(e,t){void 0!==t&&(this.weekComponent.minimumEventDuration=e)}afterSetScrollNewYearFromTop(e,t){void 0!==t&&(this.dateSelector.scrollNewYearFromTop=e)}afterSetSettingsExpanded(e,t){if(Neo.isBoolean(t)){let t=this,n=t.items[1].items[2];e?n.expand():n.collapse(t.settingsContainerWidth)}}afterSetShowWeekends(e,t){void 0!==t&&this.setViewConfig("showWeekends",e)}afterSetSideBarExpanded(e,t){if(void 0!==t){let t,n=this,o=n.items[1].items[0],a=o.style||{};e?(delete o.vdom.removeDom,n.promiseVdomUpdate().then((()=>{o.mounted=!0,setTimeout((()=>{a.marginLeft="0px",o.style=a}),50)}))):(a.marginLeft=`-${n.sideBarWidth}px`,o._style=a,o._vdom.style=a,n.promiseVdomUpdate().then((()=>{setTimeout((()=>{t=o.vdom,t.removeDom=!0,o.vdom=t}),400)})))}}afterSetTimeFormat(e,t){this.intlFormat_time=new Intl.DateTimeFormat(this.locale,e)}afterSetUseSettingsContainer(e,t){let o=this;e?Promise.all([n.e(2138),n.e(3587)]).then(n.bind(n,3587)).then((e=>{o.items[1].add({module:e.default,collapsed:!o.settingsExpanded,removeInactiveCards:o.removeInactiveCards,style:{marginRight:o.settingsExpanded?"0":`-${o.settingsContainerWidth}px`},width:o.settingsContainerWidth,...o.settingsContainerConfig}),o.items[0].items[1].add({handler:o.toggleSettings.bind(o),iconCls:"fa fa-cog",style:{marginLeft:"10px"}})})):!1===e&&t&&(o.items[1].removeLast(),o.items[0].items[1].removeLast())}afterSetWeekStartDay(e,t){void 0!==t&&this.setViewConfig("weekStartDay",e)}beforeGetEditEventContainer(e){if(!e){let t=this;t._editEventContainer=e=Neo.create({module:p,appName:t.appName,owner:t,width:250,...t.editEventContainerConfig})}return e}beforeSetViews(e,t){let n=this.getStaticConfig("validViews");return e.forEach((e=>{if(!n.includes(e))return console.error(e,"is not a valid entry for views. Stick to:",n),t})),e}changeTimeInterval(e){let t=this;t.items[1].items[1].layout.activeIndex=t.views.indexOf(e),t.items[0].items[1].items.forEach((t=>{"timeInterval"===t.toggleGroup&&(t.pressed=t.value===e)})),t.activeView=e}createHeaderItems(){let e=this;return[{module:T.Z,cls:["neo-calendar-header-toolbar","neo-left","neo-toolbar"],width:e.sideBarWidth,items:[{handler:e.toggleSidebar.bind(e),iconCls:"fa fa-bars"},"->",{handler:e.onPreviousIntervalButtonClick.bind(e),iconCls:"fa fa-chevron-left"},{handler:e.onTodayButtonClick.bind(e),height:24,text:"Today"},{handler:e.onNextIntervalButtonClick.bind(e),iconCls:"fa fa-chevron-right"}]},{module:T.Z,cls:["neo-calendar-header-toolbar","neo-toolbar"],items:["->",...e.createViewHeaderButtons()]}]}createItemsContent(){let e=this;e.calendarsContainer=Neo.create({module:i,flex:1,parentId:e.id}),e.dateSelector=Neo.create({module:s.Z,appName:e.appName,flex:"none",height:e.sideBarWidth,listeners:{change:e.onDateSelectorChange,scope:e},locale:e.locale,parentId:e.id,showWeekends:e.showWeekends,value:l.Z.convertToyyyymmdd(e.currentDate),weekStartDay:e.weekStartDay,bind:{scrollNewYearFromTop:e=>e.scrollNewYearFromTop,value:e=>l.Z.convertToyyyymmdd(e.currentDate)},...e.dateSelectorConfig}),e.items=[{module:r.Z,flex:"none",layout:{ntype:"hbox",align:"stretch"},items:e.createHeaderItems()},{module:r.Z,flex:1,layout:{ntype:"hbox",align:"stretch"},items:[{module:r.Z,cls:["neo-calendar-sidebar","neo-container"],layout:{ntype:"vbox",align:"stretch"},width:e.sideBarWidth,items:[e.dateSelector,e.calendarsContainer]},{module:r.Z,flex:1,items:e.createViews(),layout:{ntype:"card",activeIndex:e.views.indexOf(e.activeView),removeInactiveCards:e.removeInactiveCards}}]}]}createViewHeaderButtons(){let e=this,t=e.views.indexOf(e.activeView),n=[];return e.views.forEach(((o,a)=>{n.push({handler:e.changeTimeInterval.bind(e,o),height:24,pressed:t===a,text:Neo.capitalize(o),toggleGroup:"timeInterval",value:o})})),n}createViews(){let e,t=this,n=[];const o={appName:t.appName,currentDate:t.currentDate,locale:t.locale,owner:t,parentId:t.id,showWeekends:t.showWeekends,weekStartDay:t.weekStartDay},a={day:{module:m,style:{padding:"20px"},...o,...t.dayComponentConfig},month:{module:E,...o,...t.monthComponentConfig},week:{module:O,minimumEventDuration:t.minimumEventDuration,...o,...t.weekComponentConfig},year:{module:j,scrollNewYearFromTop:t.scrollNewYearFromTop,...o,...t.yearComponentConfig}};return t.views.forEach((o=>{t[o+"Component"]=e=Neo.create(a[o]),n.push(e)})),n}destroy(...e){let t=this;t.calendarsContainer=null,t.dateSelector=null,t.dayComponent=null,t.monthComponent=null,t.weekComponent=null,t.yearComponent=null,super.destroy(...e)}onDateSelectorChange(e){void 0!==e.oldValue&&this.getModel().setData("currentDate",new Date(`${e.value} 00:00:00`))}onNextIntervalButtonClick(e){this.switchInterval(1)}onPreviousIntervalButtonClick(e){this.switchInterval(-1)}onTodayButtonClick(e){this.currentDate=z}setViewConfig(e,t){let n=this;n.dateSelector[e]=t,n.views.forEach((o=>{n[`${o}Component`][e]=t}))}toggleSettings(){this.settingsExpanded=!this.settingsExpanded}toggleSidebar(){this.sideBarExpanded=!this.sideBarExpanded}switchInterval(e){let t=this,n=t.currentDate;({day:()=>{n.setDate(n.getDate()+e)},month:()=>{n.setMonth(n.getMonth()+e)},week:()=>{n.setDate(n.getDate()+7*e)},year:()=>{n.setFullYear(n.getFullYear()+e)}})[t.activeView](),t.currentDate=n}}Neo.applyClassConfig(U);var K=n(5354);class X extends K.Z{static getConfig(){return{className:"Neo.examples.calendar.basic.MainContainerController"}}onSwitchThemeButtonClick(e){let t,n,o,a,r,i,s=e.component,l=this.component,c=this.getReference("headerToolbar");"Theme Light"===s.text?(t="Theme Dark",o="#f2f2f2",a="fa fa-moon",i="neo-theme-light"):(t="Theme Light",o="#33343d",a="fa fa-sun",i="neo-theme-dark"),n=[...l.cls],l.cls.forEach((e=>{e.includes("neo-theme")&&b.Z.remove(n,e)})),b.Z.add(n,i),l.cls=n,s.set({iconCls:a,text:t}),r=c.style||{},r.backgroundColor=o,c.style=r}}Neo.applyClassConfig(X);var G=n(3429);class q extends G.Z{static getConfig(){return{className:"Neo.examples.calendar.basic.MainContainer",autoMount:!0,controller:X,layout:{ntype:"vbox",align:"stretch"},items:[{module:T.Z,flex:"none",padding:20,reference:"headerToolbar",style:{backgroundColor:"#f2f2f2",padding:"10px 5px 10px 10px"},items:[{ntype:"component",cls:["neo-header"],html:'<i class="fa fa-calendar"></i>neo.mjs Calendar'},"->",{module:o.Z,handler:"onSwitchThemeButtonClick",height:27,iconCls:"fa fa-moon",text:"Theme Dark"},{module:o.Z,height:27,iconCls:"fab fa-github",style:{marginLeft:"5px"},text:"GitHub",url:"https://github.com/neomjs/neo/tree/dev/src/calendar"}]},{module:U,currentDate:new Date("2021-07-20"),flex:1,reference:"calendar",calendarStoreConfig:{autoLoad:!0,url:"../../examples/calendar/basic/data/calendars.json"},eventStoreConfig:{autoLoad:!0,url:"../../examples/calendar/basic/data/events.json"}}]}}}Neo.applyClassConfig(q);const J=()=>Neo.app({mainView:q,name:"Neo.examples.calendar.basic"})},1354:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(9132),a=n(3501);class r extends o.Z{static getStaticConfig(){return{iconPositions:["top","right","bottom","left"]}}static getConfig(){return{className:"Neo.button.Base",ntype:"button",cls:["neo-button"],editRoute:!0,handler_:null,handlerScope:null,iconCls_:null,iconColor_:null,iconPosition_:"left",pressed_:!1,route_:null,text_:"",url_:null,urlTarget_:"_blank",_vdom:{tag:"button",cn:[{tag:"span",cls:["neo-button-glyph"]},{tag:"span",cls:["neo-button-text"]}]}}}afterSetHandler(e,t){if(e){let t=this,n=t.domListeners||[];n.push({click:e,scope:t.handlerScope||t}),t.domListeners=n}}afterSetIconCls(e,t){let n=this,o=n.vdom,r=n.getVdomRoot().cn[0];a.Z.remove(r.cls,t),e&&""!==e?(r.removeDom=!1,a.Z.add(r.cls,e)):r.removeDom=!0,n.vdom=o}afterSetIconColor(e,t){let n=this,o=n.vdom,a=n.getVdomRoot().cn[0];a.style||(a.style={}),""===e&&(e=null),a.style.color=e,n.vdom=o}afterSetIconPosition(e,t){let n=this.cls;a.Z.remove(n,"icon-"+t),a.Z.add(n,"icon-"+e),this.cls=n}afterSetPressed(e,t){let n=this.cls;a.Z[!0===e?"add":"remove"](n,"pressed"),this.cls=n}afterSetRoute(e,t){if(e){let e=this,t=e.domListeners||[];t.push({click:e.changeRoute,scope:e}),e.domListeners=t}}afterSetText(e,t){let n=this,o=n.vdom,r=n.getVdomRoot(),i=r.cn[1];""===e?(a.Z.add(n._cls,"no-text"),a.Z.add(r.cls,"no-text"),i.removeDom=!0):(a.Z.remove(n._cls,"no-text"),a.Z.remove(r.cls,"no-text"),i.removeDom=!1,i.innerHTML=e),n.vdom=o}afterSetUrl(e,t){let n=this,o=n.vdom,a=n.getVdomRoot();e?(a.href=e,a.tag="a"):(delete a.href,a.tag="button"),n.vdom=o}afterSetUrlTarget(e,t){let n=this,o=n.vdom,a=n.getVdomRoot();n.url?a.target=e:delete a.target,n.vdom=o}beforeGetIconCls(){let e=this._iconCls;return Array.isArray(e)?e.join(" "):e}beforeSetIconCls(e,t){return e&&!Array.isArray(e)&&(e=e.split(" ")),e}beforeSetIconPosition(e,t){return this.beforeSetEnumValue(e,t,"iconPosition")}changeRoute(){let e=this;e.editRoute?Neo.Main.editRoute(e.route):Neo.Main.setRoute({value:e.route})}}Neo.applyClassConfig(r)},3817:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(9132),a=n(3501);class r extends o.Z{static getConfig(){return{className:"Neo.component.Clock",ntype:"clock",cls:["neo-clock"],fontSize_:20,showDisc_:!0,size_:500,time_:"00:00",_vdom:{cn:[{cls:["neo-minutes"],style:{}},{cls:["neo-hours"],style:{}}]}}}afterSetFontSize(e,t){let n=this.style;n.fontSize=`${e}px`,this.style=n}afterSetShowDisc(e,t){let n=this.cls;a.Z[e?"add":"remove"](n,"neo-show-disc"),this.cls=n}afterSetSize(e,t){let n=this.style;Neo.isNumber(e)?(n.height=`${e}px`,n.width=`${e}px`):(delete n.height,delete n.width),this.style=n}afterSetTime(e,t){let n=e.split(":").map((e=>Number(e))),o=n[0]%12*30+.5*n[1],a=6*n[1],r=this.vdom;r.cn[0].style.transform=`rotate(${a}deg)`,r.cn[1].style.transform=`rotate(${o}deg)`,this.vdom=r}}Neo.applyClassConfig(r)},9964:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(9132);class a extends o.Z{static getConfig(){return{className:"Neo.component.Label",ntype:"label",cls:["neo-label"],text_:"",_vdom:{tag:"label",draggable:!1}}}afterSetText(e,t){let n=this.vdom;n.html=e,this.vdom=n}}Neo.applyClassConfig(a)},4959:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i}),n(1354);var o=n(9132),a=n(2680),r=(n(9964),n(3501));class i extends a.Z{static getStaticConfig(){return{dockPositions:["top","right","bottom","left"]}}static getConfig(){return{className:"Neo.container.Toolbar",ntype:"toolbar",cls:["neo-toolbar"],dock_:"top",itemDefaults:{ntype:"button"},_layout:{ntype:"hbox",align:"center",pack:"start"},sortable_:!1,sortZone:null,sortZoneConfig:null}}afterSetAppName(e,t){super.afterSetAppName(e,t),this.sortZone&&(this.sortZone.appName=e)}afterSetDock(e,t){let n=this,o=n.cls;n.getStaticConfig("dockPositions").forEach((t=>{r.Z[t===e?"add":"remove"](o,"neo-dock-"+t)})),n.cls=o,n.layout=n.getLayoutConfig()}afterSetSortable(e,t){let o=this;e&&!o.sortZone&&n.e(2860).then(n.bind(n,8276)).then((e=>{o.sortZone=Neo.create({module:e.default,appName:o.appName,boundaryContainerId:o.id,owner:o,...o.sortZoneConfig})}))}beforeSetDock(e,t){return this.beforeSetEnumValue(e,t,"dock","dockPositions")}createItems(){const e=this._items;return Array.isArray(e)&&e.forEach(((t,n)=>{"->"===t&&(e[n]=Neo.create({module:o.Z,flex:1}))})),super.createItems()}getLayoutConfig(){let e;switch(this.dock){case"bottom":case"top":e={ntype:"hbox",align:"center",pack:"start"};break;case"left":e={ntype:"vbox",align:"center",direction:"column-reverse",pack:"start"};break;case"right":e={ntype:"vbox",align:"center",direction:"column",pack:"start"}}return e}}Neo.applyClassConfig(i)},3429:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(2680);class a extends o.Z{static getConfig(){return{className:"Neo.container.Viewport",ntype:"viewport",applyBodyCls:!0,cls:["neo-viewport"]}}onConstructed(){super.onConstructed(),this.applyBodyCls&&Neo.main.DomAccess.applyBodyCls({appName:this.appName,cls:["neo-body-viewport"]})}}Neo.applyClassConfig(a)},5354:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(2641),a=(n(9342),n(1954)),r=n(3949);class i extends o.Z{static getConfig(){return{className:"Neo.controller.Component",ntype:"component-controller",component:null,parent_:null,references:null}}constructor(e){super(e);let t,n=this,o=n.component;n.references={},o.isConstructed?n.onComponentConstructed():t=o.on("constructed",(()=>{o.un("constructed",t),n.onComponentConstructed()}))}beforeSetParent(e,t){return e||this.getParent()}getHandlerScope(e){let t=this,n=t.parent;return Neo.isFunction(t[e])?t:n?n.getHandlerScope(e):null}getModel(e=!1){let t=this.component;return e?t.model:t.getModel()}getParent(){let e,t,n=this;return n.parent?n.parent:(t=n.component.parentId,e=t&&Neo.getComponent(t),e&&e.getController()||null)}getReference(e){let t=this,n=t.references[e];return n||(n=t.component.down({reference:e}),n&&(t.references[e]=n)),n||null}onComponentConstructed(){}parseConfig(e=this.component){let t,n,o,i=this,s=e.domListeners,l=e.listeners,c=e.reference;s&&s.forEach((s=>{Object.entries(s).forEach((([l,c])=>{t=null,"scope"!==l&&"delegate"!==l&&(Neo.isString(c)?t=c:Neo.isObject(c)&&c.hasOwnProperty("fn")&&Neo.isString(c.fn)&&(t=c.fn),t&&(o=i.getHandlerScope(t),o?(n=o[t].bind(o),s[l]=n,a.Z.updateListenerPlaceholder({componentId:e.id,eventHandlerMethod:n,eventHandlerName:t,eventName:l,scope:void 0})):r.Z.logError("Unknown domEvent handler for",t,e)))}))})),l&&Object.entries(l).forEach((([n,a])=>{"scope"!==n&&"delegate"!==n&&a.forEach((n=>{Neo.isObject(n)&&n.hasOwnProperty("fn")&&Neo.isString(n.fn)&&(t=n.fn,o=i.getHandlerScope(t),o?n.fn=o[t].bind(o):r.Z.logError("Unknown event handler for",t,e))}))})),c&&(i.references[c]=e)}removeReference(e){let t,n=this.references;for(t in n)if(e===n[t]){delete n[t];break}}}Neo.applyClassConfig(i)},3474:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(2680),a=n(2232),r=n(9342);class i extends o.Z{static getConfig(){return{className:"Neo.form.Container",ntype:"form-container",cls:["neo-form-container"],vdom:{tag:"form",cn:[]}}}getField(e){let t=r.Z.getChildren(this);for(let n of t)if(n instanceof a.Z&&(n.id===e||n.name===e))return n;return null}getFields(){let e=r.Z.getChildren(this),t=[];return e.forEach((e=>{e instanceof a.Z&&t.push(e)})),t}getValues(){let e=this.getFields(),t={};return e.forEach((e=>{t[e.name||e.id]=e.value})),t}isValid(){let e=this.getFields(),t=0,n=e.length;for(;t<n;t++)if(!e[t].isValid())return!1;return!0}reset(e={}){let t,n=this.getFields(),o=e?Object.keys(e):[];n.forEach((n=>{t=o.indexOf(n.name),t<0&&(t=o.indexOf(n.id)),n.reset(t>-1?e[o[t]]:null)}))}setValues(e={}){let t,n=this.getFields(),o=Object.keys(e);n.forEach((n=>{t=o.indexOf(n.name),t<0&&(t=o.indexOf(n.id)),t>-1&&(n.value=e[o[t]])}))}}Neo.applyClassConfig(i)},4569:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(2680),a=n(9389),r=n(5062),i=n(524);class s extends r.Z{static getConfig(){return{className:"Neo.form.field.Picker",ntype:"pickerfield",clientRects:null,cls:["neo-pickerfield","neo-textfield"],keys:{Enter:"onKeyDownEnter",Escape:"onKeyDownEscape"},matchPickerWidth:!0,picker:null,pickerConfig:null,pickerHeight:100,pickerIsMounted_:!1,pickerMaxHeight:200,pickerWidth:100,triggers:[{module:a.Z}]}}applyClientRects(e){let t=this,n=(t.clientRects[2],t.clientRects[1]),o=t.clientRects[0],a=t.picker.vdom,r=t.matchPickerWidth?n.width-1:t.pickerWidth;t.pickerWidth=r,a.style=a.style||{},Object.assign(a.style,{left:o.left+o.width-r+"px",top:`${o.top+o.height+1}px`,width:`${r}px`}),t.picker[e?"_vdom":"vdom"]=a}createPicker(){let e=this,t=e.createPickerComponent();return Neo.create(o.Z,{appName:e.appName,cls:["neo-picker-container","neo-container"],height:e.pickerHeight,id:e.getPickerId(),items:t?[t]:[],maxHeight:e.pickerMaxHeight,vdom:{cn:[],tabIndex:-1},width:e.pickerWidth,...e.pickerConfig})}createPickerComponent(){return null}getClientRectsThenShow(e,t){let n=this;Neo.main.DomAccess.getBoundingClientRect({id:[n.id,n.id+"-input-wrapper","body"]}).then((o=>{n.clientRects=o,n.showPicker(e,t)}))}getPicker(){let e=this;return e.picker||(e.picker=e.createPicker()),e.picker}getPickerId(){return this.id+"__picker"}hidePicker(e=!1){let t=this,n=t.getPicker(),o=t.vdom;t.pickerIsMounted&&i.Z.removeVdomChild(o,t.getPickerId()),t.pickerIsMounted=!1,e?(t._vdom=o,n.mounted=!1):t.promiseVdomUpdate().then((e=>{n.mounted=t.pickerIsMounted}))}onFocusLeave(e){let t=this;"inline"!==t.labelPosition||""!==t.value&&null!==t.value?t.hidePicker():t.hidePicker(!0),super.onFocusLeave(e)}onKeyDownEnter(e,t,n){this.pickerIsMounted||this.getClientRectsThenShow(t,n)}onKeyDownEscape(e){this.pickerIsMounted&&this.hidePicker()}onPickerTriggerClick(){let e=this;e.pickerIsMounted?e.hidePicker():e.getClientRectsThenShow()}showPicker(e,t){let n=this,o=n.getPicker(),a=n.vdom;n.applyClientRects(!0),a.cn.push(o.vdom),n.promiseVdomUpdate().then((a=>{n.pickerIsMounted=!0,o.mounted=n.pickerIsMounted,e&&e.apply(t||n)}))}}Neo.applyClassConfig(s)},4759:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(2783),a=n(7703),r=n(4569),i=n(4228);class s extends r.Z{static getConfig(){return{className:"Neo.form.field.Time",ntype:"timefield",cls:["neo-timefield","neo-pickerfield","neo-textfield"],collection:null,inputType:"time",keys:{Enter:"onKeyDownEnter",Escape:"onKeyDownEscape"},list:null,listConfig:null,maxValue_:"16:00",minValue_:"08:00",pickerHeight:150,stepSize_:300,triggers:[{module:i.Z}],valueFormat_:null}}constructor(e){super(e);let t=this,n=t.getTrigger("clear");t.originalConfig.value=t.formatTime(t.value),n&&n.onFieldChange(),t.collection=Neo.create({module:o.Z,items:t.createCollectionItems(),keyProperty:"value"}),t.list=Neo.create({module:a.Z,displayField:"value",store:t.collection,...t.listConfig}),t.list.keys._keys.push({fn:"onContainerKeyDownEnter",key:"Enter",scope:t.id},{fn:"onContainerKeyDownEscape",key:"Escape",scope:t.id}),t.list.on({itemClick:t.onListItemClick,itemNavigate:t.onListItemNavigate,scope:t})}afterSetMaxValue(e,t){this.changeInputElKey("max",e),void 0!==t&&this.recreateListItems()}afterSetMinValue(e,t){this.changeInputElKey("min",e),void 0!==t&&this.recreateListItems()}afterSetPickerIsMounted(e,t){e&&this.selectCurrentListItem()}afterSetStepSize(e,t){this.changeInputElKey("step",e)}afterSetValue(e,t,n=!1){super.afterSetValue(e,t);let o=this;o.getTrigger("time").value=e,o.pickerIsMounted&&!n&&o.selectCurrentListItem(!0)}beforeGetValueFormat(e,t){return e||(this._valueFormat=e=new Intl.DateTimeFormat(Neo.config.locale,{hour:"2-digit",minute:"2-digit",second:this.stepSize<60?"2-digit":void 0,hour12:!1})),e}beforeSetMaxValue(e,t){return e&&(e.includes("24")||e.startsWith("12")&&e.includes("AM"))?"23:59:00":this.formatTime(e)}beforeSetMinValue(e,t){return this.formatTime(e)}beforeSetValue(e,t){return this.formatTime(e)}createCollectionItems(){let e=this,t=new Date,n=e.maxValue.split(":").map(Number),o=new Date,a=e.minValue.split(":").map(Number),r=[];const i=new Intl.DateTimeFormat(Neo.config.locale,{hour:"2-digit",minute:"2-digit",second:e.stepSize<60?"2-digit":void 0});for(t.setHours(...a),o.setHours(...n);t<=o;)r.push({value:i.format(t)}),t.setSeconds(t.getSeconds()+e.stepSize);return r}createPickerComponent(){return this.list}focusInputEl(e){let t=this;Neo.main.DomAccess.focus({id:t.getInputElId()}).then((()=>{e&&e.apply(t)}))}formatTime(e){return e?this.valueFormat.format(new Date(`November 23, 2019  ${e}`)):e}onContainerKeyDownEnter(e){this.hidePicker()}onContainerKeyDownEscape(e){this.focusInputEl(this.hidePicker)}onKeyDownEnter(e){let t=this;t.pickerIsMounted?(super.onKeyDownEnter(e),t.selectCurrentListItem()):super.onKeyDownEnter(e,t.selectCurrentListItem)}onListItemClick(e){let t=this,n=t.value,o=e.value;t.value!==o&&(o=t.formatTime(o),t._value=o,t.afterSetValue(o,n,!0))}onListItemNavigate(e){this.onListItemClick(e)}recreateListItems(){let e=this;e.collection.clear(),e.collection.add(e.createCollectionItems()),e.list.createItems()}reset(e){let t=this;e&&t.clearToOriginalValue&&(t.originalConfig.value=t.formatTime(e)),t.value=t.clearToOriginalValue?t.originalConfig.value:null}selectCurrentListItem(e=!1){let t=this.list,n=t.getItemId(this.value);t.selectionModel.select(n),e?Neo.main.DomAccess.scrollIntoView({id:n}):t.focus(n)}}Neo.applyClassConfig(s)},9389:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(877);class a extends o.Z{static getConfig(){return{className:"Neo.form.field.trigger.Picker",ntype:"trigger-picker",iconCls:"fa fa-caret-down",type:"picker"}}onTriggerClick(e){this.field.onPickerTriggerClick()}}Neo.applyClassConfig(a)},4228:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(3817),a=n(9389);class r extends a.Z{static getConfig(){return{className:"Neo.form.field.trigger.Time",ntype:"trigger-time",cls:["neo-timefield-trigger","neo-field-trigger"],clock:null,clockConfig:null,iconCls:null,type:"time",value_:null}}constructor(e){super(e);let t=this,n=t.vdom;t.clock=Neo.create({module:o.Z,appName:t.appName,parentId:t.id,fontSize:.6,showDisc:!1,size:null,...t.clockConfig}),n.cn=[t.clock.vdom],t.vdom=n}afterSetAppName(e,t){super.afterSetAppName(e,t),e&&(this.clock.appName=e)}afterSetValue(e,t){e&&(this.clock.time=e)}}Neo.applyClassConfig(r)},7703:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(4508),a=n(9132),r=n(4896);class i extends r.Z{static getConfig(){return{className:"Neo.selection.ListModel",ntype:"selection-listmodel",stayInList:!0}}onKeyDownDown(e){this.view.disableSelection||this.onNavKey(e,1)}onKeyDownLeft(e){this.onKeyDownUp(e)}onKeyDownRight(e){this.onKeyDownDown(e)}onKeyDownUp(e){this.view.disableSelection||this.onNavKey(e,-1)}onNavKey(e,t){let n,o,a,r,i=this,s=e.path[0],l=i.view,c=l.store,d=c.getCount(),m=!1;s.cls.includes(l.itemCls)?(r=l.getItemRecordId(s.id),n=c.indexOf(r)+t,n<0?i.stayInList?n=d-1:(m=!0,l.fire("selectPreFirstItem")):n>=d&&(i.stayInList?n=0:(m=!0,l.fire("selectPostLastItem")))):n=0,m?i.deselectAll():(a=c.getAt(n),o=l.getItemId(a[i.view.getKeyProperty()]),i.select(o),l.focus(o),l.fire("itemNavigate",a))}register(e){super.register(e);let t=this.id,n=this.view;n.keys&&n.keys._keys.push({fn:"onKeyDownDown",key:"Down",scope:t},{fn:"onKeyDownLeft",key:"Left",scope:t},{fn:"onKeyDownRight",key:"Right",scope:t},{fn:"onKeyDownUp",key:"Up",scope:t})}selectAt(e){let t=this.view,n=t.store.getKeyAt(e),o=n&&t.getItemId(n);o&&(this.select(o),t.focus(o))}unregister(){let e=this.id,t=this.view;t.keys&&t.keys.removeKeys([{fn:"onKeyDownDown",key:"Down",scope:e},{fn:"onKeyDownLeft",key:"Left",scope:e},{fn:"onKeyDownRight",key:"Right",scope:e},{fn:"onKeyDownUp",key:"Up",scope:e}]),super.unregister()}}Neo.applyClassConfig(i);var s=n(3501);n(7816);class l extends a.Z{static getConfig(){return{className:"Neo.list.Base",ntype:"list",autoDestroyStore:!0,cls:["neo-list-container","neo-list"],disableSelection_:!1,displayField:"name",draggable_:!1,dragZone:null,dragZoneConfig:null,highlightFilterValue:!0,itemCls:"neo-list-item",keys:{},selectionModel_:null,silentSelect:!1,store_:null,useCheckBoxes_:!1,_vdom:{tag:"ul",cn:[]}}}constructor(e){super(e);let t=this,n=t.domListeners;n.push({click:{fn:t.onClick,scope:t}}),t.domListeners=n}afterSetDisableSelection(e,t){let n=this;e&&n.rendered&&n.selectionModel&&n.selectionModel.deselectAll()}afterSetDraggable(e,t){let o=this;e&&!o.dragZone&&n.e(4023).then(n.bind(n,4023)).then((e=>{o.dragZone=Neo.create({module:e.default,appName:o.appName,owner:o,...o.dragZoneConfig})}))}afterSetSelectionModel(e,t){this.rendered&&e.register(this)}afterSetStore(e,t){let n=this;e&&(e.on({filter:n.onStoreFilter,load:n.onStoreLoad,scope:n}),e.getCount()>0&&n.onStoreLoad())}afterSetUseCheckBoxes(e,t){let n=this.cls;s.Z[e?"add":"remove"](n,"neo-use-checkicons"),this.cls=n}beforeSetSelectionModel(e,t){return t&&t.destroy(),o.Z.beforeSetInstance(e,i)}beforeSetStore(e,t){return t&&t.destroy(),o.Z.beforeSetInstance(e)}createItem(e){let t=this,n=t.createItemContent(e);const o={tag:"li",cls:[t.itemCls],id:t.getItemId(e[t.getKeyProperty()]),tabIndex:-1};return o["string"==typeof n?"html":"cn"]=n,o}createItemContent(e){let t,n=this,o=e[this.displayField];return n.highlightFilterValue&&(t=n.store.getFilter(n.displayField),t&&null!==t.value&&""!==t.value&&(o=o.replace(new RegExp(t.value,"gi"),(function(e){return'<span class="neo-highlight-search">'+e+"</span>"})))),o}createItems(e=!1){let t=this,n=t.vdom;n.cn=[],t.store.items.forEach((e=>{n.cn.push(t.createItem(e))})),e?t._vdom=n:t.promiseVdomUpdate().then((()=>{t.fire("createItems")}))}destroy(){let e=this;e.selectionModel&&e.selectionModel.destroy(),e.store&&e.autoDestroyStore&&e.store.destroy(),super.destroy()}focus(e){super.focus(e),e&&Neo.main.DomAccess.scrollIntoView({behavior:"auto",id:e||this.id})}getItemId(e){return this.id+"__"+e}getItemRecordId(e){let t=e.split("__")[1],n=this.store.model,o=n&&n.getField(n.keyProperty);return!o||"integer"!==o.type.toLowerCase()&&"number"!==o.type.toLowerCase()||(t=parseInt(t)),t}getKeyProperty(){return this.store.keyProperty||this.store.model.keyProperty}onClick(e){let t=this;e.path[0].id===t.id?t.onContainerClick(e):e.path[0].cls.includes(t.itemCls)&&t.onItemClick(e)}onConstructed(){super.onConstructed();let e=this;e.selectionModel&&e.selectionModel.register(e)}onContainerClick(e){this.fire("containerClick",e)}onItemClick(e){let t=this,n=e.path[0].id;!t.disableSelection&&t.selectionModel&&t.selectionModel.select(n),t.fire("itemClick",t.store.get(t.getItemRecordId(n)))}onStoreFilter(){this.createItems()}onStoreLoad(){let e=this;if(!e.mounted&&e.rendering){const t=e.on("rendered",(()=>{e.un("rendered",t),e.createItems()}))}else e.createItems()}selectItem(e){let t=this;!t.disableSelection&&t.selectionModel&&t.selectionModel.selectAt(e)}}Neo.applyClassConfig(l)},1645:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(2325),a=n(4508),r=n(3501);n(3648);const i=/data((?!(\.[a-z_]\w*\(\)))\.[a-z_]\w*)+/gi,s=/^\w*/;class l extends o.Z{static getStaticConfig(){return{observable:!0}}static getConfig(){return{className:"Neo.model.Component",ntype:"component-model",bindings_:null,component:null,data_:null,parent_:null,stores_:null}}constructor(e){Neo.currentWorker.isUsingViewModels=!0,super(e),this.bindings={}}addDataProperty(e,t){let n,o,a=this;Neo.ns(e,!0,a.data),n=a.getDataScope(e),o=n.scope,o[n.key]=t,a.createDataProperties(a.data,"data")}afterSetData(e,t){e&&this.createDataProperties(e,"data")}beforeGetData(e){return e||{}}beforeSetParent(e,t){return e||this.getParent()}beforeSetStores(e,t){return e&&Object.entries(e).forEach((([t,n])=>{e[t]=a.Z.beforeSetInstance(n)})),e}callFormatter(e,t=null){return t||(t=this.getHierarchyData()),e.call(this,t)}createBinding(e,t,n,o){let a,r,i=this,s=i.getDataScope(t),l=s.scope,c=s.key;l&&l.hasOwnProperty(c)?(a=Neo.ns(`${t}.${e}`,!0,i.bindings),a[n]=o):(r=i.getParent(),r?r.createBinding(e,t,n,o):console.error("No model.Component found with the specified data property",e,c,n))}createBindingByFormatter(e,t,n){let o=this;o.getFormatterVariables(t).forEach((a=>{o.createBinding(e,a,n,t)}))}createBindings(e){Object.entries(e.bind).forEach((([t,n])=>{Neo.isObject(n)&&(n=n.value),this.isStoreValue(n)||this.createBindingByFormatter(e.id,n,t)}))}createDataProperties(e,t){let n,o,a,r=this,i=Neo.ns(t,!1,r);Object.entries(e).forEach((([s,l])=>{s.startsWith("_")||(n=Object.getOwnPropertyDescriptor(i,s),a=`${t}.${s}`,"object"==typeof n&&"function"==typeof n.set||(o=e[s],r.createDataProperty(s,a,i),i[s]=o),Neo.isObject(l)&&r.createDataProperties(e[s],a))}))}createDataProperty(e,t,n=this.data){let o=this;t&&t.startsWith("data.")&&(t=t.substring(5)),Object.defineProperty(n,e,{get:()=>n["_"+e],set(a){let r=`_${e}`,i=n[r];n[r]?n[r]=a:Object.defineProperty(n,r,{enumerable:!1,value:a,writable:!0}),a!==i&&o.onDataPropertyChange(t||e,a,i)}})}getData(e,t=this){let n,o=this.getDataScope(e),a=o.scope,r=o.key;return a&&a.hasOwnProperty(r)?a[r]:(n=this.getParent(),n||console.error(`data property '${e}' does not exist.`,t),n.getData(e,t))}getDataScope(e){let t=e,n=this.data;return e.includes(".")&&(t=(e=e.split(".")).pop(),n=Neo.ns(e.join("."),!1,n)),{key:t,scope:n}}getFormatterVariables(e){if(Neo.isFunction(e)&&(e=e.toString()),"dist/production"===Neo.config.environment){let t=e.match(s)[0],n=new RegExp(`(^|[^\\w.])(${t})(?!\\w)`,"g");e=e.replace(n,"$1data")}let t=e.match(i)||[],n=[];return t.forEach((e=>{e=e.substr(5),r.Z.add(n,e)})),n.sort(),n}getHierarchyData(e=this.getPlainData()){let t=this,n=t.getParent();return n?{...n.getHierarchyData(e),...t.getPlainData()}:t.getPlainData()}getPlainData(e=this.data){let t={};return Object.entries(e).forEach((([e,n])=>{"Object"===Neo.typeOf(n)?t[e]=this.getPlainData(n):t[e]=n})),t}getParent(){let e,t,n=this;return n.parent?n.parent:(t=n.component.parentId,e=t&&Neo.getComponent(t),e&&e.getModel()||null)}getStore(e,t=this){let n,o=this.stores;return o&&o.hasOwnProperty(e)?o[e]:(n=this.getParent(),n||console.error(`store '${e}' found inside this model or parents.`,t),n.getStore(e,t))}internalSetData(e,t,n){let o,a,r,i,s=this;Neo.isObject(e)?(console.log(e),Object.entries(e).forEach((([e,t])=>{s.internalSetData(e,t,n)}))):(o=s.getDataScope(e),i=o.scope,a=o.key,i&&i.hasOwnProperty(a)?i[a]=t:n?(r=s.getParent(),r?r.internalSetData(e,t,n):n.addDataProperty(e,t)):s.addDataProperty(e,t))}isStoreValue(e){return Neo.isString(e)&&e.startsWith("stores.")}onDataPropertyChange(e,t,n){let o,a,r,i,s=this,l=s.bindings&&Neo.ns(e,!1,s.bindings);l&&(r={},Object.entries(l).forEach((([e,t])=>{o=Neo.getComponent(e)||Neo.get(e),a={},i=o.getModel(),r[i.id]||(r[i.id]=i.getHierarchyData()),Object.entries(t).forEach((([e,t])=>{a[e]=i.callFormatter(t,r[i.id])})),o&&o.set(a)}))),s.fire("dataPropertyChange",{key:e,id:s.id,oldValue:n,value:t})}parseConfig(e=this.component){let t=this,n={};e.bind&&(t.createBindings(e),Object.entries(e.bind).forEach((([o,a])=>{Neo.isObject(a)&&(a=a.value),t.isStoreValue(a)?t.resolveStore(e,o,a.substring(7)):n[o]=t.callFormatter(a)})),e.set(n))}removeBindings(e){let t=this.getParent();Object.entries(this.bindings).forEach((([t,n])=>{delete n[e]})),t&&t.removeBindings(e)}resolveStore(e,t,n,o=this){e[t]=this.getStore(n)}setData(e,t){this.internalSetData(e,t,this)}setDataAtSameLevel(e,t){this.internalSetData(e,t)}}Neo.applyClassConfig(l)}}]);