(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[6934],{9347:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(4508),o=s(3452),i=s(2785),l=s(3501),r=s(7816);class a extends o.Z{static getConfig(){return{className:"Neo.list.Base",ntype:"list",autoDestroyStore:!0,cls:["neo-list-container","neo-list"],disableSelection_:!1,displayField:"name",draggable_:!1,dragZone:null,dragZoneConfig:null,highlightFilterValue:!0,itemCls:"neo-list-item",itemTagName:"li",keys:{},selectionModel_:null,silentSelect:!1,store_:null,useCheckBoxes_:!1,_vdom:{tag:"ul",cn:[]}}}constructor(e){super(e);let t=this,s=t.domListeners;s.push({click:{fn:t.onClick,scope:t}}),t.domListeners=s}afterSetDisableSelection(e,t){let s=this;e&&s.rendered&&s.selectionModel&&s.selectionModel.deselectAll()}afterSetDraggable(e,t){let n=this;e&&!n.dragZone&&s.e(4023).then(s.bind(s,4023)).then((e=>{n.dragZone=Neo.create({module:e.default,appName:n.appName,owner:n,...n.dragZoneConfig})}))}afterSetSelectionModel(e,t){this.rendered&&e.register(this)}afterSetStore(e,t){let s=this;e?.on({filter:s.onStoreFilter,load:s.onStoreLoad,recordChange:s.onStoreRecordChange,scope:s}),e?.getCount()>0&&s.onStoreLoad()}afterSetUseCheckBoxes(e,t){let s=this.cls;l.Z[e?"add":"remove"](s,"neo-use-checkicons"),this.cls=s}beforeSetSelectionModel(e,t){return t&&t.destroy(),n.Z.beforeSetInstance(e,i.Z)}beforeSetStore(e,t){return t&&t.destroy(),n.Z.beforeSetInstance(e,r.Z)}createItem(e,t){let s,n=this,o=[n.itemCls],i=n.createItemContent(e,t),l=n.getItemId(e[n.getKeyProperty()]),r=n.selectionModel;switch(!n.disableSelection&&r&&r.isSelected(l)&&o.push(r.selectedCls),s={tag:n.itemTagName,cls:o,id:n.getItemId(e[n.getKeyProperty(l)]),tabIndex:-1},Neo.typeOf(i)){case"Array":s.cn=i;break;case"Object":Object.assign(s,i);break;case"String":s.html=i}return s}createItemContent(e,t){let s,n=this,o=e[n.displayField];return n.highlightFilterValue&&(s=n.store.getFilter(n.displayField),s&&null!==s.value&&""!==s.value&&(o=o.replace(new RegExp(s.value,"gi"),(function(e){return'<span class="neo-highlight-search">'+e+"</span>"})))),o}createItems(e=!1){let t=this,s=t.vdom;s.cn=[],t.store.items.forEach(((e,n)=>{s.cn.push(t.createItem(e,n))})),e?t._vdom=s:t.promiseVdomUpdate().then((()=>{t.fire("createItems")}))}destroy(){let e=this;e.selectionModel&&e.selectionModel.destroy(),e.store&&e.autoDestroyStore&&e.store.destroy(),super.destroy()}focus(e){super.focus(e),e&&Neo.main.DomAccess.scrollIntoView({behavior:"auto",id:e||this.id})}getItemId(e){return`${this.id}__${e}`}getItemRecordId(e){let t=e.split("__")[1],s=this.store.model,n=s?.getField(s.keyProperty);return"integer"!==n?.type.toLowerCase()&&"number"!==n?.type.toLowerCase()||(t=parseInt(t)),t}getKeyProperty(){return this.store.keyProperty||this.store.model.keyProperty}onClick(e){let t,s=this;if(e.path[0].id===s.id)s.onContainerClick(e);else for(t of e.path)if(t.cls.includes(s.itemCls)){s.onItemClick(t,e);break}}onConstructed(){super.onConstructed();let e=this;e.selectionModel&&e.selectionModel.register(e)}onContainerClick(e){this.fire("containerClick",e)}onItemClick(e,t){let s=this;!s.disableSelection&&s.selectionModel&&s.selectionModel.select(e.id),s.fire("itemClick",s.store.get(s.getItemRecordId(e.id)))}onStoreFilter(){this.createItems()}onStoreLoad(){let e=this;if(!e.mounted&&e.rendering){const t=e.on("rendered",(()=>{e.un("rendered",t),e.createItems()}))}else e.createItems()}onStoreRecordChange(e){let t=this,s=e.index,n=t.vdom;n.cn[s]=t.createItem(e.record,s),t.vdom=n}selectItem(e){let t=this;!t.disableSelection&&t.selectionModel&&t.selectionModel.selectAt(e)}}Neo.applyClassConfig(a)},6934:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(9347),o=s(2785);class i extends o.Z{static getConfig(){return{className:"Neo.selection.menu.ListModel",ntype:"selection-menu-listmodel"}}onKeyDownLeft(e){let t=this.view,s=t.parentMenu;s&&(t.selectionModel.deselectAll(),s.selectionModel.selectAt(t.parentIndex))}onKeyDownRight(e){let t=this.view.activeSubMenu;t&&t.selectionModel.selectAt(0)}}Neo.applyClassConfig(i);var l=s(3501),r=s(4450);class a extends n.Z{static getConfig(){return{className:"Neo.menu.List",ntype:"menu-list",activeSubMenu:null,cls:["neo-menu-list","neo-list"],floating_:!1,items_:null,parentIndex:0,parentMenu:null,selectionModel:i,store:r.Z,subMenuGap:0,subMenuMap:null}}afterSetFloating(e,t){let s=this.cls;l.Z[e?"add":"remove"](s,"neo-floating"),this.cls=s}afterSetItems(e,t){let s=this.store;t&&s.remove(t),e&&s.add(e)}createItemContent(e,t){let s=this,n=e[s.store.keyProperty],o=[{tag:"span",cls:["neo-content"],html:e[s.displayField]}];return e.iconCls&&""!==e.iconCls&&o.unshift({tag:"i",cls:["neo-icon",e.iconCls],id:s.getIconId(n)}),s.hasChildren(e)&&o.push({tag:"i",cls:["neo-arrow-icon","neo-icon","fas fa-chevron-right"],id:s.getArrowIconId(n)}),o}destroy(...e){let t=this,s=t.activeSubMenu,n=t.subMenuMap;t.store.destroy(),t.store=null,s&&(s.unmount(),t.activeSubMenu=null),Object.entries(n).forEach((([e,t])=>{t.destroy(),n[e]=null})),super.destroy(...e)}getArrowIconId(e){return`${this.id}__arrow_icon__${e}`}getIconId(e){return`${this.id}__icon__${e}`}hasChildren(e){return Array.isArray(e.items)&&e.items.length>0}hideSubMenu(){let e=this.activeSubMenu;e&&(e.unmount(),this.activeSubMenu=null)}onSelect(e){let t=this,s=e[0],n=t.store.get(t.getItemRecordId(s));t.hasChildren(n)?t.showSubMenu(s,n):t.hideSubMenu()}showSubMenu(e,t){let s,n,o=this,i=o.store,l=t[i.keyProperty],r=o.subMenuMap||{},c=r[`menu__${l}`];c?.mounted||Neo.main.DomAccess.getBoundingClientRect({appName:o.appName,id:e}).then((e=>{n={left:`${e.right+o.subMenuGap}px`,top:e.top-1+"px"},c?(s=c.style,Object.assign(s,n),c.setSilent({style:s})):r[`menu__${l}`]=c=Neo.create({module:a,appName:o.appName,floating:!0,items:t.items,parentId:Neo.apps[o.appName].mainView.id,parentIndex:i.indexOf(t),parentMenu:o,style:n}),o.activeSubMenu=c,o.subMenuMap=r,c.render(!0)}))}unmount(){this.selectionModel.deselectAll(!0),this.hideSubMenu(),super.unmount()}}Neo.applyClassConfig(a)},4450:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s(231);class o extends n.Z{static getConfig(){return{className:"Neo.menu.Model",keyProperty:"id",fields:[{name:"iconCls",type:"String"},{name:"id",type:"Integer"},{name:"items",type:"Array"},{name:"name",type:"String"}]}}}Neo.applyClassConfig(o);var i=s(7816);class l extends i.Z{static getConfig(){return{className:"Neo.menu.Store",model:o}}}Neo.applyClassConfig(l)},2785:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(4896);class o extends n.Z{static getConfig(){return{className:"Neo.selection.ListModel",ntype:"selection-listmodel",stayInList:!0}}onKeyDownDown(e){this.view.disableSelection||this.onNavKey(e,1)}onKeyDownEnter(e){let t=this.view;t.disableSelection||t.onKeyDownEnter?.(this.getSelection()[0])}onKeyDownLeft(e){this.onKeyDownUp(e)}onKeyDownRight(e){this.onKeyDownDown(e)}onKeyDownUp(e){this.view.disableSelection||this.onNavKey(e,-1)}onNavKey(e,t){let s,n,o,i,l,r,a=this,c=a.view,d=c.store,u=d.getCount(),p=!1;for(i of e.path)if(i.cls.includes(c.itemCls)){n=i.id;break}n=n||a.items?.[0],n?(r=c.getItemRecordId(n),s=d.indexOf(r)+t,s<0?a.stayInList?s=u-1:(p=!0,c.fire("selectPreFirstItem")):s>=u&&(a.stayInList?s=0:(p=!0,c.fire("selectPostLastItem")))):s=0,p?a.deselectAll():(l=d.getAt(s),o=c.getItemId(l[a.view.getKeyProperty()]),a.select(o),c.focus(o),c.fire("itemNavigate",l))}register(e){super.register(e);let t=this.id,s=this.view;s.keys&&s.keys._keys.push({fn:"onKeyDownDown",key:"Down",scope:t},{fn:"onKeyDownEnter",key:"Enter",scope:t},{fn:"onKeyDownLeft",key:"Left",scope:t},{fn:"onKeyDownRight",key:"Right",scope:t},{fn:"onKeyDownUp",key:"Up",scope:t})}selectAt(e){let t=this.view,s=t.store.getKeyAt(e),n=s&&t.getItemId(s);n&&(this.select(n),t.focus(n))}unregister(){let e=this.id,t=this.view;t.keys&&t.keys.removeKeys([{fn:"onKeyDownDown",key:"Down",scope:e},{fn:"onKeyDownEnter",key:"Enter",scope:e},{fn:"onKeyDownLeft",key:"Left",scope:e},{fn:"onKeyDownRight",key:"Right",scope:e},{fn:"onKeyDownUp",key:"Up",scope:e}]),super.unregister()}}Neo.applyClassConfig(o)}}]);