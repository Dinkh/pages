(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[758],{758:(e,n,t)=>{"use strict";t.r(n),t.d(n,{onStart:()=>u});var o=t(1354),r=t(5763),i=t(5210),a=t(5062);class s extends i.Z{static getConfig(){return{className:"SharedDialog.DemoWindow",containerConfig:{style:{padding:"20px"}},items:[{module:a.Z,flex:"none",labelText:"Field 1"},{module:a.Z,flex:"none",labelText:"Field 2"}],wrapperStyle:{height:"40%",width:"40%"}}}}Neo.applyClassConfig(s);var l=t(3501),c=t(2325);class d extends c.Z{static getConfig(){return{className:"Neo.util.Rectangle"}}static contains(e,n){return e.bottom>=n.bottom&&e.left<=n.left&&e.right>=n.right&&e.top<=n.top}static moveBy(e,n=null,t=null){let o={...e};return Neo.isNumber(n)&&(o.left+=n,o.right+=n,o.x+=n),Neo.isNumber(t)&&(o.bottom+=t,o.top+=t,o.y+=t),o}static moveTo(e,n=null,t=null){let o={...e};return Neo.isNumber(n)&&(o.left=n,o.right=n+o.width,o.x=n),Neo.isNumber(t)&&(o.bottom=t,o.top=t+o.height,o.y=t),o}}Neo.applyClassConfig(d);const p=d;class h extends r.Z{static getConfig(){return{className:"SharedDialog.view.MainContainerController",ntype:"maincontainer-controller",connectedApps:[],currentTheme:"neo-theme-light",defaultTheme:"neo-theme-light",dockedWindowSize:500,mainWindowRect:null}}onConstructed(){super.onConstructed();let e=this;e.view.on({connect:e.onAppConnect,disconnect:e.onAppDisconnect,dragZoneCreated:e.onDragZoneCreated,scope:e})}createDialog(e){let n=this,t=n.view;e.component.disabled=!0,n.dialog=Neo.create(s,{animateTargetId:e.component.id,appName:t.appName,boundaryContainerId:null,cls:[n.currentTheme,"neo-dialog","neo-panel","neo-container"],listeners:{close:n.onWindowClose,scope:n},domListeners:[{"drag:move":n.onDragMove,"drag:start":n.onDragStart,scope:n,delegate:".neo-header-toolbar"}],dragZoneConfig:{alwaysFireDragMove:!0}})}getSecondWindowButton(){return this.view.down({iconCls:"fa fa-window-restore"})}onAppConnect(e){let n=this,t=e.appName;l.Z.add(n.connectedApps,t),"SharedDialog"!==t&&"neo-theme-light"!==n.currentTheme&&n.switchThemeForApp(t,n.currentTheme),"SharedDialog2"===t&&(n.getSecondWindowButton().disabled=!0)}onAppDisconnect(e){let n=this,t=e.appName;"SharedDialog"===t?(l.Z.remove(n.connectedApps,"SharedDialog"),Neo.Main.windowClose({names:n.connectedApps})):(l.Z.remove(n.connectedApps,t),Neo.main.addon.WindowPosition.unregisterWindow({name:t})),"SharedDialog2"===t&&(n.getSecondWindowButton().disabled=!1)}onDragMove(e){let n=p.moveTo(this.dialog.dragZone.dragElementRect,e.clientX-e.offsetX,e.clientY-e.offsetY);console.log(n),p.contains(this.mainWindowRect,n)&&(console.log("dialog contained inside main window"),console.log(e.clientX-Math.round(e.offsetX)))}onDragStart(e){for(const n of e.path)if("body"===n.tagName){this.mainWindowRect=n.rect;break}}onDragZoneCreated(e){console.log("onDragZoneCreated",e)}onWindowClose(){this.view.down({text:"Create Dialog"}).disabled=!1}openDockedWindow(e){Neo.Main.getWindowData().then((e=>{let n=e.outerHeight-78,t=e.outerWidth+e.screenLeft,o=this.dockedWindowSize,r=e.screenTop+28;Neo.Main.windowOpen({url:"../shareddialog2/index.html",windowFeatures:`height=${n},left=${t},top=${r},width=${o}`,windowName:"SharedDialog2"}),Neo.main.addon.WindowPosition.registerWindow({dock:"right",name:"SharedDialog2",size:o})}))}switchTheme(e){let n,t=this,o=e.component,r="Theme Light",i=t.dialog,a="fa fa-sun",s="neo-theme-dark";"Theme Light"===o.text&&(r="Theme Dark",a="fa fa-moon",s="neo-theme-light"),t.connectedApps.forEach((e=>{t.switchThemeForApp(e,s)})),o.set({iconCls:a,text:r}),i&&(n=i.cls,l.Z.remove(n,t.currentTheme),l.Z.add(n,s),i.cls=n),t.currentTheme=s}switchThemeForApp(e,n){let t=Neo.apps[e].mainViewInstance,o=[...t.cls];t.cls.forEach((e=>{e.includes("neo-theme")&&l.Z.remove(o,e)})),l.Z.add(o,n),t.cls=o}}Neo.applyClassConfig(h);var g=t(4959),m=t(7228);class f extends m.Z{static getConfig(){return{className:"SharedDialog.view.MainContainer",ntype:"main-container",autoMount:!0,controller:h,layout:{ntype:"vbox",align:"stretch"},style:{padding:"20px"},boundaryContainerId:"document.body",dialog:null,items:[{module:g.Z,flex:"none",items:[{module:o.Z,handler:"createDialog",iconCls:"fa fa-window-maximize",text:"Create Dialog"},"->",{module:o.Z,handler:"switchTheme",iconCls:"fa fa-moon",text:"Theme Dark"},{module:o.Z,handler:"openDockedWindow",iconCls:"fa fa-window-restore",style:{marginLeft:"1em"},text:"Open docked Window"}]},{ntype:"component",flex:1,html:"#1",style:{alignItems:"center",color:"#bbb",display:"flex",fontSize:"200px",justifyContent:"center",userSelect:"none"}}]}}}Neo.applyClassConfig(f);const u=()=>Neo.app({appPath:"apps/shareddialog/",mainView:f,name:"SharedDialog"})},5763:(e,n,t)=>{"use strict";t.d(n,{Z:()=>d});var o=t(2641),r=t(9342),i=t(1954),a=t(3949),s=t(2325);class l extends s.Z{static getConfig(){return{className:"Neo.util.Function"}}static bindAppend(e){const n=this,t=[].slice.call(arguments).slice(1);return function(){return n.apply(e,[].slice.call(arguments).concat(t))}}static createSequence(e,n,t,o){let r=e[n]||Neo.emptyFn;return e[n]=function(){return r.apply(this,arguments),t.apply(o||this,arguments)}}static intercept(e,n,t,o){let r=e[n]||Neo.emptyFn;return e[n]=function(){let e=t.apply(o||this,arguments);return r.apply(this,arguments),e}}}Neo.applyClassConfig(l);const c=l;class d extends o.Z{static getConfig(){return{className:"Neo.controller.Component",ntype:"component-controller",references:null,view_:null}}constructor(e){super(e);let n=this;n.references={},c.createSequence(n.view,"onConstructed",n.onViewConstructed,n)}beforeGetView(e,n){return Neo.get(e)}beforeSetView(e,n){return e.id}getParent(e){let n,t=this.view,o=r.Z.getParents(t),i=0,a=o.length;for(;i<a;i++)if(n=o[i].controller,n){if(!e)return n;if(e===n.ntype)return n}return null}getParentHandlerScope(e){let n,t=this.view,o=r.Z.getParents(t),i=0,a=o.length;for(;i<a;i++)if(n=o[i].controller,n&&n[e])return n;return null}getReference(e){let n,t=this,o=t.references[e];return o&&(n=Neo.getComponent(o)),n||(n=t.view.down({reference:e}),n&&(t.references[e]=n.id)),n||null}onViewConstructed(e){let n,t,o,r,s=this,l=!!e;(e=e||s.view).domListeners=Neo.clone(e.domListeners,!0,!0),n=e.domListeners,n&&(Array.isArray(n)||(n=[n]),n.forEach((n=>{Object.entries(n).forEach((([l,c])=>{t=null,"scope"!==l&&"delegate"!==l&&(Neo.isString(c)?t=c:Neo.isObject(c)&&c.hasOwnProperty("fn")&&Neo.isString(c.fn)&&(t=c.fn),t&&(s[t]?(o=s[t].bind(s),n[l]=o,i.Z.updateListenerPlaceholder({componentId:e.id,eventHandlerMethod:o,eventHandlerName:t,eventName:l,scope:s})):(r=s.getParentHandlerScope(t),r?(o=r[t].bind(r),n[l]=o,i.Z.updateListenerPlaceholder({componentId:e.id,eventHandlerMethod:o,eventHandlerName:t,eventName:l,scope:r})):a.Z.logError("Unknown domEvent handler for",e,t))))}))}))),e.listeners&&Object.entries(e.listeners).forEach((([n,o])=>{Array.isArray(o)&&o.forEach((n=>{t=null,Neo.isObject(n)&&n.hasOwnProperty("fn")&&Neo.isString(n.fn)&&(t=n.fn,s[t]?n.fn=s[t].bind(s):a.Z.logError("Unknown event handler for",e,t))}))})),e.items&&e.items.forEach((e=>{e.controller||s.onViewConstructed(e)})),l||s.onViewParsed()}onViewParsed(){}parseConfig(e){let n,t=this,o=e||t.view,r=o.domListeners;r&&(Array.isArray(r)||(r=[r]),r.forEach((e=>{Object.entries(e).forEach((([r,i])=>{n=null,"scope"!==r&&"delegate"!==r&&(Neo.isString(i)?n=i:Neo.isObject(i)&&i.hasOwnProperty("fn")&&Neo.isString(i.fn)&&(n=i.fn),n&&(t[n]?(console.log("#",r,t.id),console.log("parseConfig",n),e[r]=t[n].bind(t)):a.Z.logError("Unknown domEvent handler for",o,n)))}))}))),o.listeners&&Object.entries(o.listeners).forEach((([e,r])=>{n=null,"scope"!==e&&"delegate"!==e&&(Neo.isString(r)?n=r:Neo.isObject(r)&&r.hasOwnProperty("fn")&&Neo.isString(r.fn)&&(n=r.fn),n&&(t[n]?o.listeners[e]=t[n].bind(t):a.Z.logError("Unknown event handler for",o,n)))})),o.headers&&o.headers.forEach((e=>{e.controller||t.parseConfig(e)})),o.items&&o.items.forEach((e=>{e.controller||t.parseConfig(e)}))}}Neo.applyClassConfig(d)}}]);