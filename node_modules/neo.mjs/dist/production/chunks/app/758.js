(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[758],{758:(e,t,o)=>{"use strict";o.r(t),o.d(t,{onStart:()=>N});var n=o(1354),i=o(5177),a=o(7696),r=o(5763),d=o(5210),l=o(5062);class s extends d.Z{static getConfig(){return{className:"SharedDialog.view.DemoWindow",containerConfig:{style:{padding:"20px"}},itemDefaults:{labelWidth:70},items:[{module:l.Z,flex:"none",labelText:"Field 1"},{module:l.Z,flex:"none",labelText:"Field 2"}],wrapperStyle:{height:"40%",width:"40%"}}}}Neo.applyClassConfig(s);var c=o(3501),p=o(2325);class h extends p.Z{static getConfig(){return{className:"Neo.util.Rectangle"}}static excludes(e,t){return e.bottom<t.top||e.left>t.right||e.right<t.left||e.top>t.bottom}static getIntersection(e,t){return h.getIntersectionDetails(e,t).area}static getIntersectionDetails(e,t){let o=Math.max(0,Math.abs(e.left-t.left+e.width-t.width)),n=Math.max(0,Math.abs(e.top-t.top+e.height-t.height));return{area:o*n,x:o,y:n}}static includes(e,t){return e.bottom>=t.bottom&&e.left<=t.left&&e.right>=t.right&&e.top<=t.top}static leavesSide(e,t,o){return!h.includes(e,t)&&("bottom"===o?e.bottom<t.bottom:"left"===o?e.left>t.left:"right"===o?e.right<t.right:"top"===o?e.top>t.top:void 0)}static moveBy(e,t=null,o=null){let n={...e};return Neo.isNumber(t)&&(n.left+=t,n.right+=t,n.x+=t),Neo.isNumber(o)&&(n.bottom+=o,n.top+=o,n.y+=o),n}static moveTo(e,t=null,o=null){let n={...e};return Neo.isNumber(t)&&(n.left=t,n.right=t+n.width,n.x=t),Neo.isNumber(o)&&(n.bottom=o+n.height,n.top=o,n.y=o),n}}Neo.applyClassConfig(h);const g=h;class m extends r.Z{static getConfig(){return{className:"SharedDialog.view.MainContainerController",ntype:"maincontainer-controller",connectedApps:[],currentTheme:"neo-theme-light",defaultTheme:"neo-theme-light",dockedWindowAppName:"SharedDialog2",dockedWindowProxy:null,dockedWindowSide_:"right",dockedWindowSize:500,dialogRect:null,mainWindowRect:null,targetWindowSize:0}}onConstructed(){super.onConstructed();let e=this;e.view.on({connect:e.onAppConnect,disconnect:e.onAppDisconnect,dragZoneCreated:e.onDragZoneCreated,scope:e})}afterSetDockedWindowSide(e,t){this.hasDockedWindow()&&Neo.main.addon.WindowPosition.setDock({name:this.dockedWindowAppName,dock:e})}createDialog(e,t){let o=this;e.component.disabled=!0,o.dialog=Neo.create(s,{animateTargetId:e.component.id,appName:t,boundaryContainerId:null,cls:[o.currentTheme,"neo-dialog","neo-panel","neo-container"],listeners:{close:o.onWindowClose,scope:o},domListeners:[{"drag:end":o.onDragEnd,"drag:move":o.onDragMove,"drag:start":o.onDragStart,scope:o,delegate:".neo-header-toolbar"}],dragZoneConfig:{alwaysFireDragMove:!0}})}getOppositeSide(e){return{bottom:"top",left:"right",right:"left",top:"bottom"}[e]}getProxyPosition(e,t){let o,n,i=this,a=i.mainWindowRect;switch(t){case"bottom":o=`${e.left}px`,n=e.top-a.height+"px";break;case"left":o=`${i.targetWindowSize+e.left}px`,n=`${e.top}px`;break;case"right":o=e.left-a.width+"px",n=`${e.top}px`;break;case"top":o=`${e.left}px`,n=`${i.targetWindowSize+e.top}px`}return{left:o,top:n}}getSecondWindowButton(){return this.view.down({iconCls:"far fa-window-restore"})}hasDockedWindow(){return this.connectedApps.includes(this.dockedWindowAppName)}onAppConnect(e){let t=this,o=e.appName;c.Z.add(t.connectedApps,o),"SharedDialog"!==o&&"neo-theme-light"!==t.currentTheme&&t.switchThemeForApp(o,t.currentTheme),o===t.dockedWindowAppName&&(t.getSecondWindowButton().disabled=!0)}onAppDisconnect(e){let t=this,o=e.appName;"SharedDialog"===o?(c.Z.remove(t.connectedApps,"SharedDialog"),Neo.Main.windowClose({names:t.connectedApps})):(c.Z.remove(t.connectedApps,o),Neo.main.addon.WindowPosition.unregisterWindow({name:o})),o===t.dockedWindowAppName&&(t.getSecondWindowButton().disabled=!1)}onCreateDialogButtonClick(e){this.createDialog(e,this.view.appName)}onDockedPositionChange(e){!0===e.value&&(this.dockedWindowSide=e.component.value)}onDragEnd(e){if(this.hasDockedWindow()){let t,o,n=this,i=n.view.appName,a=n.dialog,r=n.dockedWindowAppName,d=n.mainWindowRect,l=g.moveTo(n.dialogRect,e.clientX-e.offsetX,e.clientY-e.offsetY),s=n.dockedWindowSide;n.dialog.appName===r&&(r=n.view.appName,s=n.getOppositeSide(n.dockedWindowSide)),g.leavesSide(d,l,s)&&(t=n.getProxyPosition(l,s),g.excludes(d,l)?(a.unmount(),setTimeout((()=>{a.appName=a.appName===r?i:r,o=a.wrapperStyle,o.left=t.left,o.top=t.top,a.wrapperStyle=o,n.dockedWindowProxy&&(n.dockedWindowProxy.destroy(!0),n.dockedWindowProxy=null),a.render(!0)}),70)):console.log("dialog dropped between windows"))}}onDragMove(e){if(this.hasDockedWindow()){let t,o,n=this,i=n.dialogRect,r=n.dockedWindowAppName,d=n.mainWindowRect,l=g.moveTo(i,e.clientX-e.offsetX,e.clientY-e.offsetY),s=n.dockedWindowSide;n.dialog.appName===r&&(r=n.view.appName,s=n.getOppositeSide(n.dockedWindowSide)),g.leavesSide(d,l,s)&&(t=n.getProxyPosition(l,s),n.dockedWindowProxy?n.dockedWindowProxy.style=Object.assign(n.dockedWindowProxy.style||{},t):(o=Neo.clone(n.dialog.dragZone.dragProxy.vdom,!0),delete o.id,Object.assign(o.style,{...t,transform:"none",transitionProperty:"none"}),n.dockedWindowProxy=Neo.create({module:a.Z,appName:r,autoMount:!0,autoRender:!0,cls:["neo-dialog-wrapper"],renderTo:"document.body",vdom:o})))}}onDragStart(e){let t=this,o=t.view.appName,n="left"===t.dockedWindowSide||"right"===t.dockedWindowSide;for(let o of e.path)if(o.cls.includes("neo-dialog"))t.dialogRect=o.rect;else if("body"===o.tagName){t.mainWindowRect=o.rect;break}t.hasDockedWindow()&&Neo.Main.getWindowData({appName:t.dialog.appName===o?t.dockedWindowAppName:o}).then((e=>{t.targetWindowSize=n?e.innerWidth:e.innerHeight}))}onDragZoneCreated(e){console.log("onDragZoneCreated",e)}onWindowClose(){this.view.down({text:"Create Dialog"}).disabled=!1}openDockedWindow(e){Neo.Main.getWindowData().then((e=>{let t,o,n,i,a=this,r=a.dockedWindowSide,d=a.dockedWindowSize;switch(r){case"bottom":t=d,o=e.screenLeft,n=e.outerHeight+e.screenTop-52,i=e.outerWidth;break;case"left":t=e.outerHeight-78,o=e.screenLeft-d,n=e.screenTop+28,i=d;break;case"right":t=e.outerHeight-78,o=e.outerWidth+e.screenLeft,n=e.screenTop+28,i=d;break;case"top":t=d,o=e.screenLeft,n=e.screenTop-d+28,i=e.outerWidth}Neo.Main.windowOpen({url:"../shareddialog2/index.html",windowFeatures:`height=${t},left=${o},top=${n},width=${i}`,windowName:a.dockedWindowAppName}),Neo.main.addon.WindowPosition.registerWindow({dock:r,name:a.dockedWindowAppName,size:d})}))}switchTheme(e){let t,o=this,n=e.component,i="Theme Light",a=o.dialog,r="fa fa-sun",d="neo-theme-dark";"Theme Light"===n.text&&(i="Theme Dark",r="fa fa-moon",d="neo-theme-light"),o.connectedApps.forEach((e=>{o.switchThemeForApp(e,d)})),n.set({iconCls:r,text:i}),a&&(t=a.cls,c.Z.remove(t,o.currentTheme),c.Z.add(t,d),a.cls=t),o.currentTheme=d}switchThemeForApp(e,t){let o=Neo.apps[e].mainViewInstance,n=[...o.cls];o.cls.forEach((e=>{e.includes("neo-theme")&&c.Z.remove(n,e)})),c.Z.add(n,t),o.cls=n}}Neo.applyClassConfig(m);var u=o(4959),f=o(7228);class w extends f.Z{static getConfig(){return{className:"SharedDialog.view.MainContainer",ntype:"main-container",autoMount:!0,controller:m,layout:{ntype:"vbox",align:"stretch"},style:{padding:"20px"},boundaryContainerId:"document.body",dialog:null,items:[{module:u.Z,flex:"none",items:[{module:n.Z,handler:"onCreateDialogButtonClick",iconCls:"far fa-window-maximize",text:"Create Dialog"},"->",{module:n.Z,handler:"switchTheme",iconCls:"fa fa-moon",text:"Theme Dark"},{module:n.Z,handler:"openDockedWindow",iconCls:"far fa-window-restore",style:{marginLeft:"1em"},text:"Open docked Window"}]},{ntype:"container",flex:"none",layout:"hbox",style:{height:"72px",marginRight:"1em",marginTop:"1em"},items:[{ntype:"component",flex:1},{ntype:"container",flex:"none",itemDefaults:{module:i.Z,hideValueLabel:!1,labelText:"",labelWidth:50,name:"dockedPosition",listeners:{change:"onDockedPositionChange"}},items:[{labelText:"Dock",valueLabelText:"Top",value:"top"},{checked:!0,valueLabelText:"Right",value:"right"},{valueLabelText:"Bottom",value:"bottom"},{valueLabelText:"Left",value:"left"}]}]},{ntype:"component",flex:1,html:"#1",style:{alignItems:"center",color:"#bbb",display:"flex",fontSize:"200px",justifyContent:"center",marginBottom:"88px",userSelect:"none"}}]}}}Neo.applyClassConfig(w);const N=()=>Neo.app({appPath:"apps/shareddialog/",mainView:w,name:"SharedDialog"})},5763:(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});var n=o(2641),i=o(9342),a=o(1954),r=o(3949),d=o(2325);class l extends d.Z{static getConfig(){return{className:"Neo.util.Function"}}static bindAppend(e){const t=this,o=[].slice.call(arguments).slice(1);return function(){return t.apply(e,[].slice.call(arguments).concat(o))}}static createSequence(e,t,o,n){let i=e[t]||Neo.emptyFn;return e[t]=function(){return i.apply(this,arguments),o.apply(n||this,arguments)}}static intercept(e,t,o,n){let i=e[t]||Neo.emptyFn;return e[t]=function(){let e=o.apply(n||this,arguments);return i.apply(this,arguments),e}}}Neo.applyClassConfig(l);const s=l;class c extends n.Z{static getConfig(){return{className:"Neo.controller.Component",ntype:"component-controller",references:null,view_:null}}constructor(e){super(e);let t=this;t.references={},s.createSequence(t.view,"onConstructed",t.onViewConstructed,t)}beforeGetView(e,t){return Neo.get(e)}beforeSetView(e,t){return e.id}getParent(e){let t,o=this.view,n=i.Z.getParents(o),a=0,r=n.length;for(;a<r;a++)if(t=n[a].controller,t){if(!e)return t;if(e===t.ntype)return t}return null}getParentHandlerScope(e){let t,o=this.view,n=i.Z.getParents(o),a=0,r=n.length;for(;a<r;a++)if(t=n[a].controller,t&&t[e])return t;return null}getReference(e){let t,o=this,n=o.references[e];return n&&(t=Neo.getComponent(n)),t||(t=o.view.down({reference:e}),t&&(o.references[e]=t.id)),t||null}onViewConstructed(e){let t,o,n,i,d=this,l=!!e;(e=e||d.view).domListeners=Neo.clone(e.domListeners,!0,!0),t=e.domListeners,t&&(Array.isArray(t)||(t=[t]),t.forEach((t=>{Object.entries(t).forEach((([l,s])=>{o=null,"scope"!==l&&"delegate"!==l&&(Neo.isString(s)?o=s:Neo.isObject(s)&&s.hasOwnProperty("fn")&&Neo.isString(s.fn)&&(o=s.fn),o&&(d[o]?(n=d[o].bind(d),t[l]=n,a.Z.updateListenerPlaceholder({componentId:e.id,eventHandlerMethod:n,eventHandlerName:o,eventName:l,scope:d})):(i=d.getParentHandlerScope(o),i?(n=i[o].bind(i),t[l]=n,a.Z.updateListenerPlaceholder({componentId:e.id,eventHandlerMethod:n,eventHandlerName:o,eventName:l,scope:i})):r.Z.logError("Unknown domEvent handler for",e,o))))}))}))),e.listeners&&Object.entries(e.listeners).forEach((([t,n])=>{Array.isArray(n)&&n.forEach((t=>{o=null,Neo.isObject(t)&&t.hasOwnProperty("fn")&&Neo.isString(t.fn)&&(o=t.fn,d[o]?t.fn=d[o].bind(d):r.Z.logError("Unknown event handler for",e,o))}))})),e.items&&e.items.forEach((e=>{e.controller||d.onViewConstructed(e)})),l||d.onViewParsed()}onViewParsed(){}parseConfig(e){let t,o=this,n=e||o.view,i=n.domListeners;i&&(Array.isArray(i)||(i=[i]),i.forEach((e=>{Object.entries(e).forEach((([i,a])=>{t=null,"scope"!==i&&"delegate"!==i&&(Neo.isString(a)?t=a:Neo.isObject(a)&&a.hasOwnProperty("fn")&&Neo.isString(a.fn)&&(t=a.fn),t&&(o[t]?(console.log("#",i,o.id),console.log("parseConfig",t),e[i]=o[t].bind(o)):r.Z.logError("Unknown domEvent handler for",n,t)))}))}))),n.listeners&&Object.entries(n.listeners).forEach((([e,i])=>{t=null,"scope"!==e&&"delegate"!==e&&(Neo.isString(i)?t=i:Neo.isObject(i)&&i.hasOwnProperty("fn")&&Neo.isString(i.fn)&&(t=i.fn),t&&(o[t]?n.listeners[e]=o[t].bind(o):r.Z.logError("Unknown event handler for",n,t)))})),n.headers&&n.headers.forEach((e=>{e.controller||o.parseConfig(e)})),n.items&&n.items.forEach((e=>{e.controller||o.parseConfig(e)}))}}Neo.applyClassConfig(c)},5177:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var n=o(7875),i=o(9342);class a extends n.Z{static getConfig(){return{className:"Neo.form.field.Radio",ntype:"radiofield",cls:["neo-radiofield"],inputType:"radio",_vdom:{cn:[{tag:"label",cls:["neo-radio-label"]},{tag:"input",cls:["neo-radio-input"]},{tag:"label",cls:["neo-radio-value-label"]}]}}}afterSetChecked(e,t){super.afterSetChecked(e,t),e&&this.uncheckGroupItems()}onInputValueChange(e){super.onInputValueChange(e),this.uncheckGroupItems()}uncheckGroupItems(){let e,t=this;e=i.Z.find({ntype:"radiofield",name:t.name}),e.forEach((e=>{e.id!==t.id&&e._checked&&(e._checked=!1,e.vdom.cn[1].checked=!1,e.vnode&&(e.vnode.childNodes[t.hideLabel?0:1].attributes.checked="false"),e.fire("change",{component:t,oldValue:!0,value:!1}))}))}}Neo.applyClassConfig(a)}}]);