(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[1704],{7703:(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});var s=o(4508),n=o(3452),i=o(4896);class r extends i.Z{static getConfig(){return{className:"Neo.selection.ListModel",ntype:"selection-listmodel",stayInList:!0}}onKeyDownDown(e){this.view.disableSelection||this.onNavKey(e,1)}onKeyDownEnter(e){let t=this.view;t.disableSelection||t.onKeyDownEnter?.(this.getSelection()[0])}onKeyDownLeft(e){this.onKeyDownUp(e)}onKeyDownRight(e){this.onKeyDownDown(e)}onKeyDownUp(e){this.view.disableSelection||this.onNavKey(e,-1)}onNavKey(e,t){let o,s,n,i,r,l,a=this,c=a.view,d=c.store,g=d.getCount(),h=!1;for(i of e.path)if(i.cls.includes(c.itemCls)){s=i.id;break}s=s||a.items?.[0],s?(l=c.getItemRecordId(s),o=d.indexOf(l)+t,o<0?a.stayInList?o=g-1:(h=!0,c.fire("selectPreFirstItem")):o>=g&&(a.stayInList?o=0:(h=!0,c.fire("selectPostLastItem")))):o=0,h?a.deselectAll():(r=d.getAt(o),n=c.getItemId(r[a.view.getKeyProperty()]),a.select(n),c.focus(n),c.fire("itemNavigate",r))}register(e){super.register(e);let t=this.id,o=this.view;o.keys&&o.keys._keys.push({fn:"onKeyDownDown",key:"Down",scope:t},{fn:"onKeyDownEnter",key:"Enter",scope:t},{fn:"onKeyDownLeft",key:"Left",scope:t},{fn:"onKeyDownRight",key:"Right",scope:t},{fn:"onKeyDownUp",key:"Up",scope:t})}selectAt(e){let t=this.view,o=t.store.getKeyAt(e),s=o&&t.getItemId(o);s&&(this.select(s),t.focus(s))}unregister(){let e=this.id,t=this.view;t.keys&&t.keys.removeKeys([{fn:"onKeyDownDown",key:"Down",scope:e},{fn:"onKeyDownEnter",key:"Enter",scope:e},{fn:"onKeyDownLeft",key:"Left",scope:e},{fn:"onKeyDownRight",key:"Right",scope:e},{fn:"onKeyDownUp",key:"Up",scope:e}]),super.unregister()}}Neo.applyClassConfig(r);var l=o(3501),a=o(7816);class c extends n.Z{static getConfig(){return{className:"Neo.list.Base",ntype:"list",autoDestroyStore:!0,cls:["neo-list-container","neo-list"],disableSelection_:!1,displayField:"name",draggable_:!1,dragZone:null,dragZoneConfig:null,highlightFilterValue:!0,itemCls:"neo-list-item",itemTagName:"li",keys:{},selectionModel_:null,silentSelect:!1,store_:null,useCheckBoxes_:!1,_vdom:{tag:"ul",cn:[]}}}constructor(e){super(e);let t=this,o=t.domListeners;o.push({click:{fn:t.onClick,scope:t}}),t.domListeners=o}afterSetDisableSelection(e,t){let o=this;e&&o.rendered&&o.selectionModel&&o.selectionModel.deselectAll()}afterSetDraggable(e,t){let s=this;e&&!s.dragZone&&o.e(4023).then(o.bind(o,4023)).then((e=>{s.dragZone=Neo.create({module:e.default,appName:s.appName,owner:s,...s.dragZoneConfig})}))}afterSetSelectionModel(e,t){this.rendered&&e.register(this)}afterSetStore(e,t){let o=this;e?.on({filter:o.onStoreFilter,load:o.onStoreLoad,recordChange:o.onStoreRecordChange,scope:o}),e?.getCount()>0&&o.onStoreLoad()}afterSetUseCheckBoxes(e,t){let o=this.cls;l.Z[e?"add":"remove"](o,"neo-use-checkicons"),this.cls=o}beforeSetSelectionModel(e,t){return t&&t.destroy(),s.Z.beforeSetInstance(e,r)}beforeSetStore(e,t){return t&&t.destroy(),s.Z.beforeSetInstance(e,a.Z)}createItem(e,t){let o,s=this,n=[s.itemCls],i=s.createItemContent(e,t),r=s.getItemId(e[s.getKeyProperty()]),l=s.selectionModel;switch(!s.disableSelection&&l&&l.isSelected(r)&&n.push(l.selectedCls),o={tag:s.itemTagName,cls:n,id:s.getItemId(e[s.getKeyProperty(r)]),tabIndex:-1},Neo.typeOf(i)){case"Array":o.cn=i;break;case"Object":Object.assign(o,i);break;case"String":o.html=i}return o}createItemContent(e,t){let o,s=this,n=e[s.displayField];return s.highlightFilterValue&&(o=s.store.getFilter(s.displayField),o&&null!==o.value&&""!==o.value&&(n=n.replace(new RegExp(o.value,"gi"),(function(e){return'<span class="neo-highlight-search">'+e+"</span>"})))),n}createItems(e=!1){let t=this,o=t.vdom;o.cn=[],t.store.items.forEach(((e,s)=>{o.cn.push(t.createItem(e,s))})),e?t._vdom=o:t.promiseVdomUpdate().then((()=>{t.fire("createItems")}))}destroy(){let e=this;e.selectionModel&&e.selectionModel.destroy(),e.store&&e.autoDestroyStore&&e.store.destroy(),super.destroy()}focus(e){super.focus(e),e&&Neo.main.DomAccess.scrollIntoView({behavior:"auto",id:e||this.id})}getItemId(e){return`${this.id}__${e}`}getItemRecordId(e){let t=e.split("__")[1],o=this.store.model,s=o?.getField(o.keyProperty);return"integer"!==s?.type.toLowerCase()&&"number"!==s?.type.toLowerCase()||(t=parseInt(t)),t}getKeyProperty(){return this.store.keyProperty||this.store.model.keyProperty}onClick(e){let t,o=this;if(e.path[0].id===o.id)o.onContainerClick(e);else for(t of e.path)if(t.cls.includes(o.itemCls)){o.onItemClick(t,e);break}}onConstructed(){super.onConstructed();let e=this;e.selectionModel&&e.selectionModel.register(e)}onContainerClick(e){this.fire("containerClick",e)}onItemClick(e,t){let o=this;!o.disableSelection&&o.selectionModel&&o.selectionModel.select(e.id),o.fire("itemClick",o.store.get(o.getItemRecordId(e.id)))}onStoreFilter(){this.createItems()}onStoreLoad(){let e=this;if(!e.mounted&&e.rendering){const t=e.on("rendered",(()=>{e.un("rendered",t),e.createItems()}))}else e.createItems()}onStoreRecordChange(e){let t=this,o=e.index,s=t.vdom;s.cn[o]=t.createItem(e.record,o),t.vdom=s}selectItem(e){let t=this;!t.disableSelection&&t.selectionModel&&t.selectionModel.selectAt(e)}}Neo.applyClassConfig(c)},1704:(e,t,o)=>{"use strict";o.d(t,{Z:()=>r});var s=o(7703),n=o(3501),i=o(4450);class r extends s.Z{static getConfig(){return{className:"Neo.menu.List",ntype:"menu-list",cls:["neo-menu-list","neo-list"],floating_:!1,items_:null,store:i.Z}}afterSetFloating(e,t){let o=this.cls;n.Z[e?"add":"remove"](o,"neo-floating"),this.cls=o}afterSetItems(e,t){let o=this.store;t&&o.remove(t),e&&o.add(e)}createItemContent(e,t){let o=this,s=e[o.store.keyProperty],n=[{tag:"span",cls:["neo-content"],html:e[o.displayField]}];return e.iconCls&&""!==e.iconCls&&n.unshift({tag:"i",cls:["neo-icon",e.iconCls],id:o.getIconId(s)}),o.hasChildren(e)&&n.push({tag:"i",cls:["neo-arrow-icon","fas fa-chevron-right"],id:o.getArrowIconId(s)}),n}createSubMenu(e,t){console.log("createSubMenu",e,t);let o=this;Neo.main.DomAccess.getBoundingClientRect({appName:o.appName,id:e}).then((e=>{console.log(e);let s=Neo.create({module:r,appName:o.appName,autoRender:!0,autoMount:!0,floating:!0,items:t.items,style:{left:`${e.right}px`,top:e.top-1+"px"}});console.log(s)}))}getArrowIconId(e){return`${this.id}__arrow_icon__${e}`}getIconId(e){return`${this.id}__icon__${e}`}hasChildren(e){return Array.isArray(e.items)&&e.items.length>0}onSelect(e){let t=this,o=e[0],s=t.store.get(t.getItemRecordId(o));t.hasChildren(s)&&t.createSubMenu(o,s)}}Neo.applyClassConfig(r)},4450:(e,t,o)=>{"use strict";o.d(t,{Z:()=>r});var s=o(231);class n extends s.Z{static getConfig(){return{className:"Neo.menu.Model",keyProperty:"id",fields:[{name:"iconCls",type:"String"},{name:"id",type:"Integer"},{name:"items",type:"Array"},{name:"name",type:"String"}]}}}Neo.applyClassConfig(n);var i=o(7816);class r extends i.Z{static getConfig(){return{className:"Neo.menu.Store",model:n}}}Neo.applyClassConfig(r)}}]);