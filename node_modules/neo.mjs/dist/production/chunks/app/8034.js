(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[8034],{8034:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>D});var a=n(3452),o=n(6076),r=n(1735),i=n(8192),s=n(3501),d=n(524);class l extends i.default{static getConfig(){return{className:"Neo.calendar.view.week.EventDragZone",addDragProxyCls:!1,enableResizingAcrossOppositeEdge:!0,axisEndTime:0,axisStartTime:0,columnHeight:0,columnTop:0,currentInterval:0,eventDuration:0,eventRecord:null,forceUpdate:!1,hasOverflow:!1,intervalSize:15,keepEndDate:!1,keepStartDate:!1,moveHorizontal:!1,moveInMainThread:!1,newEndDate:null,newStartDate:null,scrollFactorLeft:3,useProxyWrapper:!1}}addBodyCursorCls(){Neo.applyDeltas(this.appName,{id:"document.body",cls:{add:["neo-cursor-move"]}})}adjustEndDate(e){return 0===e.getHours()&&0===e.getMinutes()?e.setMinutes(e.getMinutes()-1):23===e.getHours()&&59===e.getMinutes()||e.getMinutes()%this.intervalSize==0||e.setMinutes(e.getMinutes()+1),e}afterSetProxyParentId(e,t){if(e&&void 0!==t){let t=this;t.dragProxy?.vdom.cn[0].id&&Neo.applyDeltas(t.appName,{action:"moveNode",id:t.dragProxy.id,index:0,parentId:e})}}createDragProxy(e){let t=this,n=Neo.getComponent(t.getDragElementRoot().id)||t.owner,a=t.dragProxyConfig?.vdom,o=d.Z.clone(a||t.dragElement);o.cn[2].removeDom=!1;const i={module:r.Z,appName:t.appName,moveInMainThread:t.moveInMainThread,parentId:t.proxyParentId,...t.dragProxyConfig,vdom:t.useProxyWrapper?{cn:[o]}:o};i.cls=i.cls||[],i.cls.push("neo-focus"),n&&i.cls.push(n.getTheme()),o.cls&&!t.useProxyWrapper&&i.cls.push(...o.cls),t.addDragProxyCls&&s.Z.add(i.cls,t.dragProxyCls),Object.assign(i.style,{height:`${e.height}px`,top:e.y-t.columnTop+"px",width:`${e.width}px`}),t.dragProxy=Neo.create(i)}dragEnd(e){super.dragEnd(e);let t,n,a=this,r=a.owner,i=a.eventRecord;a.keepStartDate?(t=a.newEndDate,n=a.newStartDate||i.startDate):(n=new Date(d.Z.findVdomChild(r.vdom,a.proxyParentId).vdom.flag+"T00:00:00"),n.setHours(a.axisStartTime),n.setMinutes(a.currentInterval*a.intervalSize),a.keepEndDate?(t=a.newEndDate||i.endDate,n=a.newStartDate||n):(t=o.Z.clone(n),t.setMinutes(t.getMinutes()+a.eventDuration))),t=a.adjustEndDate(t),i.setSilent({endDate:t,startDate:n}),Object.assign(a,{hasOverflow:!1,keepEndDate:!1,keepStartDate:!1,newEndDate:null,newStartDate:null,proxyParentId:null}),r.getModel().getStore("events").doSort(),r.updateEvents()}dragMove(e){let t,n,a,r,i,s,d,l,c,m,g,u,h,p,v,D=this,f=D.axisEndTime,y=D.axisStartTime,w=D.columnHeight,C=D.eventDuration,E=0,S=D.intervalSize,x=D.keepEndDate,T=D.keepStartDate,b=e.targetPath,M=b.length,H=D.owner,_=D.eventRecord,N=!1,P=H.timeAxis;if(D.dragProxy){if(!x&&!T)for(;E<M;E++)if(b[E].cls.includes("neo-c-w-column")){D.proxyParentId=b[E].id;break}if(m=60*(f-y)/S,c=w/m,h=Math.min(w,e.clientY-D.offsetY-D.columnTop),n=Math.floor(h/c),i=o.Z.clone(_.endDate),p=o.Z.clone(_.startDate),x&&y>p.getHours()&&(p.setHours(y),p.setMinutes(0),C=(i-p)/60/1e3),T&&f<i.getHours()&&(i.setHours(f),i.setMinutes(0),C=(i-p)/60/1e3),x||(n=Math.min(n,m-C/S)),a=[{id:D.dragProxy.id,style:{}}],x||T)if(t=o.Z.clone(_.startDate),t.setHours(y),t.setMinutes(0),u=H.minimumEventDuration/S,v=(_.startDate-t)/S/60/1e3,x){if(g=v+C/S,D.enableResizingAcrossOppositeEdge){if(D.forceUpdate&&n>g-u&&n<g+u)return;n>=g+u?(N=!0,D.forceUpdate=!0,i.setHours(y),i.setMinutes(n*S),i=D.adjustEndDate(i),D.newEndDate=i,p.setHours(y),p.setMinutes(g*S),D.newStartDate=p,r=(i-p)/60/60/1e3,a[0].style.top=`calc(${g*c/w*100}% + 1px)`):(D.forceUpdate=!1,D.newStartDate=null)}N||(n=Math.min(n,g-u))}else if(T){if(g=v-C/S,D.enableResizingAcrossOppositeEdge)if(n=Math.max(-C/S,n),n<=g-u)N=!0,D.forceUpdate=!0,i.setHours(y),i.setMinutes(C+g*S),i=D.adjustEndDate(i),D.newEndDate=i,p.setHours(y),p.setMinutes(C+n*S),D.newStartDate=p,r=(i-p)/60/60/1e3,h=(C/S+n)*c,h=h/w*100,a[0].style.top=`calc(${h}% + 1px)`;else{if(D.forceUpdate&&n<g+u)return;D.forceUpdate&&n>=g+u&&D.currentInterval!==n&&(D.forceUpdate=!1,D.newStartDate=null,a[0].style.top=`calc(${v*c/w*100}% + 1px)`)}N||(n=Math.max(n,g+u))}T||(n=Math.max(0,n)),D.currentInterval!==n&&(N||(x||(i.setHours(y),i.setMinutes(C+n*S)),T?(D.newEndDate=i,r=(i-_.startDate)/60/60/1e3):(p.setHours(y),p.setMinutes(n*S),h=n*c,h=h/w*100,a[0].style.top=`calc(${h}% + 1px)`),x&&(r=(_.endDate-p)/60/60/1e3)),i=D.adjustEndDate(i),a.push({id:D.dragProxy.vdom.cn[2].id,innerHTML:H.intlFormat_time.format(i)}),(x||T)&&(l=Math.round(r/(f-y)*100*1e3)/1e3,a[0].style.height=`calc(${l}% - 2px)`),a.push({id:D.dragProxy.vdom.cn[0].id,innerHTML:H.intlFormat_time.format(p)}),D.dragProxy.vdom.cn[0].id&&(s=(r&&60*r||C)/P.interval,s<=2?(d=P.rowHeight/s<25,d&&(D.hasOverflow||(a.push({id:D.dragProxy.id,cls:{add:["neo-overflow"]}}),D.hasOverflow=!0))):D.hasOverflow&&(a.push({id:D.dragProxy.id,cls:{remove:["neo-overflow"]}}),D.hasOverflow=!1),Neo.applyDeltas(D.appName,a))),D.currentInterval=n}}dragStart(e){let t,n,a,o=this;Neo.main.DomAccess.getBoundingClientRect({id:[o.getDragElementRoot().id,e.path[1].id]}).then((r=>{t=(o.eventRecord.endDate-o.eventRecord.startDate)/60/1e3,n=e.clientX-r[0].left,a=e.clientY-r[0].top,Object.assign(o,{columnHeight:r[1].height,columnTop:r[1].top,dragElementRect:r[0],eventDuration:Math.round(t/o.intervalSize)*o.intervalSize,offsetX:n,offsetY:a}),o.createDragProxy(r[0]),o.fire("dragStart",{dragElementRect:r[0],id:o.id,offsetX:n,offsetY:a}),o.dragMove(e)}))}removeBodyCursorCls(){Neo.applyDeltas(this.appName,{id:"document.body",cls:{remove:["neo-cursor-move"]}})}}Neo.applyClassConfig(l);var c=n(2430);class m extends c.default{static getConfig(){return{className:"Neo.calendar.view.week.EventResizable"}}onDragEnd(e){let t=this;t.isDragging=!1,t.removeBodyCursorCls(),t.removeAllNodes()}onDragMove(e){}onDragStart(e){let t=this;t.isDragging=!0,t.addBodyCursorCls(),t.owner.eventDragZone["top"===t.currentNodeName?"keepEndDate":"keepStartDate"]=!0}onMouseMove(e){this.owner.data.events.enableDrag&&super.onMouseMove(e)}}Neo.applyClassConfig(m);class g extends a.Z{static getStaticConfig(){return{intervals:[15,30,60]}}static getConfig(){return{className:"Neo.calendar.view.week.TimeAxisComponent",ntype:"calendar-timeaxis",bind:{endTime:e=>e.endTime,startTime:e=>e.startTime},cls:["neo-calendar-timeaxis"],endTime_:"24:00",interval_:30,rowHeight_:20,startTime_:"00:00",vdom:{style:{}}}}constructor(e){super(e);let t=this;t.createItems(),t.afterSetRowHeight(t.rowHeight,0)}afterSetEndTime(e,t){if(void 0!==t){let t=this;e||(t._endTime="24:00"),t.afterSetRowHeight(t.rowHeight,0)}}afterSetInterval(e,t){void 0!==t&&this.afterSetRowHeight(this.rowHeight,0)}afterSetRowHeight(e,t){if(void 0!==t&&this.vdom.cn){let e,t,n=this,a=n.getTime(n.endTime),o=n.getTime(n.startTime),r=n.vdom,i=n.rowHeight,s=n.getRowsPerItem(),d=s*i+s,l=i+(a-o)*d;for(Object.assign(r.style,{backgroundImage:`linear-gradient(var(--c-w-background-color) ${d-1}px, var(--c-w-border-color) 1px)`,backgroundPositionY:1-d+"px",backgroundSize:`0.4em ${d}px`,height:l-i+1+"px",maxHeight:l-i+1+"px"}),e=0;e<25;e++)t={height:`${d}px`},e===o?t.marginTop=-2-i*(1===s?.5:2===s?1:2)+"px":delete t.marginTop,r.cn[e].style=t,r.cn[e].removeDom=e<o||e-1>=a;n._vdom=r,n.fire("change",{component:n,rowHeight:i,rowsPerItem:s,totalHeight:l})}}afterSetStartTime(e,t){void 0!==t&&this.afterSetRowHeight(this.rowHeight,0)}beforeSetInterval(e,t){return this.beforeSetEnumValue(e,t,"interval")}createItems(){let e,t,n=this.vdom;for(n.cn=[],t=0;t<25;t++)e=24===t?"00:00":(t<10?"0":"")+t+":00",n.cn.push({cls:["neo-c-w-timeaxis-item"],cn:[{html:e}]})}getRowsPerItem(){return 60===this.interval?1:30===this.interval?2:4}getTime(e){return e.split(":").map(Number)[0]}}Neo.applyClassConfig(g);const u=new Date,h=u.getDate(),p=u.getMonth(),v=u.getFullYear();class D extends a.Z{static getStaticConfig(){return{timeAxisPositions:["end","start"]}}static getConfig(){return{className:"Neo.calendar.view.week.Component",ntype:"calendar-view-weekcomponent",bind:{calendarStore:"stores.calendars",currentDate:e=>e.currentDate,endTime:e=>e.endTime,eventBorder:e=>e.events.border,eventStore:"stores.events",intlFormat_time:e=>e.intlFormat_time,locale:e=>e.locale,minimumEventDuration:e=>e.minimumEventDuration,showWeekends:e=>e.showWeekends,startTime:e=>e.startTime,weekStartDay:e=>e.weekStartDay},calendarStore_:null,cls:["neo-calendar-weekcomponent"],currentDate_:null,dayNameFormat_:"short",eventBorder_:null,eventDragZone:null,eventStore_:null,firstColumnDate:null,headerCreated:!1,intlFormat_day:null,intlFormat_time_:null,isDragging:!1,isUpdating:!1,locale_:Neo.config.locale,minimumEventDuration:30,needsEventUpdate:!1,owner:null,resizablePluginConfig:null,showEventEndTime_:!1,showWeekends_:!0,timeAxis:null,timeAxisConfig:null,timeAxisPosition_:"start",vdom:{cn:[{cls:["neo-scroll-overlay"]},{cls:["neo-c-w-scrollcontainer"],flag:"neo-c-w-scrollcontainer",cn:[{cls:["neo-header-row"],flag:"neo-header-row",cn:[]},{cls:["neo-c-w-column-timeaxis-container"],flag:"neo-c-w-column-timeaxis-container",cn:[{cls:["neo-c-w-column-container"],flag:"neo-c-w-column-container",style:{},cn:[]}]}]}]},weekStartDay_:0}}constructor(e){super(e);let t=this,n=t.domListeners,a={scope:t,delegate:".neo-c-w-column"},o={scope:t,delegate:".neo-event"},r=t.plugins||[];n.push({dblclick:t.onEventDoubleClick,...o},{"drag:end":t.onColumnDragEnd,...a},{"drag:end":t.onEventDragEnd,...o},{"drag:move":t.onColumnDragMove,...a},{"drag:move":t.onEventDragMove,...o},{"drag:start":t.onColumnDragStart,...a},{"drag:start":t.onEventDragStart,...o},{wheel:t.onWheel,scope:t}),t.domListeners=n,r.push({module:m,appName:t.appName,delegationCls:"neo-event",directions:["b","t"],flag:"resizable",...t.resizablePluginConfig}),t.plugins=r,t.timeAxis=Neo.create(g,{appName:t.appName,parentId:t.id,listeners:{change:t.onTimeAxisChange,scope:t},...t.timeAxisConfig}),t.getColumnTimeAxisContainer().cn["start"===t.timeAxisPosition?"unshift":"push"](t.timeAxis.vdom),t.calendarStore.getCount()>0&&t.eventStore.getCount()>0&&(t.needsEventUpdate=!0),t.updateHeader(!0,t.needsEventUpdate),t.needsEventUpdate&&t.updateEvents(!1),t.headerCreated=!0}adjustResizeEvent(e){return e.path.shift(),e.targetPath.shift(),e.target=e.path[0],e}adjustTotalHeight(e,t=!1){let n=this,a=e.rowHeight,o=e.rowsPerItem,r=e.totalHeight-a,i=n.vdom,s=0,d=[];for(;s<o;s++)d.push(`var(--c-w-background-color) ${s*a+s}px`,`var(--c-w-background-color) ${(s+1)*a+s}px`,"var(--c-w-border-color) 0");Object.assign(n.getColumnContainer().style,{backgroundImage:`linear-gradient(${d.join(",")})`,backgroundSize:`1px ${o*a+o}px`,height:`${r}px`,maxHeight:`${r}px`}),n[t?"_vdom":"vdom"]=i}afterSetCalendarStore(e,t){let n=this,a={load:n.onCalendarStoreLoad,recordChange:n.onCalendarStoreRecordChange,scope:n};t?.un(a),e?.on(a)}afterSetCurrentDate(e,t){let n=this;n.isConstructed&&(n.updateHeader(!1,!0),n.updateEvents())}afterSetDayNameFormat(e,t){let n=this;n.intlFormat_day=new Intl.DateTimeFormat(n.locale,{weekday:e}),t&&n.updateHeader()}afterSetEventBorder(e,t){let n=this.cls;t&&s.Z.remove(n,`neo-event-border-${t}`),e&&s.Z.add(n,`neo-event-border-${e}`),this.cls=n}afterSetEventStore(e,t){let n=this,a={load:n.onEventStoreLoad,recordChange:n.onEventStoreRecordChange,scope:n};t?.un(a),e?.on(a)}afterSetLocale(e,t){if(t){let t=this;t.intlFormat_day=new Intl.DateTimeFormat(e,{weekday:t.dayNameFormat}),t.updateHeader()}}afterSetMounted(e,t){super.afterSetMounted(e,t);let n=this;e&&(n.needsEventUpdate&&(n.updateEvents(),n.needsEventUpdate=!1),setTimeout((()=>{Neo.main.DomAccess.getBoundingClientRect({id:n.getColumnContainer().id}).then((e=>{Neo.main.DomAccess.scrollBy({direction:"left",id:n.getScrollContainer().id,value:e.width/3})}))}),20))}afterSetShowEventEndTime(e,t){void 0!==t&&this.updateEvents()}afterSetShowWeekends(e,t){let n=this,a=n.cls;s.Z[e?"add":"remove"](a,"neo-show-weekends"),n._cls=a,void 0!==t&&(n.updateHeader(!1,!0),n.updateEvents())}afterSetTimeAxisPosition(e,t){let n=this,a=n.cls,o=n.vdom,r=n.getColumnTimeAxisContainer();s.Z["end"===e?"add":"remove"](a,"neo-timeaxis-end"),void 0!==t&&r.cn.unshift(r.cn.pop()),n._cls=a,n.vdom=o}afterSetWeekStartDay(e,t){void 0!==t&&(this.updateHeader(!1,!0),this.updateEvents())}beforeSetDayNameFormat(e,t){return this.beforeSetEnumValue(e,t,"dayNameFormat",o.Z.prototype.dayNameFormats)}beforeSetTimeAxisPosition(e,t){return this.beforeSetEnumValue(e,t,"timeAxisPosition")}beforeSetWeekStartDay(e,t){return this.beforeSetEnumValue(e,t,"weekStartDay",o.Z.prototype.weekStartDays)}createColumnAndHeader(e){let t,n,a=["neo-c-w-column","neo-draggable"],r=e.getDate(),i=e.getDay(),s=["neo-date"],d=!1;return 0!==i&&6!==i||(a.push("neo-weekend"),this.showWeekends||(d=!0)),r===h&&e.getMonth()===p&&e.getFullYear()===v&&s.push("neo-today"),t={cls:a,flag:o.Z.convertToyyyymmdd(e),removeDom:d},n={cls:["neo-header-row-item"],removeDom:d,cn:[{cls:["neo-day"],html:this.intlFormat_day.format(e)},{cls:s,html:r}]},{column:t,header:n}}destroy(...e){this.timeAxis=null,super.destroy(...e)}getColumnContainer(){return d.Z.getByFlag(this.vdom,"neo-c-w-column-container")}getColumnId(e){return`${this.id}_col_${o.Z.convertToyyyymmdd(e)}`}getColumnHeaderId(e){return`${this.id}_ch_${o.Z.convertToyyyymmdd(e)}`}getColumnTimeAxisContainer(){return d.Z.getByFlag(this.vdom,"neo-c-w-column-timeaxis-container")}getEventDragZone(e){let t=this,n=t.eventDragZone,a=t.timeAxis,o={axisEndTime:a.getTime(t.endTime),axisStartTime:a.getTime(t.startTime),dragElement:e.dragElement,enableResizingAcrossOppositeEdge:e.enableResizingAcrossOppositeEdge,eventRecord:e.eventRecord,proxyParentId:e.proxyParentId};return n?n.set(o):t.eventDragZone=n=Neo.create({module:l,appName:t.appName,owner:t,scrollContainerId:t.getScrollContainer().id,...o,dragProxyConfig:{style:{transition:"none",willChange:"height"}}}),n}getEventId(e){return`${this.id}__${e}`}getHeaderContainer(){return d.Z.getByFlag(this.vdom,"neo-header-row")}getIdKey(){return"c-w"}getScrollContainer(){return d.Z.getByFlag(this.vdom,"neo-c-w-scrollcontainer")}isTopLevelColumn(e){return e[0].cls.includes("neo-c-w-column")}isTopLevelEvent(e){return e.path[0].cls.includes("neo-event")}onCalendarStoreLoad(e){this.eventStore.getCount()>0&&this.updateEvents()}onCalendarStoreRecordChange(e){this.updateEvents()}onColumnDragEnd(e){let t=this,n=Symbol.for("addedRecord"),a=t[n];a&&t.isTopLevelColumn(e.path)&&(delete t[n],Neo.applyDeltas(t.appName,{id:t.getEventId(a.id),style:{opacity:1}}).then((()=>{t.eventDragZone.dragEnd(),t.getPlugin({flag:"resizable"}).onDragEnd(e),t.isDragging=!1})))}onColumnDragMove(e){this.isTopLevelColumn(e.path)&&this.eventDragZone?.dragMove(e)}onColumnDragStart(e){let t=this;if(t.isTopLevelColumn(e.targetPath)){let n,a,r,i,s,l=t.timeAxis.getTime(t.startTime),c=t.calendarStore,m=e.path[0].rect,g=15,u=60*(t.timeAxis.getTime(t.endTime)-l)/g,h=m.height/u,p=Math.min(m.height,e.clientY-m.top),v=Math.floor(p/h),D=new Date(d.Z.findVdomChild(t.vdom,e.path[0].id).vdom.flag+"T00:00:00");t.isDragging=!0,D.setHours(l),D.setMinutes(v*g),a=o.Z.clone(D),a.setMinutes(a.getMinutes()+t.minimumEventDuration),s=t.eventStore.add({calendarId:t.data.activeCalendarId||c.getAt(0)[c.keyProperty],endDate:a,startDate:D,title:"New Event"})[0],t[Symbol.for("addedRecord")]=s,setTimeout((()=>{i=t.getEventId(s.id),n=d.Z.findVdomChild(t.vdom,i).vdom,r=t.getEventDragZone({dragElement:n,enableResizingAcrossOppositeEdge:!0,eventRecord:s,proxyParentId:e.path[0].id}),t.getPlugin({flag:"resizable"}).onDragStart(e),r.dragStart(e),setTimeout((()=>{Neo.applyDeltas(t.appName,{id:i,style:{opacity:0}})}),50)}),50)}}onEventDoubleClick(e){if(this.data.events.enableEdit){e.path[0].cls.includes("neo-event")||e.path.shift();let t=this,n=t.owner.editEventContainer,a=e.path[0],o=d.Z.findVdomChild(t.vdom,a.id).vdom,r=t.eventStore.get(o.flag),i=n.style;Object.assign(i,{left:`${a.rect.width+15}px`,top:o.style.top}),n.setSilent({parentId:e.path[1].id,record:r,style:i}),n.render(!0)}}onEventDragEnd(e){if(this.data.events.enableDrag){let t=this;t.eventDragZone.dragEnd(),t.isTopLevelEvent(e)?t.eventDragZone.removeBodyCursorCls():(e=t.adjustResizeEvent(e),t.getPlugin({flag:"resizable"}).onDragEnd(e)),t.isDragging=!1}}onEventDragMove(e){if(this.data.events.enableDrag){let t=this;t.isTopLevelEvent(e)||(e=t.adjustResizeEvent(e)),t.eventDragZone.dragMove(e)}}onEventDragStart(e){let t=this,n=t.data;if(n.events.enableDrag){let a,o,r=t.isTopLevelEvent(e);r||(e=t.adjustResizeEvent(e)),t.isDragging=!0,a=d.Z.findVdomChild(t.vdom,e.path[0].id).vdom,o=t.getEventDragZone({dragElement:a,enableResizingAcrossOppositeEdge:n.events.enableResizingAcrossOppositeEdge,eventRecord:t.eventStore.get(a.flag),proxyParentId:e.path[1].id}),r?o.addBodyCursorCls():t.getPlugin({flag:"resizable"}).onDragStart(e),o.dragStart(e)}}onEventStoreLoad(e){this.calendarStore.getCount()>0&&this.updateEvents()}onEventStoreRecordChange(e){this.updateEvents()}onFocusChange(e){let t=e.oldPath,n=e.path;t&&t[0]?.cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:t[0].id,cls:{remove:["neo-focus"]}}),n&&n[0]?.cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:n[0].id,cls:{add:["neo-focus"]}})}onTimeAxisChange(e){let t=this;t.adjustTotalHeight(e,t.headerCreated),t.headerCreated&&t.updateEvents()}onWheel(e){if(!this.isUpdating&&Math.abs(e.deltaX)>Math.abs(e.deltaY)){let t,n,a,o=this,r=o.getColumnContainer(),i=o.firstColumnDate,s=o.getHeaderContainer(),d=0,l=50,c=e.clientWidth-l;if(e.deltaX>0&&Math.round(e.scrollLeft/c*7)>13){for(n=new Date(r.cn[r.cn.length-1].flag),r.cn.splice(0,7),s.cn.splice(0,7);d<7;d++)n.setDate(n.getDate()+1),t=o.createColumnAndHeader(n),r.cn.push(t.column),s.cn.push(t.header);i.setDate(i.getDate()+7),setTimeout((()=>{o.updateEvents(!1,14,21)}),50),a=-c}else if(e.deltaX<0&&Math.round(e.scrollLeft/c*7)<1){for(n=new Date(r.cn[0].flag),r.cn.length=14,s.cn.length=14;d<7;d++)n.setDate(n.getDate()-1),t=o.createColumnAndHeader(n),r.cn.unshift(t.column),s.cn.unshift(t.header);i.setDate(i.getDate()-7),setTimeout((()=>{o.updateEvents(!1,0,7)}),50),a=c}a&&(o.isUpdating=!0,o.promiseVdomUpdate().then((()=>{Neo.main.DomAccess.scrollBy({direction:"left",id:o.getScrollContainer().id,value:a}).then((()=>{o.isUpdating=!1}))})))}}updateEvents(e=!1,t=0,n=21){let a=this;if(a.mounted){let r,i,s,d,l,c,m,g,u,h,p,v,D,f,y,w,C=a.calendarStore,E=a.eventStore,S=a.timeAxis,x=S.getTime(a.endTime),T=S.getTime(a.startTime),b=x-T,M=o.Z.clone(a.firstColumnDate),H=a.vdom,_=a.getColumnContainer(),N=t,P=a.showEventEndTime;for(M.setDate(M.getDate()+t);N<n;N++){for(i=_.cn[N],i.cn=[],s=E.getDayRecords(M),p=s.length,h=0;h<p;h++)if(v=s[h],r=C.get(v.calendarId),r?.active){if(l=o.Z.clone(v.endDate),f=o.Z.clone(v.startDate),x<=f.getHours())continue;if(T>=l.getHours())continue;x<l.getHours()&&(l.setHours(x),l.setMinutes(0)),T>f.getHours()&&(f.setHours(T),f.setMinutes(0)),d=(l-f)/60/60/1e3,c=["neo-event","neo-draggable",`neo-${r.color}`],m=60*d/S.interval,g=!1,u=Math.round(d/b*100*1e3)/1e3,D=v[E.keyProperty],y=(60*f.getHours()+f.getMinutes())/60,w=Math.round((y-T)/b*100*1e3)/1e3,m<=2&&(g=S.rowHeight*m<(P?50:34),!g||P&&S.rowHeight/m>=34||c.push("neo-overflow")),P=!(g&&1===m||!P),P&&c.push("neo-show-end-time"),i.cn.push({cls:c,flag:D,id:a.getEventId(D),tabIndex:-1,cn:[{cls:["neo-event-time"],html:a.intlFormat_time.format(v.startDate),id:`${a.id}__time__${D}`},{cls:["neo-event-title"],html:v.title,id:`${a.id}__title__${D}`},{cls:["neo-event-time","neo-event-end-time"],html:a.intlFormat_time.format(v.endDate),id:`${a.id}__enddate__${D}`,removeDom:!P}],style:{height:`calc(${u}% - 2px)`,top:`calc(${w}% + 1px)`,width:"calc(100% - 1px)"}})}M.setDate(M.getDate()+1)}a[e?"_vdom":"vdom"]=H}else a.needsEventUpdate=!0}updateHeader(e=!1,t=!1){let n,a,r,i,s,d,l=this,c=l.currentDate,m=l.vdom,g=l.getColumnContainer(),u=l.getHeaderContainer(),D=0,f=l.showWeekends;for(c.setDate(l.currentDate.getDate()-l.currentDate.getDay()+l.weekStartDay-7),l.firstColumnDate=o.Z.clone(c);D<21;D++)n=["neo-c-w-column","neo-draggable"],a=c.getDate(),r=c.getDay(),i=["neo-date"],d=!1,0!==r&&6!==r||(n.push("neo-weekend"),f||(d=!0)),a===h&&c.getMonth()===p&&c.getFullYear()===v&&i.push("neo-today"),s=l.getColumnHeaderId(c),e?(g.cn.push({cls:n,flag:o.Z.convertToyyyymmdd(c),id:l.getColumnId(c),removeDom:d}),u.cn.push({cls:["neo-header-row-item"],id:s,removeDom:d,cn:[{cls:["neo-day"],html:l.intlFormat_day.format(c),id:`${s}_day`},{cls:i,html:a,id:`${s}_date`}]})):(Object.assign(g.cn[D],{cls:n,flag:o.Z.convertToyyyymmdd(c),id:l.getColumnId(c),removeDom:d}),Object.assign(u.cn[D],{id:s,removeDom:d}),Object.assign(u.cn[D].cn[0],{html:l.intlFormat_day.format(c),id:`${s}_day`}),Object.assign(u.cn[D].cn[1],{cls:i,html:a,id:`${s}_date`})),c.setDate(c.getDate()+1);l[t?"_vdom":"vdom"]=m}}Neo.applyClassConfig(D)}}]);