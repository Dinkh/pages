"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[4830],{4830:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(402),s=n(8367);class o extends i.Z{static getStaticConfig(){return{transitionEasings:["ease","ease-in","ease-out","ease-in-out","linear"]}}static getConfig(){return{className:"Neo.list.plugin.Animate",columns:null,itemHeight:200,itemMargin:10,itemWidth:300,ownerRect:null,rows:null,transitionDuration_:500,transitionEasing_:"ease-in-out",transitionTimeoutId:null}}construct(e){super.construct(e);let t=this,n=t.owner;t.adjustCreateItem(),n.onStoreFilter=t.onStoreFilter.bind(t),n.store.on({sort:t.onStoreSort,scope:t}),this.updateTransitionDetails(!1)}adjustCreateItem(){let e=this,t=e.owner;e.ownerCreateItem=t.createItem.bind(t),t.createItem=e.createItem.bind(t,e)}afterSetTransitionDuration(e,t){this.isConstructed&&this.updateTransitionDetails(Neo.isNumber(t))}afterSetTransitionEasing(e,t){this.isConstructed&&this.updateTransitionDetails(!!t)}beforeSetTransitionEasing(e,t){return this.beforeSetEnumValue(e,t,"transitionEasing")}createItem(e,t,n){let i=e.ownerCreateItem(t,n),s=e.getItemPosition(t,n),o=i.style||{};return e.ownerRect?(Object.assign(o,{height:`${e.itemHeight}px`,position:"absolute",transform:`translate(${s.x}px, ${s.y}px)`,width:`${e.itemWidth}px`}),i.style=o,i):null}getItemPosition(e,t){let n=this,i=t%n.columns,s=n.itemMargin,o=Math.floor(t/n.columns);return{x:i*(s+n.itemWidth)+s,y:o*(s+n.itemHeight)+s}}getItemIndex(e,t,n){if(!n)return e.index;let i=this.owner,s=i.store.keyProperty;return t.indexOf(i.getItemId(e.record[s]))}onOwnerMounted(){let e=this;e.owner.getDomRect().then((t=>{Object.assign(e,{columns:Math.floor(t.width/e.itemWidth),ownerRect:t,rows:Math.floor(t.height/e.itemHeight)})}))}onStoreFilter(e){let t,n,i,s,o=this,r=o.owner,a=r.store.keyProperty,l=!1,u=[],d=[],m=[],c=o.transitionTimeoutId,h=!!c,g=r.vdom;c&&(clearTimeout(c),o.transitionTimeoutId=null),i=h?g.cn.map((e=>e.id)):[],e.items.forEach(((t,s)=>{n={index:s,record:t},e.oldItems.includes(t)?d.push(n):(h&&i.includes(r.getItemId(t[a]))&&(n.reAdded=!0),u.push(n))})),e.oldItems.forEach(((t,n)=>{e.items.includes(t)||m.push({index:n,record:t})})),u.forEach((e=>{e.reAdded||(t=o.getItemIndex(e,i,h),t>-1&&(l=!0,g.cn.splice(t,0,o.createItem(o,e.record,e.index)),e.item=g.cn[t],e.item.style.opacity=0))})),l&&(r.vdom=g),setTimeout((()=>{g=r.vdom,i=g.cn.map((e=>e.id)),u.forEach((e=>{t=o.getItemIndex(e,i,h),t>-1&&(g.cn[t].style.opacity=1)})),d.forEach((e=>{t=o.getItemIndex(e,i,!0),t>-1&&(s=o.getItemPosition(e.record,e.index),Object.assign(g.cn[t].style,{opacity:1,transform:`translate(${s.x}px, ${s.y}px)`}))})),m.forEach((e=>{t=o.getItemIndex(e,i,h),t>-1&&(e.item=g.cn[t],e.item.style.opacity=0)})),r.vdom=g,o.triggerTransitionCallback()}),50)}onStoreSort(e){let t,n,i=!1,s=e.scope.keyProperty,o=this.owner,r=[],a=o.vdom,l=a.cn.map((e=>e.id));l.length>0&&(e.items.forEach(((e,u)=>{n=o.getItemId(e[s]),t=l.indexOf(n),r.push(a.cn[t]),t!==u&&(i=!0)})),i&&(o.vdom.cn=r,o.vdom=a,setTimeout((()=>{o.createItems()}),50)))}triggerTransitionCallback(){let e=this;e.transitionTimeoutId=setTimeout((()=>{e.transitionTimeoutId=null,e.owner.createItems()}),e.transitionDuration)}updateTransitionDetails(e){let t=this,n=t.transitionDuration,i=t.transitionEasing,o=t.owner.id;e&&s.Z.deleteRules(`#${o} .neo-list-item`),s.Z.insertRules([`#${o} .neo-list-item {`,`transition: opacity ${n}ms ${i}, transform ${n}ms ${i}`,"}"].join(""))}}Neo.applyClassConfig(o)},402:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(9375);class s extends i.Z{static getConfig(){return{className:"Neo.plugin.Base",ntype:"plugin",owner:null}}construct(e){super.construct(e);let t=this;t.owner.mounted?t.onOwnerMounted():t.owner.on("mounted",t.onOwnerMounted,t)}onOwnerMounted(){}}Neo.applyClassConfig(s)},8367:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(9375);class s extends i.Z{static getConfig(){return{className:"Neo.util.Css"}}static deleteRules(e){Array.isArray(e)||(e=[e]),Neo.main.addon.Stylesheet.deleteCssRules({rules:e})}static insertRules(e){Array.isArray(e)||(e=[e]),Neo.main.addon.Stylesheet.insertCssRules({rules:e})}}Neo.applyClassConfig(s);const o=s}}]);