"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[4830],{4830:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var o=n(402),i=n(8367);class s extends o.Z{static getConfig(){return{className:"Neo.list.plugin.Animate",columns:null,itemHeight:200,itemMargin:10,itemWidth:300,ownerRect:null,rows:null,transitionDuration_:500,transitionTimeoutId:null}}construct(e){super.construct(e);let t=this,n=t.owner;t.adjustCreateItem(),n.onStoreFilter=t.onStoreFilter.bind(t),n.store.on({sort:t.onStoreSort,scope:t})}adjustCreateItem(){let e=this,t=e.owner;e.ownerCreateItem=t.createItem.bind(t),t.createItem=e.createItem.bind(t,e)}afterSetTransitionDuration(e,t){Neo.isNumber(t)&&i.Z.deleteRules(`#${this.owner.id} .neo-list-item`),i.Z.insertRules([`#${this.owner.id} .neo-list-item {`,`transition: opacity ${e}ms ease-in-out, transform ${e}ms ease-in-out`,"}"].join(""))}createItem(e,t,n){let o=e.ownerCreateItem(t,n),i=e.getItemPosition(t,n),s=o.style||{};return e.ownerRect?(Object.assign(s,{height:`${e.itemHeight}px`,position:"absolute",transform:`translate(${i.x}px, ${i.y}px)`,width:`${e.itemWidth}px`}),o.style=s,o):null}getItemPosition(e,t){let n=this,o=t%n.columns,i=n.itemMargin,s=Math.floor(t/n.columns);return{x:o*(i+n.itemWidth)+i,y:s*(i+n.itemHeight)+i}}getItemIndex(e,t,n){if(!n)return e.index;let o=this.owner,i=o.store.keyProperty;return t.indexOf(o.getItemId(e.record[i]))}onOwnerMounted(){let e=this;e.owner.getDomRect().then((t=>{Object.assign(e,{columns:Math.floor(t.width/e.itemWidth),ownerRect:t,rows:Math.floor(t.height/e.itemHeight)})}))}onStoreFilter(e){let t,n,o,i,s=this,r=s.owner,a=r.store.keyProperty,l=!1,m=[],d=[],c=[],u=s.transitionTimeoutId,h=!!u,g=r.vdom;u&&(clearTimeout(u),s.transitionTimeoutId=null),o=h?g.cn.map((e=>e.id)):[],e.items.forEach(((t,i)=>{n={index:i,record:t},e.oldItems.includes(t)?d.push(n):(h&&o.includes(r.getItemId(t[a]))&&(n.reAdded=!0),m.push(n))})),e.oldItems.forEach(((t,n)=>{e.items.includes(t)||c.push({index:n,record:t})})),m.forEach((e=>{e.reAdded||(t=s.getItemIndex(e,o,h),t>-1&&(l=!0,g.cn.splice(t,0,s.createItem(s,e.record,e.index)),e.item=g.cn[t],e.item.style.opacity=0))})),l&&(r.vdom=g),setTimeout((()=>{g=r.vdom,o=g.cn.map((e=>e.id)),m.forEach((e=>{t=s.getItemIndex(e,o,h),t>-1&&(g.cn[t].style.opacity=1)})),d.forEach((e=>{t=s.getItemIndex(e,o,!0),t>-1&&(i=s.getItemPosition(e.record,e.index),Object.assign(g.cn[t].style,{opacity:1,transform:`translate(${i.x}px, ${i.y}px)`}))})),c.forEach((e=>{t=s.getItemIndex(e,o,h),t>-1&&(e.item=g.cn[t],e.item.style.opacity=0)})),r.vdom=g,s.triggerTransitionCallback()}),50)}onStoreSort(e){let t,n,o=!1,i=e.scope.keyProperty,s=this.owner,r=[],a=s.vdom,l=a.cn.map((e=>e.id));l.length>0&&(e.items.forEach(((e,m)=>{n=s.getItemId(e[i]),t=l.indexOf(n),r.push(a.cn[t]),t!==m&&(o=!0)})),o&&(s.vdom.cn=r,s.vdom=a,setTimeout((()=>{s.createItems()}),50)))}triggerTransitionCallback(){let e=this;e.transitionTimeoutId=setTimeout((()=>{e.transitionTimeoutId=null,e.owner.createItems()}),e.transitionDuration)}}Neo.applyClassConfig(s)},402:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(9375);class i extends o.Z{static getConfig(){return{className:"Neo.plugin.Base",ntype:"plugin",owner:null}}construct(e){super.construct(e);let t=this;t.owner.mounted?t.onOwnerMounted():t.owner.on("mounted",t.onOwnerMounted,t)}onOwnerMounted(){}}Neo.applyClassConfig(i)},8367:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(9375);class i extends o.Z{static getConfig(){return{className:"Neo.util.Css"}}static deleteRules(e){Array.isArray(e)||(e=[e]),Neo.main.addon.Stylesheet.deleteCssRules({rules:e})}static insertRules(e){Array.isArray(e)||(e=[e]),Neo.main.addon.Stylesheet.insertCssRules({rules:e})}}Neo.applyClassConfig(i);const s=i}}]);