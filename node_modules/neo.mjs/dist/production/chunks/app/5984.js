(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[5984],{5984:(e,t,n)=>{"use strict";n.r(t),n.d(t,{onStart:()=>re});var a=n(1354),o=n(7875),i=n(2680);class r extends i.Z{static getConfig(){return{className:"Neo.calendar.view.CalendarsContainer",ntype:"calendar-calendarscontainer",calendarStore_:null,cls:["neo-calendar-calendarscontainer","neo-container"],itemDefaults:{module:o.Z,flex:"none",hideLabel:!0,hideValueLabel:!1},layout:{ntype:"vbox",align:"stretch"}}}onStoreLoad(e){let t=this,n=[];if(!t.mounted&&t.rendering){const n=t.on("rendered",(()=>{t.un("rendered",n),t.onStoreLoad(e)}))}else e.forEach((e=>{n.push({checked:e.active,valueLabelText:e.name})})),t._items=n,t.parseItemConfigs(n),t.createItems()}}Neo.applyClassConfig(r);var l=n(231);class s extends l.Z{static getConfig(){return{className:"Neo.calendar.model.Calendar",fields:[{name:"active",type:"Boolean"},{name:"color",type:"String"},{name:"id",type:"Integer"},{name:"name",type:"String"}]}}}Neo.applyClassConfig(s);var c=n(7816);class d extends c.Z{static getConfig(){return{className:"Neo.calendar.store.Calendars",keyProperty:"id",model:s,sorters:[{property:"name",direction:"ASC"}]}}}Neo.applyClassConfig(d);var m=n(4508),u=n(2705),h=n(6076),g=n(9132);const p=new Date;p.getDate(),p.getMonth(),p.getFullYear();class f extends g.Z{static getConfig(){return{className:"Neo.calendar.view.DayComponent",ntype:"calendar-view-daycomponent",cls:["neo-calendar-daycomponent"],currentDate_:null,eventStore_:null,html:"Day",owner:null,vdom:{},weekStartDay_:0}}}Neo.applyClassConfig(f);var v=n(3474),y=n(5062),C=n(4759);class D extends v.Z{static getConfig(){return{className:"Neo.calendar.view.EditEventContainer",ntype:"calendar-edit-event-container",cls:["neo-calendar-edit-event-container"],currentView:null,endTimeFieldConfig:null,owner:null,record_:null,startTimeFieldConfig:null,titleFieldConfig:null}}constructor(e){super(e),this.vdom.tabIndex=-1}afterSetMounted(e,t){super.afterSetMounted(e,t),e&&this.getField("title").focus()}afterSetRecord(e,t){if(e&&t){let t=this,n=t.owner.intlFormat_time;t.getField("endTime").minValue=t.getEndTimeMinValue(e),t.getField("startTime").maxValue=t.getStartTimeMaxValue(e),t.reset({endTime:n.format(e.endDate),startTime:n.format(e.startDate),title:e.title})}else e&&this.createItems()}createItems(){let e=this,t=e.owner,n=e.record,a={module:C.Z,clearToOriginalValue:!0,flex:"none",labelPosition:"inline",listeners:{change:e.onTimeFieldChange,scope:e},stepSize:900,width:"9em"};n&&(e.items=[{module:y.Z,clearToOriginalValue:!0,flex:"none",labelPosition:"inline",labelText:"Event Title",listeners:{change:e.onTitleFieldChange,scope:e},name:"title",required:!0,value:n.title,...e.titleFieldConfig||{}},{labelText:"Start Time",maxValue:e.getStartTimeMaxValue(n),minValue:t.startTime,name:"startTime",value:t.intlFormat_time.format(n.startDate),...a,...e.startTimeFieldConfig||{}},{labelText:"End Time",maxValue:t.endTime,minValue:e.getEndTimeMinValue(n),name:"endTime",value:t.intlFormat_time.format(n.endDate),...a,...e.endTimeFieldConfig||{}}],super.createItems())}getEndTimeMinValue(e){let t=new Date(e.startDate.valueOf());return t.setMinutes(t.getMinutes()+this.owner.minimumEventDuration),this.owner.intlFormat_time.format(t)}getStartTimeMaxValue(e){let t=new Date(e.endDate.valueOf());return t.setMinutes(t.getMinutes()-this.owner.minimumEventDuration),this.owner.intlFormat_time.format(t)}onFocusLeave(e){setTimeout((()=>{this.unmount()}),100)}onTimeFieldChange(e){let t=this,n=e.component.name,a=t.record,o=t.record["endTime"===n?"endDate":"startDate"],i=e.value.split(":").map((e=>Number(e)));o.setHours(i[0]),o.setMinutes(i[1]),t.currentView.updateEvents(),"endTime"===n?t.getField("startTime").maxValue=t.getStartTimeMaxValue(a):t.getField("endTime").minValue=t.getEndTimeMinValue(a)}onTitleFieldChange(e){Neo.isEmpty(e.value)||(this.record.title=e.value,this.currentView.updateEvents())}}Neo.applyClassConfig(D);class w extends l.Z{static getConfig(){return{className:"Neo.calendar.model.Event",fields:[{name:"attendees",type:"Array"},{name:"allDay",type:"Boolean"},{name:"id",type:"Integer"},{name:"calendarId",type:"String"},{name:"description",type:"String"},{name:"endDate",type:"Date"},{name:"startDate",type:"Date"},{name:"title",type:"String"}]}}}Neo.applyClassConfig(w);class x extends c.Z{static getConfig(){return{className:"Neo.calendar.store.Events",keyProperty:"id",model:w,sorters:[{property:"startDate",direction:"ASC"}]}}getDayRecords(e){let t,n=this,a=[],o=0,i=n.getCount();for(;o<i;o++)t=n.items[o],h.Z.matchDate(e,t.startDate)&&h.Z.matchDate(e,t.endDate)&&a.push(t);return a}}Neo.applyClassConfig(x);var S=n(1645);class b extends S.Z{static getConfig(){return{className:"Neo.calendar.view.MainContainerModel",data:{allowEventEditing:!0,enableEventResizingAcrossOppositeEdge:!0}}}}Neo.applyClassConfig(b);var k=n(3501),N=n(524);const T=new Date;T.getDate(),T.getMonth(),T.getFullYear();class E extends g.Z{static getConfig(){return{className:"Neo.calendar.view.month.Component",ntype:"calendar-view-monthcomponent",cls:["neo-calendar-monthcomponent"],currentDate_:null,dayNameFormat_:"short",eventStore_:null,headerHeight:null,intlFormat_day:null,intlFormat_month:null,intlFormat_time:null,isScrolling:!1,locale_:Neo.config.locale,monthNameFormat_:"short",owner:null,scrollTaskId:null,showWeekends_:!0,timeFormat_:{hour:"2-digit",minute:"2-digit"},useScrollBoxShadows_:!0,vdom:{cn:[{cls:["neo-days-header"],cn:[{cls:["neo-static-header"],style:{},cn:[{tag:"span",cls:["neo-month-name"],flag:"month-name"},{vtype:"text"}]}]},{cls:["neo-c-m-scrollcontainer"]}]},weekStartDay_:0}}constructor(e){super(e);let t=this,n=t.currentDate,a=t.vdom.cn[0].cn[0],o=t.domListeners;o.push({dblclick:t.onEventDoubleClick,delegate:"neo-event",scope:t},{wheel:t.onWheel,scope:t}),t.domListeners=o,a.cn[0].html=t.intlFormat_month.format(n),a.cn[1].html=` ${n.getFullYear()}`,t.updateHeader(!0),t.createContent()}afterSetDayNameFormat(e,t){let n=this;n.intlFormat_day=new Intl.DateTimeFormat(n.locale,{weekday:e}),void 0!==t&&n.updateHeader()}afterSetLocale(e,t){if(void 0!==t){let t=this;t.intlFormat_day=new Intl.DateTimeFormat(e,{weekday:t.dayNameFormat}),t.intlFormat_month=new Intl.DateTimeFormat(e,{month:t.monthNameFormat}),t.intlFormat_time=new Intl.DateTimeFormat(e,t.timeFormat),t.updateMonthNames(!0),t.updateHeader()}}afterSetMonthNameFormat(e,t){let n=this;n.intlFormat_month=new Intl.DateTimeFormat(n.locale,{month:e}),void 0!==t&&n.updateMonthNames()}afterSetMounted(e,t){e&&setTimeout((()=>{let e=this;Neo.main.DomAccess.getBoundingClientRect({id:[e.vdom.cn[1].id,e.vdom.cn[0].id]}).then((t=>{e.headerHeight=t[1].height,Neo.main.DomAccess.scrollBy({direction:"top",id:e.vdom.cn[1].id,value:t[0].height-t[1].height})}))}),20)}afterSetShowWeekends(e,t){if(void 0!==t){let t,n,a=this;a.vdom.cn[1].cn.forEach((a=>{if(a.flag)for(t=0;t<7;t++)n=a.cn[t],n.cls.includes("neo-weekend")&&(e?delete n.removeDom:n.removeDom=!0)})),a.updateHeader()}}afterSetTimeFormat(e,t){this.intlFormat_time=new Intl.DateTimeFormat(this.locale,e)}afterSetUseScrollBoxShadows(e,t){let n=this,a=n.vdom;k.Z[e?"add":"remove"](n.vdom.cn[1].cls,"neo-scroll-shadows"),n.vdom=a}afterSetWeekStartDay(e,t){void 0!==t&&(this.createContent(!0),this.updateHeader())}beforeSetDayNameFormat(e,t){return this.beforeSetEnumValue(e,t,"dayNameFormat",h.Z.prototype.dayNameFormats)}beforeSetMonthNameFormat(e,t){return this.beforeSetEnumValue(e,t,"monthNameFormat",h.Z.prototype.monthNameFormats)}createContent(e=!1){let t,n,a=this,o=a.currentDate,i=a.vdom,r=0;for(i.cn[1].cn=[],t=h.Z.getFirstDayOffset(o,a.weekStartDay),o.setDate(1-t),o.setDate(o.getDate()-42);r<18;r++)n=a.createWeek(h.Z.clone(o)),n.header&&i.cn[1].cn.push(n.header),i.cn[1].cn.push(n.row),o.setDate(o.getDate()+7);a[e?"_vdom":"vdom"]=i}createWeek(e){let t,n,a,o,i,r,l=this,s=0,c=l.eventStore,d=null,m=h.Z.convertToyyyymmdd(e);for(i={flag:m,cls:["neo-week"],cn:[],id:`${l.id}__week__${m}`};s<7;s++)t=e.getDate(),m=h.Z.convertToyyyymmdd(e),1===t&&(i.flag=m,d={cls:["neo-month-header"],cn:[{cls:["neo-month-header-content"],cn:[{tag:"span",cls:["neo-month-name"],flag:"month-name",html:l.intlFormat_month.format(e)},{vtype:"text",html:` ${e.getFullYear()}`}]}]}),n={cls:["neo-day"],id:`${l.id}__day__${m}`,cn:[{cls:["neo-day-number"],html:t,id:`${l.id}__day_number__${m}`}]},r=e.getDay(),0!==r&&6!==r||(n.cls.push("neo-weekend"),l.showWeekends||(n.removeDom=!0)),n.removeDom||(a=l.eventStore.getDayRecords(e),a.forEach((e=>{o=e[c.keyProperty],n.cn.push({cls:["neo-event"],flag:o,id:l.id+"__"+o,tabIndex:-1,cn:[{cls:["neo-event-title"],html:e.title,id:l.id+"__title__"+o},{cls:["neo-event-time"],html:l.intlFormat_time.format(e.startDate),id:l.id+"__time__"+o}]})}))),i.cn.push(n),e.setDate(e.getDate()+1);return{header:d,row:i}}onEventDoubleClick(e){if(this.data.allowEventEditing){let t=this,n=t.owner.editEventContainer,a=e.path[0],o=e.path[2],i=e.path[3],r=N.Z.findVdomChild(t.vdom,a.id).vdom,l=t.eventStore.get(r.flag),s=n.style;Object.assign(s,{left:a.rect.right-o.rect.left+15+"px",top:a.rect.top-i.rect.top+i.scrollTop-12+"px"}),n.setSilent({currentView:t,parentId:e.path[1].id,record:l,style:s}),n.render(!0)}}onFocusChange(e){let t=e.oldPath,n=e.path;t&&t[0].cls&&t[0].cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:t[0].id,cls:{remove:["neo-focus"]}}),n&&n[0].cls&&n[0].cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:n[0].id,cls:{add:["neo-focus"]}})}onWheel(e){if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){let t,n,a,o=this,i=o.vdom,r=i.cn[1],l=0;if(e.deltaY>0&&Math.round(e.scrollTop/(e.clientHeight-o.headerHeight)*6)>11){for(t=new Date(r.cn[r.cn.length-1].flag),t.setDate(t.getDate()-(t.getDay()-o.weekStartDay));l<6;l++)r.cn[1].cls.includes("neo-month-header")&&r.cn.splice(1,1),r.cn.shift(),t.setDate(t.getDate()+7),a=o.createWeek(h.Z.clone(t)),a.header&&r.cn.push(a.header),r.cn.push(a.row);o.vdom=i}else if(e.deltaY<0&&Math.round(e.scrollTop/(e.clientHeight-o.headerHeight)*6)<1){for(t=r.cn[0].flag?new Date(r.cn[0].flag):new Date(r.cn[1].flag),t.setDate(t.getDate()-(t.getDay()-o.weekStartDay));l<6;l++)n=r.cn.length,r.cn[n-2].cls.includes("neo-month-header")&&r.cn.splice(n-2,1),r.cn.pop(),t.setDate(t.getDate()-7),a=o.createWeek(h.Z.clone(t)),r.cn.unshift(a.row),a.header&&r.cn.unshift(a.header);o.promiseVdomUpdate(o.vdom).then((()=>{Neo.main.DomAccess.scrollTo({direction:"top",id:o.vdom.cn[1].id,value:e.clientHeight-o.headerHeight})}))}o.isScrolling||(o.isScrolling=!0,k.Z.add(o.vdom.cn[1].cls,"neo-is-scrolling"),o.vdom.cn[0].cn[0].style.opacity=0,o.vdom=i),o.scrollTaskId&&clearTimeout(o.scrollTaskId),o.scrollTaskId=setTimeout(o.onWheelEnd.bind(o),300)}}onWheelEnd(){let e,t,n=this,a=n.vdom,o=a.cn[0].cn[0],i=6;for(n.isScrolling=!1;i<12;i++)if(t=a.cn[1].cn[i].flag,t){e=new Date(t),e.setMonth(e.getMonth()+1),o.cn[0].html=n.intlFormat_month.format(e),o.cn[1].html=` ${e.getFullYear()}`;break}k.Z.remove(a.cn[1].cls,"neo-is-scrolling"),o.style.opacity=1,n.vdom=a}updateEvents(){this.createContent()}updateHeader(e=!1){let t,n,a=this,o=a.currentDate,i=a.vdom,r=1;for(o.setDate(a.currentDate.getDate()-a.currentDate.getDay()+a.weekStartDay);r<8;r++)t=o.getDay(),e?(n={cls:["neo-day-name"],html:a.intlFormat_day.format(o)},a.showWeekends||0!==t&&6!==t||(n.removeDom=!0),i.cn[0].cn.push(n)):(n=i.cn[0].cn[r],n.html=a.intlFormat_day.format(o),a.showWeekends||0!==t&&6!==t?delete n.removeDom:n.removeDom=!0),o.setDate(o.getDate()+1);a.vdom=i}updateMonthNames(e=!1){let t=this,n=t.currentDate,a=t.vdom;N.Z.getFlags(a,"month-name").forEach((e=>{e.html=t.intlFormat_month.format(n),n.setMonth(n.getMonth()+1)})),t[e?"_vdom":"vdom"]=a}}Neo.applyClassConfig(E);var I=n(9840),_=n(5177);class F extends i.Z{static getConfig(){return{className:"Neo.calendar.view.settings.GeneralContainer",layout:{ntype:"vbox",align:"stretch"}}}constructor(e){super(e),this.createItems()}createItems(){let e=this,t=e.up("calendar-maincontainer"),n=e.data;e.items=[{module:I.Z,clearable:!0,flex:"none",labelText:"baseFontSize",labelWidth:110,listeners:{change:e.onConfigChange,scope:e},maxValue:20,minValue:10,name:"baseFontSize",value:t.baseFontSize},{module:_.Z,checked:"default"===t.locale,fieldValue:"default",flex:"none",hideValueLabel:!1,labelText:"locale",labelWidth:110,listeners:{change:e.onRadioChange,scope:e},name:"locale",style:{marginTop:"5px"},valueLabelText:"default"},{module:_.Z,checked:"de-DE"===t.locale,fieldValue:"de-DE",flex:"none",hideValueLabel:!1,labelText:"",labelWidth:110,listeners:{change:e.onRadioChange,scope:e},name:"locale",style:{marginTop:"5px"},valueLabelText:"de-DE"},{module:_.Z,checked:"en-US"===t.locale,fieldValue:"en-US",flex:"none",hideValueLabel:!1,labelText:"",labelWidth:110,listeners:{change:e.onRadioChange,scope:e},name:"locale",style:{marginTop:"5px"},valueLabelText:"en-US"},{module:_.Z,checked:"es-ES"===t.locale,fieldValue:"es-ES",flex:"none",hideValueLabel:!1,labelText:"",labelWidth:110,listeners:{change:e.onRadioChange,scope:e},name:"locale",style:{marginTop:"5px"},valueLabelText:"es-ES"},{module:_.Z,checked:"fr-FR"===t.locale,fieldValue:"fr-FR",flex:"none",hideValueLabel:!1,labelText:"",labelWidth:110,listeners:{change:e.onRadioChange,scope:e},name:"locale",style:{marginTop:"5px"},valueLabelText:"fr-FR"},{module:_.Z,checked:0===t.weekStartDay,fieldValue:0,flex:"none",hideValueLabel:!1,labelText:"weekStartDay",labelWidth:110,listeners:{change:e.onRadioChange,scope:e},name:"weekStartDay",style:{marginTop:"10px"},valueLabelText:"Sunday"},{module:_.Z,checked:1===t.weekStartDay,fieldValue:1,flex:"none",hideValueLabel:!1,labelText:"",labelWidth:110,listeners:{change:e.onRadioChange,scope:e},name:"weekStartDay",style:{marginTop:"5px"},valueLabelText:"Monday"},{module:o.Z,checked:t.showWeekends,flex:"none",hideLabel:!0,hideValueLabel:!1,listeners:{change:e.onConfigChange,scope:e},name:"showWeekends",style:{marginTop:"10px"},valueLabelText:"showWeekends"},{module:o.Z,checked:n.allowEventEditing,flex:"none",hideLabel:!0,hideValueLabel:!1,listeners:{change:e.onDataChange,scope:e},name:"allowEventEditing",style:{marginTop:"10px"},valueLabelText:"allowEventEditing"},{module:o.Z,checked:t.scrollNewYearFromTop,flex:"none",hideLabel:!0,hideValueLabel:!1,listeners:{change:e.onConfigChange,scope:e},name:"scrollNewYearFromTop",style:{marginTop:"10px"},valueLabelText:"scrollNewYearFromTop"},{module:C.Z,flex:"none",labelText:"startTime",labelWidth:110,listeners:{change:e.onConfigChange,scope:e},maxValue:"10:00",minValue:"00:00",name:"startTime",stepSize:3600,style:{marginTop:"10px"},value:t.startTime,width:"14em"},{module:C.Z,flex:"none",labelText:"endTime",labelWidth:110,listeners:{change:e.onConfigChange,scope:e},maxValue:"23:00",minValue:"14:00",name:"endTime",stepSize:3600,value:"24:00"!==t.endTime?t.endTime:null,width:"14em"},{module:_.Z,checked:n.enableEventResizingAcrossOppositeEdge,fieldValue:!0,flex:"none",hideValueLabel:!1,labelText:"Event Resizing",labelWidth:110,listeners:{change:e.onRadioDataChange,scope:e},name:"enableEventResizingAcrossOppositeEdge",style:{marginTop:"10px"},valueLabelText:"X opposite edge"},{module:_.Z,checked:!n.enableEventResizingAcrossOppositeEdge,fieldValue:!1,flex:"none",hideValueLabel:!1,labelText:"",labelWidth:110,listeners:{change:e.onRadioDataChange,scope:e},name:"enableEventResizingAcrossOppositeEdge",style:{marginTop:"5px"},valueLabelText:"Min duration"}],super.createItems()}onConfigChange(e){this.up("calendar-maincontainer")[e.component.name]=e.value}onDataChange(e){this.getModel().setData(e.component.name,e.value)}onRadioChange(e){e.value&&(this.up("calendar-maincontainer")[e.component.name]=e.component.fieldValue)}onRadioDataChange(e){e.value&&(console.log(typeof e.component.fieldValue,e.component.fieldValue),this.getModel().setData(e.component.name,e.component.fieldValue))}}Neo.applyClassConfig(F);class Z extends i.Z{static getConfig(){return{className:"Neo.calendar.view.settings.MonthContainer",layout:{ntype:"vbox",align:"stretch"}}}constructor(e){super(e),this.createItems()}createItems(){let e=this,t=140,n=e.getMonthComponent();e.items=[{module:_.Z,checked:"narrow"===n.dayNameFormat,fieldValue:"narrow",flex:"none",hideValueLabel:!1,labelText:"dayNameFormat",labelWidth:t,listeners:{change:e.onRadioChange,scope:e},name:"cm_dayNameFormat",valueLabelText:"narrow"},{module:_.Z,checked:"short"===n.dayNameFormat,fieldValue:"short",flex:"none",hideValueLabel:!1,labelText:"",labelWidth:t,listeners:{change:e.onRadioChange,scope:e},name:"cm_dayNameFormat",style:{marginTop:"5px"},valueLabelText:"short"},{module:_.Z,checked:"long"===n.dayNameFormat,fieldValue:"long",flex:"none",hideValueLabel:!1,labelText:"",labelWidth:t,listeners:{change:e.onRadioChange,scope:e},name:"cm_dayNameFormat",style:{marginTop:"5px"},valueLabelText:"long"},{module:_.Z,checked:"short"===n.monthNameFormat,fieldValue:"short",flex:"none",hideValueLabel:!1,labelText:"monthNameFormat",labelWidth:t,listeners:{change:e.onRadioChange,scope:e},name:"cm_monthNameFormat",style:{marginTop:"10px"},valueLabelText:"short"},{module:_.Z,checked:"long"===n.monthNameFormat,fieldValue:"long",flex:"none",hideValueLabel:!1,labelText:"",labelWidth:t,listeners:{change:e.onRadioChange,scope:e},name:"cm_monthNameFormat",style:{marginTop:"5px"},valueLabelText:"long"},{module:o.Z,checked:n.useScrollBoxShadows,flex:"none",hideLabel:!0,hideValueLabel:!1,listeners:{change:e.onConfigChange,scope:e},name:"useScrollBoxShadows",style:{marginTop:"10px"},valueLabelText:"useScrollBoxShadows"}],super.createItems()}getMonthComponent(){return this.up("calendar-maincontainer").monthComponent}onConfigChange(e){this.getMonthComponent()[e.component.name]=e.value}onRadioChange(e){if(e.value){let t=e.component.name;t.startsWith("cm_")&&(t=t.substring(3)),this.getMonthComponent()[t]=e.component.fieldValue}}}Neo.applyClassConfig(Z);var V=n(2138);class M extends i.Z{static getConfig(){return{className:"Neo.calendar.view.settings.WeekContainer",itemDefaults:{flex:"none",labelWidth:130,style:{marginTop:"5px"}},layout:{ntype:"vbox",align:"stretch"}}}constructor(e){super(e),this.createItems()}createItems(){let e=this,t=e.getWeekComponent(),n=t.timeAxis;e.items=[{module:I.Z,clearable:!0,clearToOriginalValue:!0,excludedValues:[45],inputEditable:!1,labelText:"interval",listeners:{change:e.onTimeAxisConfigChange,scope:e},maxValue:60,minValue:15,name:"interval",stepSize:15,value:n.interval},{module:I.Z,clearable:!0,clearToOriginalValue:!0,labelText:"rowHeight",listeners:{change:e.onTimeAxisConfigChange,scope:e},maxValue:100,minValue:8,name:"rowHeight",stepSize:2,value:n.rowHeight},{module:o.Z,checked:t.showEventEndDates,hideLabel:!0,hideValueLabel:!1,listeners:{change:e.onConfigChange,scope:e},name:"showEventEndDates",style:{marginTop:"10px"},valueLabelText:"showEventEndDates"},{module:_.Z,checked:"start"===t.timeAxisPosition,fieldValue:"start",hideValueLabel:!1,labelText:"timeAxisPosition",listeners:{change:e.onTimeAxisPositionChange,scope:e},name:"timeAxisPosition",style:{marginTop:"10px"},valueLabelText:"start"},{module:_.Z,checked:"end"===t.timeAxisPosition,fieldValue:"end",hideValueLabel:!1,labelText:"",listeners:{change:e.onTimeAxisPositionChange,scope:e},name:"timeAxisPosition",valueLabelText:"end"}],super.createItems()}getTimeAxis(){return this.getWeekComponent().timeAxis}getWeekComponent(){return this.up("calendar-maincontainer").weekComponent}onConfigChange(e){this.getWeekComponent()[e.component.name]=e.value}onTimeAxisConfigChange(e){this.getTimeAxis()[e.component.name]=e.value}onTimeAxisPositionChange(e){e.value&&(this.getWeekComponent().timeAxisPosition=e.component.fieldValue)}}Neo.applyClassConfig(M);class P extends i.Z{static getConfig(){return{className:"Neo.calendar.view.settings.YearContainer",layout:{ntype:"vbox",align:"stretch"}}}constructor(e){super(e),this.createItems()}createItems(){let e=this,t=180,n=e.getYearComponent();e.items=[{module:I.Z,clearable:!0,clearToOriginalValue:!0,flex:"none",labelText:"eventIndicatorHigh",labelWidth:t,listeners:{change:e.onConfigChange,scope:e},maxValue:10,minValue:1,name:"eventIndicatorHigh",value:n.eventIndicatorHigh},{module:I.Z,clearable:!0,clearToOriginalValue:!0,flex:"none",labelText:"eventIndicatorMedium",labelWidth:t,listeners:{change:e.onConfigChange,scope:e},maxValue:10,minValue:1,name:"eventIndicatorMedium",style:{marginTop:"5px"},value:n.eventIndicatorMedium},{module:I.Z,clearable:!0,clearToOriginalValue:!0,flex:"none",labelText:"eventIndicatorLow",labelWidth:t,listeners:{change:e.onConfigChange,scope:e},maxValue:10,minValue:1,name:"eventIndicatorLow",style:{marginTop:"5px"},value:n.eventIndicatorLow},{module:_.Z,checked:"short"===n.monthNameFormat,fieldValue:"short",flex:"none",hideValueLabel:!1,labelText:"monthNameFormat",labelWidth:t,listeners:{change:e.onRadioChange,scope:e},name:"monthNameFormat",style:{marginTop:"5px"},valueLabelText:"short"},{module:_.Z,checked:"long"===n.monthNameFormat,fieldValue:"long",flex:"none",hideValueLabel:!1,labelText:"",labelWidth:t,listeners:{change:e.onRadioChange,scope:e},name:"monthNameFormat",style:{marginTop:"5px"},valueLabelText:"long"},{module:o.Z,checked:n.showCellBorders,flex:"none",labelText:"showCellBorders",labelWidth:t,listeners:{change:e.onConfigChange,scope:e},name:"showCellBorders",style:{marginTop:"10px"}},{module:o.Z,checked:n.showWeekNumbers,flex:"none",labelText:"showWeekNumbers",labelWidth:t,listeners:{change:e.onConfigChange,scope:e},name:"showWeekNumbers",style:{marginTop:"10px"}},{module:o.Z,checked:n.sixWeeksPerMonth,flex:"none",labelText:"sixWeeksPerMonth",labelWidth:t,listeners:{change:e.onConfigChange,scope:e},name:"sixWeeksPerMonth",style:{marginTop:"10px"}}],super.createItems()}getYearComponent(){return this.up("calendar-maincontainer").yearComponent}onRadioChange(e){e.value&&(this.getYearComponent()[e.component.name]=e.component.fieldValue)}onConfigChange(e){this.getYearComponent()[e.component.name]=e.value}}Neo.applyClassConfig(P);class L extends i.Z{static getConfig(){return{className:"Neo.calendar.view.SettingsContainer",ntype:"calendar-settingscontainer",cls:["neo-calendar-settingscontainer","neo-container"],layout:{ntype:"vbox",align:"stretch"},removeInactiveCards:!0}}constructor(e){super(e),this.vdom.removeDom=!0,this.createItems()}collapse(e){let t,n=this,a=n.style||{};a.marginRight=`-${e}px`,n._style=a,n._vdom.style=a,Neo.getComponent(n.parentId).promiseVdomUpdate().then((()=>{setTimeout((()=>{t=n.vdom,t.removeDom=!0,n.vdom=t}),400)}))}createItems(){this.items=[{ntype:"component",cls:["neo-header"],height:48,html:'<i class="fa fa-cog"></i>Settings'},{module:V.Z,removeInactiveCards:this.removeInactiveCards,items:[{module:F,style:{padding:"20px"},tabButtonConfig:{text:"General"}},{ntype:"component",html:"Day",style:{padding:"20px"},tabButtonConfig:{text:"Day"}},{module:M,style:{padding:"20px"},tabButtonConfig:{text:"Week"}},{module:Z,style:{padding:"20px"},tabButtonConfig:{text:"Month"}},{module:P,style:{padding:"20px"},tabButtonConfig:{text:"Year"}}]}],super.createItems()}expand(){let e,t=this;delete t.vdom.removeDom,Neo.getComponent(t.parentId).promiseVdomUpdate().then((()=>{t.mounted=!0,setTimeout((()=>{e=t.style||{},e.marginRight="0px",t.style=e}),50)}))}}Neo.applyClassConfig(L);var R=n(4959),W=n(1735),H=n(8192);class B extends H.default{static getConfig(){return{className:"Neo.calendar.view.week.EventDragZone",ntype:"calendar-week-event-dragzone",addDragProxyCls:!1,enableResizingAcrossOppositeEdge:!0,axisEndTime:0,axisStartTime:0,columnHeight:0,columnTop:0,currentInterval:0,eventDuration:0,eventRecord:null,forceUpdate:!1,intervalSize:15,keepEndDate:!1,keepStartDate:!1,moveHorizontal:!1,moveInMainThread:!1,newEndDate:null,newStartDate:null,scrollFactorLeft:3,useProxyWrapper:!1}}addBodyCursorCls(){Neo.applyDeltas(this.appName,{id:"document.body",cls:{add:["neo-cursor-move"]}})}adjustEndDate(e){return 0===e.getHours()&&0===e.getMinutes()?e.setMinutes(e.getMinutes()-1):23===e.getHours()&&59===e.getMinutes()||e.getMinutes()%this.intervalSize==0||e.setMinutes(e.getMinutes()+1),e}afterSetProxyParentId(e,t){if(e&&void 0!==t){let t=this;t.dragProxy&&t.dragProxy.vdom.cn[0].id&&Neo.applyDeltas(t.appName,{action:"moveNode",id:t.dragProxy.id,index:0,parentId:e})}}createDragProxy(e){let t=this,n=Neo.getComponent(t.getDragElementRoot().id)||t.owner,a=t.dragProxyConfig&&t.dragProxyConfig.vdom,o=N.Z.clone(a||t.dragElement);o.cn[2].removeDom=!1;const i={module:W.Z,appName:t.appName,moveInMainThread:t.moveInMainThread,parentId:t.proxyParentId,...t.dragProxyConfig||{},vdom:t.useProxyWrapper?{cn:[o]}:o};i.cls=i.cls||[],i.cls.push("neo-focus"),n&&i.cls.push(n.getTheme()),o.cls&&!t.useProxyWrapper&&i.cls.push(...o.cls),t.addDragProxyCls&&k.Z.add(i.cls,t.dragProxyCls),Object.assign(i.style,{height:`${e.height}px`,top:e.y-t.columnTop+"px",width:`${e.width}px`}),t.dragProxy=Neo.create(i)}dragEnd(e){super.dragEnd(e);let t,n,a=this,o=a.eventRecord;a.keepStartDate?(t=a.newEndDate,n=a.newStartDate||o.startDate):(n=new Date(N.Z.findVdomChild(a.owner.vdom,a.proxyParentId).vdom.flag+" 00:00:00"),n.setHours(a.axisStartTime),n.setMinutes(a.currentInterval*a.intervalSize),a.keepEndDate?(t=a.newEndDate||o.endDate,n=a.newStartDate||n):(t=new Date(n.valueOf()),t.setMinutes(t.getMinutes()+a.eventDuration))),t=a.adjustEndDate(t),o.endDate=t,o.startDate=n,Object.assign(a,{keepEndDate:!1,keepStartDate:!1,newEndDate:null,newStartDate:null,proxyParentId:null}),a.owner.updateEvents()}dragMove(e){let t,n,a,o,i,r,l,s,c,d,m,u,h,g=this,p=g.axisEndTime,f=g.axisStartTime,v=g.columnHeight,y=g.eventDuration,C=0,D=g.intervalSize,w=g.keepEndDate,x=g.keepStartDate,S=e.targetPath,b=S.length,k=g.owner,N=g.eventRecord,T=!1;if(g.dragProxy){if(!w&&!x)for(;C<b;C++)if(S[C].cls.includes("neo-c-w-column")){g.proxyParentId=S[C].id;break}if(s=60*(p-f)/D,l=v/s,m=Math.min(v,e.clientY-g.offsetY-g.columnTop),n=Math.floor(m/l),w||(n=Math.min(n,s-y/D)),i=new Date(N.endDate.valueOf()),h=new Date(N.startDate.valueOf()),a=[{id:g.dragProxy.id,style:{}}],w||x)if(t=new Date(N.startDate.valueOf()),t.setHours(f),t.setMinutes(0),u=(N.startDate-t)/D/60/1e3,d=k.minimumEventDuration/D,w){if(c=u+y/D,g.enableResizingAcrossOppositeEdge){if(g.forceUpdate&&n>c-d&&n<c+d)return;n>=c+d?(T=!0,g.forceUpdate=!0,i.setHours(f),i.setMinutes(n*D),i=g.adjustEndDate(i),g.newEndDate=i,h.setHours(f),h.setMinutes(c*D),g.newStartDate=h,o=(i-h)/60/60/1e3,a[0].style.top=`calc(${c*l/v*100}% + 1px)`):(g.forceUpdate=!1,g.newStartDate=null)}T||(n=Math.min(n,c-d))}else if(x){if(c=u-y/D,g.enableResizingAcrossOppositeEdge)if(n=Math.max(-y/D,n),n<=c-d)T=!0,g.forceUpdate=!0,i.setHours(f),i.setMinutes(y+c*D),i=g.adjustEndDate(i),g.newEndDate=i,h.setHours(f),h.setMinutes(y+n*D),g.newStartDate=h,o=(i-h)/60/60/1e3,m=(y/D+n)*l,m=m/v*100,a[0].style.top=`calc(${m}% + 1px)`;else{if(g.forceUpdate&&n<c+d)return;g.forceUpdate&&n>=c+d&&g.currentInterval!==n&&(g.forceUpdate=!1,g.newStartDate=null,a[0].style.top=`calc(${u*l/v*100}% + 1px)`)}T||(n=Math.max(n,c+d))}x||(n=Math.max(0,n)),g.currentInterval!==n&&(T||(w||(i.setHours(f),i.setMinutes(y+n*D)),x?(g.newEndDate=i,o=(i-N.startDate)/60/60/1e3):(h.setHours(f),h.setMinutes(n*D),m=n*l,m=m/v*100,a[0].style.top=`calc(${m}% + 1px)`),w&&(o=(N.endDate-h)/60/60/1e3)),i=g.adjustEndDate(i),a.push({id:g.dragProxy.vdom.cn[2].id,innerHTML:k.intlFormat_time.format(i)}),(w||x)&&(r=Math.round(o/(p-f)*100*1e3)/1e3,a[0].style.height=`calc(${r}% - 2px)`),a.push({id:g.dragProxy.vdom.cn[0].id,innerHTML:k.intlFormat_time.format(h)}),g.dragProxy.vdom.cn[0].id&&Neo.currentWorker.promiseMessage("main",{action:"updateDom",deltas:a})),g.currentInterval=n}}dragStart(e){let t,n,a,o=this;Neo.main.DomAccess.getBoundingClientRect({id:[o.getDragElementRoot().id,e.path[1].id]}).then((i=>{t=(o.eventRecord.endDate-o.eventRecord.startDate)/60/1e3,n=e.clientX-i[0].left,a=e.clientY-i[0].top,Object.assign(o,{columnHeight:i[1].height,columnTop:i[1].top,dragElementRect:i[0],eventDuration:Math.round(t/o.intervalSize)*o.intervalSize,offsetX:n,offsetY:a}),o.createDragProxy(i[0]),o.fire("dragStart",{dragElementRect:i[0],id:o.id,offsetX:n,offsetY:a}),o.dragMove(e)}))}removeBodyCursorCls(){Neo.applyDeltas(this.appName,{id:"document.body",cls:{remove:["neo-cursor-move"]}})}}Neo.applyClassConfig(B);var A=n(2430);class O extends A.default{static getConfig(){return{className:"Neo.calendar.view.week.EventResizable"}}onDragEnd(e){this.removeBodyCursorCls(),this.removeAllNodes()}onDragMove(e){}onDragStart(e){this.addBodyCursorCls(),this.owner.eventDragZone["top"===this.currentNodeName?"keepEndDate":"keepStartDate"]=!0}}Neo.applyClassConfig(O);class z extends g.Z{static getStaticConfig(){return{intervals:[15,30,60]}}static getConfig(){return{className:"Neo.calendar.view.week.TimeAxisComponent",ntype:"calendar-timeaxis",cls:["neo-calendar-timeaxis"],endTime_:"24:00",interval_:30,rowHeight_:20,startTime_:"00:00",vdom:{style:{}}}}constructor(e){super(e);let t=this;t.createItems(),t.afterSetRowHeight(t.rowHeight,0)}afterSetEndTime(e,t){if(void 0!==t){let t=this;e||(t.endTime="24:00"),t.afterSetRowHeight(t.rowHeight,0)}}afterSetInterval(e,t){void 0!==t&&this.afterSetRowHeight(this.rowHeight,0)}afterSetRowHeight(e,t){if(void 0!==t){let e,t,n=this,a=n.getTime(n.endTime),o=n.getTime(n.startTime),i=n.vdom,r=n.rowHeight,l=n.getRowsPerItem(),s=l*r+l,c=r+(a-o)*s;for(Object.assign(i.style,{backgroundImage:`linear-gradient(var(--c-w-background-color) ${s-1}px, var(--c-w-border-color) 1px)`,backgroundPositionY:1-s+"px",backgroundSize:`0.4em ${s}px`,height:c-r+1+"px",maxHeight:c-r+1+"px"}),e=0;e<25;e++)t={height:`${s}px`},e===o?t.marginTop=-2-r*(1===l?.5:2===l?1:2)+"px":delete t.marginTop,i.cn[e].style=t,i.cn[e].removeDom=e<o||e-1>=a;n._vdom=i,n.fire("change",{component:n,rowHeight:r,rowsPerItem:l,totalHeight:c})}}afterSetStartTime(e,t){void 0!==t&&this.afterSetRowHeight(this.rowHeight,0)}beforeSetInterval(e,t){return this.beforeSetEnumValue(e,t,"interval")}createItems(){let e,t,n=this.vdom;for(n.cn=[],t=0;t<25;t++)e=24===t?"00:00":(t<10?"0":"")+t+":00",n.cn.push({cls:["neo-c-w-timeaxis-item"],cn:[{html:e}]})}getRowsPerItem(){return 60===this.interval?1:30===this.interval?2:4}getTime(e){return e.split(":").map(Number)[0]}}Neo.applyClassConfig(z);const Y=new Date,$=Y.getDate(),U=Y.getMonth(),j=Y.getFullYear();class K extends g.Z{static getStaticConfig(){return{timeAxisPositions:["end","start"]}}static getConfig(){return{className:"Neo.calendar.view.week.Component",ntype:"calendar-view-weekcomponent",cls:["neo-calendar-weekcomponent"],currentDate_:null,dayNameFormat_:"short",eventDragZone:null,eventStore_:null,firstColumnDate:null,headerCreated:!1,intlFormat_day:null,intlFormat_time:null,isDragging:!1,isUpdating:!1,locale_:Neo.config.locale,minimumEventDuration:30,owner:null,resizablePluginConfig:null,showEventEndDates_:!1,timeAxis:null,timeAxisConfig:null,timeAxisPosition_:"start",timeFormat_:{hour:"2-digit",minute:"2-digit"},vdom:{cn:[{cls:["neo-scroll-overlay"]},{cls:["neo-c-w-scrollcontainer"],flag:"neo-c-w-scrollcontainer",cn:[{cls:["neo-header-row"],flag:"neo-header-row",cn:[]},{cls:["neo-c-w-column-timeaxis-container"],flag:"neo-c-w-column-timeaxis-container",cn:[{cls:["neo-c-w-column-container"],flag:"neo-c-w-column-container",style:{},cn:[]}]}]}]},weekStartDay_:0}}constructor(e){super(e);let t=this,n=t.domListeners,a={scope:t,delegate:".neo-c-w-column"},o={scope:t,delegate:".neo-event"},i=t.plugins||[];n.push({dblclick:t.onEventDoubleClick,...o},{"drag:end":t.onColumnDragEnd,...a},{"drag:end":t.onEventDragEnd,...o},{"drag:move":t.onColumnDragMove,...a},{"drag:move":t.onEventDragMove,...o},{"drag:start":t.onColumnDragStart,...a},{"drag:start":t.onEventDragStart,...o},{wheel:t.onWheel,scope:t}),t.domListeners=n,i.push({module:O,appName:t.appName,delegationCls:"neo-event",directions:["b","t"],flag:"resizable",...t.resizablePluginConfig||{}}),t.plugins=i,t.timeAxis=Neo.create(z,{appName:t.appName,parentId:t.id,listeners:{change:t.onTimeAxisChange,scope:t},...t.timeAxisConfig||{}}),t.getColumnTimeAxisContainer().cn["start"===t.timeAxisPosition?"unshift":"push"](t.timeAxis.vdom),t.updateHeader(!0),t.headerCreated=!0}adjustResizeEvent(e){return e.path.shift(),e.targetPath.shift(),e.target=e.path[0],e}adjustTotalHeight(e,t=!1){let n=this,a=e.rowHeight,o=e.rowsPerItem,i=e.totalHeight-a,r=n.vdom,l=0,s=[];for(;l<o;l++)s.push(`var(--c-w-background-color) ${l*a+l}px`,`var(--c-w-background-color) ${(l+1)*a+l}px`,"var(--c-w-border-color) 0");Object.assign(n.getColumnContainer().style,{backgroundImage:`linear-gradient(${s.join(",")})`,backgroundSize:`1px ${o*a+o}px`,height:`${i}px`,maxHeight:`${i}px`}),n[t?"_vdom":"vdom"]=r}afterSetCurrentDate(e,t){void 0!==t&&(this.updateHeader(!1,!0),this.updateEvents())}afterSetDayNameFormat(e,t){let n=this;n.intlFormat_day=new Intl.DateTimeFormat(n.locale,{weekday:e}),void 0!==t&&n.updateHeader()}afterSetEventStore(e,t){}afterSetLocale(e,t){if(void 0!==t){let t=this;t.intlFormat_day=new Intl.DateTimeFormat(e,{weekday:t.dayNameFormat}),t.intlFormat_time=new Intl.DateTimeFormat(e,t.timeFormat),t.updateHeader()}}afterSetMounted(e,t){super.afterSetMounted(e,t),e&&setTimeout((()=>{let e=this;Neo.main.DomAccess.getBoundingClientRect({id:e.getColumnContainer().id}).then((t=>{Neo.main.DomAccess.scrollBy({direction:"left",id:e.getScrollContainer().id,value:t.width/3})}))}),20)}afterSetShowEventEndDates(e,t){void 0!==t&&this.updateEvents()}afterSetTimeAxisPosition(e,t){let n=this,a=n.cls,o=n.vdom,i=n.getColumnTimeAxisContainer();k.Z["end"===e?"add":"remove"](a,"neo-timeaxis-end"),void 0!==t&&i.cn.unshift(i.cn.pop()),n._cls=a,n.vdom=o}afterSetTimeFormat(e,t){this.intlFormat_time=new Intl.DateTimeFormat(this.locale,e)}afterSetWeekStartDay(e,t){void 0!==t&&(this.updateHeader(!1,!0),this.updateEvents())}beforeSetDayNameFormat(e,t){return this.beforeSetEnumValue(e,t,"dayNameFormat",h.Z.prototype.dayNameFormats)}beforeSetTimeAxisPosition(e,t){return this.beforeSetEnumValue(e,t,"timeAxisPosition")}beforeSetWeekStartDay(e,t){return this.beforeSetEnumValue(e,t,"weekStartDay",h.Z.prototype.weekStartDays)}createColumnAndHeader(e){let t,n,a=["neo-c-w-column","neo-draggable"],o=e.getDate(),i=e.getDay(),r=["neo-date"];return 0===i||6===i?a.push("neo-weekend"):k.Z.remove(a,"neo-weekend"),o===$&&e.getMonth()===U&&e.getFullYear()===j&&r.push("neo-today"),t={cls:a,flag:h.Z.convertToyyyymmdd(e)},n={cls:["neo-header-row-item"],cn:[{cls:["neo-day"],html:this.intlFormat_day.format(e)},{cls:r,html:o}]},{column:t,header:n}}destroy(...e){this.eventStore=null,this.timeAxis=null,super.destroy(...e)}getColumnContainer(){return N.Z.getByFlag(this.vdom,"neo-c-w-column-container")}getColumnId(e){return`${this.id}_col_${h.Z.convertToyyyymmdd(e)}`}getColumnHeaderId(e){return`${this.id}_ch_${h.Z.convertToyyyymmdd(e)}`}getColumnTimeAxisContainer(){return N.Z.getByFlag(this.vdom,"neo-c-w-column-timeaxis-container")}getHeaderContainer(){return N.Z.getByFlag(this.vdom,"neo-header-row")}getIdKey(){return"c-w"}getScrollContainer(){return N.Z.getByFlag(this.vdom,"neo-c-w-scrollcontainer")}isTopLevelColumn(e){return e.path[0].cls.includes("neo-c-w-column")}isTopLevelEvent(e){return e.path[0].cls.includes("neo-event")}onColumnDragEnd(e){this.isTopLevelColumn(e)&&console.log("onColumnDragEnd",e)}onColumnDragMove(e){this.isTopLevelColumn(e)&&console.log("onColumnDragMove",e)}onColumnDragStart(e){this.isTopLevelColumn(e)&&console.log("onColumnDragStart",e)}onEventDoubleClick(e){if(this.data.allowEventEditing){e.path[0].cls.includes("neo-event")||e.path.shift();let t=this,n=t.owner.editEventContainer,a=e.path[0],o=N.Z.findVdomChild(t.vdom,a.id).vdom,i=t.eventStore.get(o.flag),r=n.style;Object.assign(r,{left:`${a.rect.width+15}px`,top:o.style.top}),n.setSilent({currentView:t,parentId:e.path[1].id,record:i,style:r}),n.render(!0)}}onEventDragEnd(e){let t=this;t.eventDragZone.dragEnd(),t.isTopLevelEvent(e)?t.eventDragZone.removeBodyCursorCls():(e=t.adjustResizeEvent(e),t.getPlugin({flag:"resizable"}).onDragEnd(e)),t.isDragging=!1}onEventDragMove(e){let t=this;t.isTopLevelEvent(e)||(e=t.adjustResizeEvent(e)),t.eventDragZone.dragMove(e)}onEventDragStart(e){let t,n,a=this,o=a.eventDragZone,i=a.isTopLevelEvent(e);i||(e=a.adjustResizeEvent(e)),t=N.Z.findVdomChild(a.vdom,e.path[0].id).vdom,n=a.timeAxis,a.isDragging=!0;const r={axisEndTime:n.getTime(n.endTime),axisStartTime:n.getTime(n.startTime),dragElement:t,enableResizingAcrossOppositeEdge:a.data.enableEventResizingAcrossOppositeEdge,eventRecord:a.eventStore.get(t.flag),proxyParentId:e.path[1].id};o?o.set(r):a.eventDragZone=o=Neo.create({module:B,appName:a.appName,owner:a,scrollContainerId:a.getScrollContainer().id,...r,dragProxyConfig:{style:{transition:"none",willChange:"height"}}}),i?o.addBodyCursorCls():a.getPlugin({flag:"resizable"}).onDragStart(e),o.dragStart(e)}onFocusChange(e){let t=e.oldPath,n=e.path;t&&t[0].cls&&t[0].cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:t[0].id,cls:{remove:["neo-focus"]}}),n&&n[0].cls&&n[0].cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:n[0].id,cls:{add:["neo-focus"]}})}onTimeAxisChange(e){let t=this;t.adjustTotalHeight(e,t.headerCreated),t.headerCreated&&t.updateEvents()}onWheel(e){if(!this.isUpdating&&Math.abs(e.deltaX)>Math.abs(e.deltaY)){let t,n,a,o=this,i=o.getColumnContainer(),r=o.firstColumnDate,l=o.getHeaderContainer(),s=0,c=50,d=e.clientWidth-c;if(e.deltaX>0&&Math.round(e.scrollLeft/d*7)>13){for(n=new Date(i.cn[i.cn.length-1].flag),i.cn.splice(0,7),l.cn.splice(0,7);s<7;s++)n.setDate(n.getDate()+1),t=o.createColumnAndHeader(n),i.cn.push(t.column),l.cn.push(t.header);r.setDate(r.getDate()+7),setTimeout((()=>{o.updateEvents(13,20)}),50),a=-d}else if(e.deltaX<0&&Math.round(e.scrollLeft/d*7)<1){for(n=new Date(i.cn[0].flag),i.cn.length=14,l.cn.length=14;s<7;s++)n.setDate(n.getDate()-1),t=o.createColumnAndHeader(n),i.cn.unshift(t.column),l.cn.unshift(t.header);r.setDate(r.getDate()-7),setTimeout((()=>{o.updateEvents(0,6)}),50),a=d}a&&(o.isUpdating=!0,o.promiseVdomUpdate().then((()=>{Neo.main.DomAccess.scrollBy({direction:"left",id:o.getScrollContainer().id,value:a}).then((()=>{o.isUpdating=!1}))})))}}updateEvents(e=0,t=21,n=!1){let a,o,i,r,l,s,c,d,m,u,g,p,f=this,v=f.timeAxis,y=v.getTime(v.endTime),C=v.getTime(v.startTime),D=y-C,w=h.Z.clone(f.firstColumnDate),x=f.eventStore,S=f.vdom,b=f.getColumnContainer(),k=e,N=f.showEventEndDates;for(w.setDate(w.getDate()+e);k<t;k++){for(a=b.cn[k],a.cn=[],o=x.getDayRecords(w),d=o.length,c=0;c<d;c++)m=o[c],i=(m.endDate-m.startDate)/60/60/1e3,r=["neo-event","neo-draggable"],l=!1,s=Math.round(i/D*100*1e3)/1e3,u=m[x.keyProperty],g=(60*m.startDate.getHours()+m.startDate.getMinutes())/60,p=Math.round((g-C)/D*100*1e3)/1e3,60*i/v.interval==1&&(l=v.rowHeight<(N?50:34),!l||N&&v.rowHeight>=34||r.push("neo-overflow")),a.cn.push({cls:r,flag:u,id:f.id+"__"+u,tabIndex:-1,cn:[{cls:["neo-event-time"],html:f.intlFormat_time.format(m.startDate),id:f.id+"__time__"+u},{cls:["neo-event-title"],html:m.title,id:f.id+"__title__"+u},{cls:["neo-event-time","neo-event-end-time"],html:f.intlFormat_time.format(m.endDate),id:f.id+"__enddate__"+u,removeDom:l||!N}],style:{height:`calc(${s}% - 2px)`,top:`calc(${p}% + 1px)`,width:"calc(100% - 1px)"}});w.setDate(w.getDate()+1)}f[n?"_vdom":"vdom"]=S}updateHeader(e=!1,t=!1){let n,a,o,i,r,l=this,s=l.currentDate,c=l.vdom,d=l.getColumnContainer(),m=l.getHeaderContainer(),u=0;for(s.setDate(l.currentDate.getDate()-l.currentDate.getDay()+l.weekStartDay-7),l.firstColumnDate=h.Z.clone(s);u<21;u++)n=["neo-c-w-column","neo-draggable"],a=s.getDate(),o=s.getDay(),i=["neo-date"],0===o||6===o?n.push("neo-weekend"):k.Z.remove(n,"neo-weekend"),a===$&&s.getMonth()===U&&s.getFullYear()===j?i.push("neo-today"):k.Z.remove(i,"neo-today"),r=l.getColumnHeaderId(s),e?(d.cn.push({cls:n,flag:h.Z.convertToyyyymmdd(s),id:l.getColumnId(s)}),m.cn.push({cls:["neo-header-row-item"],id:r,cn:[{cls:["neo-day"],html:l.intlFormat_day.format(s),id:`${r}_day`},{cls:i,html:a,id:`${r}_date`}]})):(Object.assign(d.cn[u],{cls:n,flag:h.Z.convertToyyyymmdd(s),id:l.getColumnId(s)}),m.cn[u].id=r,Object.assign(m.cn[u].cn[0],{html:l.intlFormat_day.format(s),id:`${r}_day`}),Object.assign(m.cn[u].cn[1],{cls:i,html:a,id:`${r}_date`})),s.setDate(s.getDate()+1);l[t?"_vdom":"vdom"]=c}}Neo.applyClassConfig(K);const X=new Date,G=X.getDate(),q=X.getMonth(),J=X.getFullYear();class Q extends g.Z{static getConfig(){return{className:"Neo.calendar.view.YearComponent",ntype:"calendar-view-yearcomponent",cachedUpdate:null,cls:["neo-calendar-yearcomponent"],currentDate_:null,dayNameFormat_:"narrow",eventIndicatorHigh_:3,eventIndicatorLow_:1,eventIndicatorMedium_:2,eventStore_:null,intlFormat_day:null,intlFormat_month:null,isUpdating_:!1,locale_:Neo.config.locale,monthNameFormat_:"long",owner:null,scrollNewYearFromTop:!1,showCellBorders_:!1,showDisabledDays_:!0,showWeekends_:!0,showWeekNumbers_:!0,sixWeeksPerMonth_:!1,useAnimations:!0,vdom:{cn:[{cls:["neo-content-wrapper"],cn:[{cls:["neo-year-header"],cn:[{},{cls:["neo-nav-button","neo-prev-button"]},{cls:["neo-nav-button","neo-next-button"]}]},{cls:["neo-months-container"]}]}]},weekStartDay_:0}}constructor(e){super(e);let t=this,n=t.domListeners;n.push({click:t.onNavButtonClick,delegate:".neo-nav-button",scope:t},{wheel:t.onWheel,scope:t}),t.domListeners=n,t.updateHeaderYear(),t.createMonths()}afterSetCurrentDate(e,t){if(void 0!==t){let n=t.getFullYear(),a=e.getFullYear();a!==n?this.changeYear(a-n):console.log("## select a new day",e.getMonth(),e.getDate())}}afterSetDayNameFormat(e,t){this.updateDayNamesRows(e,t)}afterSetEventIndicatorHigh(e,t){void 0!==t&&this.createMonths()}afterSetEventIndicatorLow(e,t){void 0!==t&&this.createMonths()}afterSetEventIndicatorMedium(e,t){void 0!==t&&this.createMonths()}afterSetLocale(e,t){if(void 0!==t){let e=this;e.updateDayNamesRows(e.dayNameFormat,"",!0),e.updateMonthNameFormat(e.monthNameFormat,"")}}afterSetMonthNameFormat(e,t){this.updateMonthNameFormat(e,t)}afterSetShowCellBorders(e,t){let n=this.cls;k.Z[e?"add":"remove"](n,"neo-show-cell-borders"),this.cls=n}afterSetShowWeekends(e,t){if(void 0!==t){let t,n,a,o,i,r=this,l=r.vdom,s=0;for(;s<12;s++)for(n=l.cn[0].cn[1].cn[s].cn,i=n.length,a=1;a<i;a++)for(o=1;o<8;o++)t=n[a].cn[o],t.cls.includes("neo-weekend")&&(e?delete t.removeDom:t.removeDom=!0);r.updateDayNamesRows(r.dayNameFormat,"")}}afterSetShowWeekNumbers(e,t){if(void 0!==t){let t,n,a,o=this,i=o.vdom,r=0;for(;r<12;r++)for(t=i.cn[0].cn[1].cn[r].cn,a=t.length,n=1;n<a;n++)t[n].cn[0].removeDom=!e;o.vdom=i}}afterSetSixWeeksPerMonth(e,t){if(void 0!==t){let t=this,n=t.vdom,a=t.currentDate,o=0;for(a.setMonth(0),a.setDate(1);o<12;o++)n.cn[0].cn[1].cn[o].cn[7].removeDom=5===h.Z.getWeeksOfMonth(a,t.weekStartDay)&&!e,a.setMonth(a.getMonth()+1);t.vdom=n}}afterSetWeekStartDay(e,t){void 0!==t&&this.createMonths()}beforeSetDayNameFormat(e,t){return this.beforeSetEnumValue(e,t,"dayNameFormat",h.Z.prototype.dayNameFormats)}beforeSetMonthNameFormat(e,t){return this.beforeSetEnumValue(e,t,"monthNameFormat",h.Z.prototype.monthNameFormats)}cacheUpdate(e=this.currentDate){this.cachedUpdate=e}changeYear(e){let t,n,a,o=this;o.useAnimations&&(o.isUpdating||(o.isUpdating=!0,Neo.main.DomAccess.getBoundingClientRect({id:o.id}).then((i=>{t=o.scrollNewYearFromTop&&e<0||!o.scrollNewYearFromTop&&e>0,n=o.vdom,a=t?0:-i.height,n.cn.push({cls:["neo-relative"],cn:[{cls:["neo-animation-wrapper"],cn:[{cls:["neo-content-wrapper"],cn:[{cls:["neo-year-header"],cn:[{html:o.currentDate.getFullYear()},{cls:["neo-nav-button","neo-prev-button"]},{cls:["neo-nav-button","neo-next-button"]}]},{cls:["neo-months-container"]}]}],style:{height:2*i.height+"px",transform:`translateY(${a}px)`,width:`${i.width}px`}}]}),o.createMonths(!0,n.cn[1].cn[0].cn[0].cn[1]),n.cn[1].cn[0].cn[t?"unshift":"push"](n.cn[0]),n.cn.splice(0,1),o.promiseVdomUpdate(n).then((()=>{a=t?-i.height:0,n.cn[0].cn[0].style.transform=`translateY(${a}px)`,o.vdom=n,setTimeout((()=>{n.cn[0]=n.cn[0].cn[0].cn[t?1:0],o.triggerVdomUpdate()}),300)}))}))))}createDayNamesRow(){let e,t,n=this,a=n.currentDate,o=0,i={cls:["neo-calendar-week"],cn:[{cls:["neo-cell","neo-top-left-spacer"]}]};for(a.setDate(n.currentDate.getDate()-n.currentDate.getDay()+n.weekStartDay);o<7;o++)t={cls:["neo-cell","neo-weekday-cell"],html:n.intlFormat_day.format(a)},e=a.getDay(),n.showWeekends||0!==e&&6!==e||(t.removeDom=!0),i.cn.push(t),a.setDate(a.getDate()+1);return i}createMonthContent(e,t){let n,a,o,i,r,l,s,c,d,m,u=this,g=t.getDate(),p=t.getMonth(),f=t.getFullYear(),v=h.Z.clone(t),y=u.currentDate,C=y.getMonth(),D=y.getFullYear(),w=h.Z.getDaysInMonth(t),x=h.Z.getFirstDayOffset(t,u.weekStartDay),S=0,b=h.Z.clone(t);for(m=(w+x)/7>5?6:5,r=1-x,v.setDate(r),b.setDate(r+7);S<6;S++){for(d={cls:["neo-calendar-week"],removeDom:S===m&&!u.sixWeeksPerMonth,cn:[{cls:["neo-cell","neo-weeknumber-cell"],html:h.Z.getWeekOfYear(b),removeDom:!u.showWeekNumbers}]},b.setDate(b.getDate()+7),c=0;c<7;c++)s=r>0&&r<=w,n=u.getCellId(f,p+1,r),i=v.getDay(),a={id:n,cls:s?["neo-cell"]:["neo-cell","neo-disabled"],tabIndex:s?-1:null,cn:[{cls:["neo-cell-content"],html:s?r:u.showDisabledDays?v.getDate():""}]},o=a.cls,0!==i&&6!==i||(o.push("neo-weekend"),u.showWeekends||(a.removeDom=!0)),J===f&&q===p&&G===r&&a.cn[0].cls.push("neo-today"),D===f&&C===p&&r===g&&o.push("neo-selected"),a.removeDom||(l=u.eventStore.getDayRecords(v),l.length>=u.eventIndicatorHigh?o.push("neo-events-high"):l.length>=u.eventIndicatorMedium?o.push("neo-events-medium"):l.length>=u.eventIndicatorLow&&o.push("neo-events-low")),d.cn.push(a),v.setDate(v.getDate()+1),r++;e.cn.push(d)}return e}createMonths(e=!1,t){let n,a=this,o=a.currentDate,i=a.vdom,r=t||i.cn[0].cn[1],l=0;for(r.cn=[];l<12;l++)o.setMonth(l),o.setDate(1),n={cls:["neo-month"],cn:[{cls:["neo-month-name"],html:a.intlFormat_month.format(o)},a.createDayNamesRow()]},n=a.createMonthContent(n,h.Z.clone(o)),r.cn.push(n);e||(a.vdom=i)}getCellId(e,t,n){return(n=n.toString()).length<2&&(n="0"+n),(t=t.toString()).length<2&&(t="0"+t),this.id+"__"+e+"-"+t+"-"+n}onNavButtonClick(e){let t=this.currentDate;t.setFullYear(t.getFullYear()+(e.path[0].cls.includes("neo-next-button")?1:-1)),this.currentDate=t}onWheel(e){if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){let t=this,n=t.currentDate;n.setFullYear(n.getFullYear()+(e.deltaY>0?1:-1)),t.currentDate=n}}triggerVdomUpdate(e=!1){if(!e){let e=this;e.isUpdating=!0,e.promiseVdomUpdate(e.vdom).then((()=>{e.isUpdating=!1}))}}updateDayNamesRows(e,t,n=!1){let a=this;if(a.intlFormat_day=new Intl.DateTimeFormat(a.locale,{weekday:e}),void 0!==t){let e,t,o,i=a.currentDate,r=a.vdom,l=1;for(i.setDate(a.currentDate.getDate()-a.currentDate.getDay()+a.weekStartDay);l<8;l++){for(t=0;t<12;t++)e=i.getDay(),o=r.cn[0].cn[1].cn[t].cn[1].cn[l],o.html=a.intlFormat_day.format(i),a.showWeekends||0!==e&&6!==e?delete o.removeDom:o.removeDom=!0;i.setDate(i.getDate()+1)}a[n?"_vdom":"vdom"]=r}}updateHeaderYear(){this.vdom.cn[0].cn[0].cn[0].html=this.currentDate.getFullYear()}updateMonthNameFormat(e,t,n=!1){let a=this;if(a.intlFormat_month=new Intl.DateTimeFormat(a.locale,{month:e}),void 0!==t){let e=a.vdom,t=0,o=a.currentDate;for(;t<12;t++)o.setMonth(t),o.setDate(1),e.cn[0].cn[1].cn[t].cn[0].html=a.intlFormat_month.format(o);a[n?"_vdom":"vdom"]=e}}}Neo.applyClassConfig(Q);const ee=new Date;class te extends i.Z{static getStaticConfig(){return{validViews:["day","week","month","year"]}}static getConfig(){return{className:"Neo.calendar.view.MainContainer",ntype:"calendar-maincontainer",activeView_:"week",baseFontSize_:null,calendarsContainer:null,calendarStore_:null,calendarStoreConfig:null,cls:["neo-calendar-maincontainer","neo-container"],currentDate_:ee,dateSelector:null,dateSelectorConfig:null,dayComponent:null,dayComponentConfig:null,editEventContainer_:null,editEventContainerConfig:null,endTime_:"24:00",eventStore_:null,eventStoreConfig:null,intlFormat_time:null,layout:{ntype:"vbox",align:"stretch"},locale_:Neo.config.locale,minimumEventDuration_:30,model:b,monthComponent:null,monthComponentConfig:null,removeInactiveCards:!0,scrollNewYearFromTop_:!1,settingsContainerConfig:null,settingsContainerWidth:310,settingsExpanded_:!1,showWeekends_:!0,sideBarExpanded_:!0,sideBarWidth:220,startTime_:"00:00",timeFormat_:{hour:"2-digit",minute:"2-digit"},useSettingsContainer_:!0,views_:["day","week","month","year"],weekComponent:null,weekComponentConfig:null,weekStartDay_:0,yearComponent:null,yearComponentConfig:null}}constructor(e){super(e);let t=this;t.createItemsContent(),t.sideBarExpanded||t.afterSetSideBarExpanded(!1,!0)}afterSetBaseFontSize(e,t){if(void 0!==t){let t=this.style||{};e?t.fontSize=`${e}px`:delete t.fontSize,this.style=t}}afterSetCurrentDate(e,t){if(void 0!==t){let t=this;t.weekComponent.currentDate=e,t.yearComponent.currentDate=e,t.dateSelector.value=h.Z.convertToyyyymmdd(e)}}afterSetEndTime(e,t){void 0!==t&&this.down({ntype:"calendar-timeaxis"},!1).forEach((t=>{t.endTime=e}))}afterSetEventStore(e,t){void 0!==t&&this.setViewConfig("eventStore",e)}afterSetLocale(e,t){if(void 0!==t){let t=this;t.intlFormat_time=new Intl.DateTimeFormat(e,t.timeFormat),t.setViewConfig("locale",e)}}afterSetMinimumEventDuration(e,t){void 0!==t&&(this.weekComponent.minimumEventDuration=e)}afterSetScrollNewYearFromTop(e,t){void 0!==t&&(this.dateSelector.scrollNewYearFromTop=e,this.yearComponent.scrollNewYearFromTop=e)}afterSetSettingsExpanded(e,t){if(Neo.isBoolean(t)){let t=this,n=t.items[1].items[2];e?n.expand():n.collapse(t.settingsContainerWidth)}}afterSetShowWeekends(e,t){void 0!==t&&this.setViewConfig("showWeekends",e)}afterSetSideBarExpanded(e,t){if(void 0!==t){let t,n=this,a=n.items[1].items[0],o=a.style||{};e?(delete a.vdom.removeDom,n.promiseVdomUpdate().then((()=>{a.mounted=!0,setTimeout((()=>{o.marginLeft="0px",a.style=o}),50)}))):(o.marginLeft=`-${n.sideBarWidth}px`,a._style=o,a._vdom.style=o,n.promiseVdomUpdate().then((()=>{setTimeout((()=>{t=a.vdom,t.removeDom=!0,a.vdom=t}),400)})))}}afterSetStartTime(e,t){void 0!==t&&this.down({ntype:"calendar-timeaxis"},!1).forEach((t=>{t.startTime=e}))}afterSetTimeFormat(e,t){this.intlFormat_time=new Intl.DateTimeFormat(this.locale,e)}afterSetWeekStartDay(e,t){void 0!==t&&this.setViewConfig("weekStartDay",e)}beforeGetEditEventContainer(e){if(!e){let t=this;t._editEventContainer=e=Neo.create({module:D,appName:t.appName,owner:t,width:250,...t.editEventContainerConfig||{}})}return e}beforeSetCalendarStore(e,t){let n=this;return t&&t.destroy(),m.Z.beforeSetInstance(e,d,{listeners:{load:n.onCalendarStoreLoad,scope:n},...n.calendarStoreConfig||{}})}beforeSetEventStore(e,t){let n=this;return t&&t.destroy(),m.Z.beforeSetInstance(e,x,{listeners:{load:n.onEventStoreLoad,scope:n},...n.eventStoreConfig||{}})}beforeSetViews(e,t){let n=this.getStaticConfig("validViews");return e.forEach((e=>{if(!n.includes(e))return console.error(e,"is not a valid entry for views. Stick to:",n),t})),e}changeTimeInterval(e){let t=this;t.items[1].items[1].layout.activeIndex=t.views.indexOf(e),t.items[0].items[1].items.forEach((t=>{"timeInterval"===t.toggleGroup&&(t.pressed=t.value===e)})),t.activeView=e}createHeaderItems(){let e=this,t=[{module:R.Z,cls:["neo-calendar-header-toolbar","neo-left","neo-toolbar"],width:e.sideBarWidth,items:[{handler:e.toggleSidebar.bind(e),iconCls:"fa fa-bars"},"->",{handler:e.onPreviousIntervalButtonClick.bind(e),iconCls:"fa fa-chevron-left"},{handler:e.onTodayButtonClick.bind(e),height:24,text:"Today"},{handler:e.onNextIntervalButtonClick.bind(e),iconCls:"fa fa-chevron-right"}]},{module:R.Z,cls:["neo-calendar-header-toolbar","neo-toolbar"],items:["->",...e.createViewHeaderButtons()]}];return e.useSettingsContainer&&t[1].items.push({handler:e.toggleSettings.bind(e),iconCls:"fa fa-cog",style:{marginLeft:"10px"}}),t}createItemsContent(){let e=this;e.calendarsContainer=Neo.create({module:r,calendarStore:e.calendarStore,flex:1}),e.dateSelector=Neo.create({module:u.Z,flex:"none",height:e.sideBarWidth,listeners:{change:e.onDateSelectorChange,scope:e},locale:e.locale,scrollNewYearFromTop:e.scrollNewYearFromTop,showWeekends:e.showWeekends,value:h.Z.convertToyyyymmdd(e.currentDate),weekStartDay:e.weekStartDay,...e.dateSelectorConfig||{}}),e.items=[{module:i.Z,flex:"none",layout:{ntype:"hbox",align:"stretch"},items:e.createHeaderItems()},{module:i.Z,flex:1,layout:{ntype:"hbox",align:"stretch"},items:[{module:i.Z,cls:["neo-calendar-sidebar","neo-container"],layout:{ntype:"vbox",align:"stretch"},width:e.sideBarWidth,items:[e.dateSelector,e.calendarsContainer]},{module:i.Z,flex:1,items:e.createViews(),layout:{ntype:"card",activeIndex:e.views.indexOf(e.activeView),removeInactiveCards:e.removeInactiveCards}}]}],e.useSettingsContainer&&e.items[1].items.push({module:L,removeInactiveCards:e.removeInactiveCards,style:{marginRight:e.settingsExpanded?"0":`-${e.settingsContainerWidth}px`},width:e.settingsContainerWidth,...e.settingsContainerConfig})}createViewHeaderButtons(){let e=this,t=e.views.indexOf(e.activeView),n=[];return e.views.forEach(((a,o)=>{n.push({handler:e.changeTimeInterval.bind(e,a),height:24,pressed:t===o,text:Neo.capitalize(a),toggleGroup:"timeInterval",value:a})})),n}createViews(){let e,t=this,n=[];const a={appName:t.appName,currentDate:t.currentDate,eventStore:t.eventStore,locale:t.locale,owner:t,parentId:t.id,showWeekends:t.showWeekends,weekStartDay:t.weekStartDay},o={day:{module:f,style:{padding:"20px"},...a,...t.dayComponentConfig||{}},month:{module:E,...a,...t.monthComponentConfig||{}},week:{module:K,minimumEventDuration:t.minimumEventDuration,...a,...t.weekComponentConfig||{}},year:{module:Q,scrollNewYearFromTop:t.scrollNewYearFromTop,...a,...t.yearComponentConfig||{}}};return t.views.forEach((a=>{t[a+"Component"]=e=Neo.create(o[a]),n.push(e)})),n}destroy(...e){let t=this;t.calendarsContainer=null,t.dateSelector=null,t.dayComponent=null,t.monthComponent=null,t.weekComponent=null,t.yearComponent=null,super.destroy(...e)}onCalendarStoreLoad(e){this.calendarsContainer.onStoreLoad(e)}onDateSelectorChange(e){void 0!==e.oldValue&&(this.currentDate=new Date(e.value))}onEventStoreLoad(e){let t=this;t.monthComponent.createContent(),t.weekComponent.updateEvents(),t.yearComponent.createMonths()}onNextIntervalButtonClick(e){this.switchInterval(1)}onPreviousIntervalButtonClick(e){this.switchInterval(-1)}onTodayButtonClick(e){this.currentDate=ee}setViewConfig(e,t){let n=this;n.dateSelector[e]=t,n.views.forEach((a=>{n[`${a}Component`][e]=t}))}toggleSettings(){this.settingsExpanded=!this.settingsExpanded}toggleSidebar(){this.sideBarExpanded=!this.sideBarExpanded}switchInterval(e){let t=this,n=t.currentDate;({day:()=>{n.setDate(n.getDate()+e)},month:()=>{n.setMonth(n.getMonth()+e)},week:()=>{n.setDate(n.getDate()+7*e)},year:()=>{n.setFullYear(n.getFullYear()+e)}})[t.activeView](),t.currentDate=n}}Neo.applyClassConfig(te);var ne=n(5354);class ae extends ne.Z{static getConfig(){return{className:"Neo.examples.calendar.basic.MainContainerController"}}onSwitchThemeButtonClick(e){let t,n,a,o,i,r,l=e.component,s=this.component,c=this.getReference("headerToolbar");"Theme Light"===l.text?(t="Theme Dark",a="#f2f2f2",o="fa fa-moon",r="neo-theme-light"):(t="Theme Light",a="#33343d",o="fa fa-sun",r="neo-theme-dark"),n=[...s.cls],s.cls.forEach((e=>{e.includes("neo-theme")&&k.Z.remove(n,e)})),k.Z.add(n,r),s.cls=n,l.set({iconCls:o,text:t}),i=c.style||{},i.backgroundColor=a,c.style=i}}Neo.applyClassConfig(ae);var oe=n(3429);class ie extends oe.Z{static getConfig(){return{className:"Neo.examples.calendar.basic.MainContainer",autoMount:!0,controller:ae,layout:{ntype:"vbox",align:"stretch"},items:[{module:R.Z,flex:"none",padding:20,reference:"headerToolbar",style:{backgroundColor:"#f2f2f2",padding:"10px 5px 10px 10px"},items:[{ntype:"component",cls:["neo-header"],html:'<i class="fa fa-calendar"></i>neo.mjs Calendar (Sneak Preview)'},"->",{module:a.Z,handler:"onSwitchThemeButtonClick",height:27,iconCls:"fa fa-moon",text:"Theme Dark"},{module:a.Z,height:27,iconCls:"fab fa-github",style:{marginLeft:"5px"},text:"GitHub",url:"https://github.com/neomjs/neo/tree/dev/src/calendar"}]},{module:te,currentDate:new Date("2021-07-20"),flex:1,reference:"calendar",calendarStoreConfig:{autoLoad:!0,url:"../../examples/calendar/basic/data/calendars.json"},eventStoreConfig:{autoLoad:!0,url:"../../examples/calendar/basic/data/events.json"}}]}}}Neo.applyClassConfig(ie);const re=()=>Neo.app({mainView:ie,name:"Neo.examples.calendar.basic"})},1354:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(9132),o=n(3501);class i extends a.Z{static getStaticConfig(){return{iconPositions:["top","right","bottom","left"]}}static getConfig(){return{className:"Neo.button.Base",ntype:"button",cls:["neo-button"],editRoute:!0,handler_:null,handlerScope:null,iconCls_:null,iconColor_:null,iconPosition_:"left",pressed_:!1,route_:null,text_:"",url_:null,urlTarget_:"_blank",_vdom:{tag:"button",cn:[{tag:"span",cls:["neo-button-glyph"]},{tag:"span",cls:["neo-button-text"]}]}}}afterSetHandler(e,t){if(e){let t=this,n=t.domListeners||[];n.push({click:e,scope:t.handlerScope||t}),t.domListeners=n}}afterSetIconCls(e,t){let n=this,a=n.vdom,i=n.getVdomRoot().cn[0];o.Z.remove(i.cls,t),e&&""!==e?(i.removeDom=!1,o.Z.add(i.cls,e)):i.removeDom=!0,n.vdom=a}afterSetIconColor(e,t){let n=this,a=n.vdom,o=n.getVdomRoot().cn[0];o.style||(o.style={}),""===e&&(e=null),o.style.color=e,n.vdom=a}afterSetIconPosition(e,t){let n=this.cls;o.Z.remove(n,"icon-"+t),o.Z.add(n,"icon-"+e),this.cls=n}afterSetPressed(e,t){let n=this.cls;o.Z[!0===e?"add":"remove"](n,"pressed"),this.cls=n}afterSetRoute(e,t){if(e){let e=this,t=e.domListeners||[];t.push({click:e.changeRoute,scope:e}),e.domListeners=t}}afterSetText(e,t){let n=this,a=n.vdom,i=n.getVdomRoot(),r=i.cn[1];""===e?(o.Z.add(n._cls,"no-text"),o.Z.add(i.cls,"no-text"),r.removeDom=!0):(o.Z.remove(n._cls,"no-text"),o.Z.remove(i.cls,"no-text"),r.removeDom=!1,r.innerHTML=e),n.vdom=a}afterSetUrl(e,t){let n=this,a=n.vdom,o=n.getVdomRoot();e?(o.href=e,o.tag="a"):(delete o.href,o.tag="button"),n.vdom=a}afterSetUrlTarget(e,t){let n=this,a=n.vdom,o=n.getVdomRoot();n.url?o.target=e:delete o.target,n.vdom=a}beforeGetIconCls(){let e=this._iconCls;return Array.isArray(e)?e.join(" "):e}beforeSetIconCls(e,t){return e&&!Array.isArray(e)&&(e=e.split(" ")),e}beforeSetIconPosition(e,t){return this.beforeSetEnumValue(e,t,"iconPosition")}changeRoute(){let e=this;e.editRoute?Neo.Main.editRoute(e.route):Neo.Main.setRoute({value:e.route})}}Neo.applyClassConfig(i)},3817:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(9132),o=n(3501);class i extends a.Z{static getConfig(){return{className:"Neo.component.Clock",ntype:"clock",cls:["neo-clock"],fontSize_:20,showDisc_:!0,size_:500,time_:"10:20",_vdom:{cn:[{cls:["neo-minutes"],style:{}},{cls:["neo-hours"],style:{}}]}}}afterSetFontSize(e,t){let n=this.style;n.fontSize=`${e}px`,this.style=n}afterSetShowDisc(e,t){let n=this.cls;o.Z[e?"add":"remove"](n,"neo-show-disc"),this.cls=n}afterSetSize(e,t){let n=this.style;Neo.isNumber(e)?(n.height=`${e}px`,n.width=`${e}px`):(delete n.height,delete n.width),this.style=n}afterSetTime(e,t){let n=e.split(":").map((e=>Number(e))),a=n[0]%12*30+.5*n[1],o=6*n[1],i=this.vdom;i.cn[0].style.transform=`rotate(${o}deg)`,i.cn[1].style.transform=`rotate(${a}deg)`,this.vdom=i}}Neo.applyClassConfig(i)},9964:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(9132);class o extends a.Z{static getConfig(){return{className:"Neo.component.Label",ntype:"label",cls:["neo-label"],text_:"",_vdom:{tag:"label",draggable:!1}}}afterSetText(e,t){let n=this.vdom;n.html=e,this.vdom=n}}Neo.applyClassConfig(o)},4959:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),n(1354);var a=n(9132),o=n(2680),i=(n(9964),n(3501));class r extends o.Z{static getStaticConfig(){return{dockPositions:["top","right","bottom","left"]}}static getConfig(){return{className:"Neo.container.Toolbar",ntype:"toolbar",cls:["neo-toolbar"],dock_:"top",itemDefaults:{ntype:"button"},_layout:{ntype:"hbox",align:"center",pack:"start"},sortable_:!1,sortZone:null,sortZoneConfig:null}}afterSetAppName(e,t){super.afterSetAppName(e,t),this.sortZone&&(this.sortZone.appName=e)}afterSetDock(e,t){let n=this,a=n.cls;n.getStaticConfig("dockPositions").forEach((t=>{i.Z[t===e?"add":"remove"](a,"neo-dock-"+t)})),n.cls=a,n.layout=n.getLayoutConfig()}afterSetSortable(e,t){let a=this;e&&!a.sortZone&&n.e(2860).then(n.bind(n,8276)).then((e=>{a.sortZone=Neo.create({module:e.default,appName:a.appName,boundaryContainerId:a.id,owner:a,...a.sortZoneConfig||{}})}))}beforeSetDock(e,t){return this.beforeSetEnumValue(e,t,"dock","dockPositions")}createItems(){const e=this._items;return Array.isArray(e)&&e.forEach(((t,n)=>{"->"===t&&(e[n]=Neo.create({module:a.Z,flex:1}))})),super.createItems()}getLayoutConfig(){let e;switch(this.dock){case"bottom":case"top":e={ntype:"hbox",align:"center",pack:"start"};break;case"left":e={ntype:"vbox",align:"center",direction:"column-reverse",pack:"start"};break;case"right":e={ntype:"vbox",align:"center",direction:"column",pack:"start"}}return e}}Neo.applyClassConfig(r)},3429:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(2680);class o extends a.Z{static getConfig(){return{className:"Neo.container.Viewport",ntype:"viewport",applyBodyCls:!0,cls:["neo-viewport"]}}onConstructed(){super.onConstructed(),this.applyBodyCls&&Neo.main.DomAccess.applyBodyCls({appName:this.appName,cls:["neo-body-viewport"]})}}Neo.applyClassConfig(o)},5354:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(2641),o=(n(9342),n(1954)),i=n(3949);class r extends a.Z{static getConfig(){return{className:"Neo.controller.Component",ntype:"component-controller",component:null,parent_:null,references:null}}constructor(e){super(e);let t=this;t.references={},t.component.isConstructed?t.onComponentConstructed():t.component.on("constructed",(()=>{t.onComponentConstructed()}))}beforeSetParent(e,t){return e||this.getParent()}getHandlerScope(e){let t=this,n=t.parent;return Neo.isFunction(t[e])?t:n?n.getHandlerScope(e):null}getModel(e=!1){let t=this.component;return e?t.model:t.getModel()}getParent(){let e,t,n=this;return n.parent?n.parent:(t=n.component.parentId,e=t&&Neo.getComponent(t),e&&e.getController()||null)}getReference(e){let t=this,n=t.references[e];return n||(n=t.component.down({reference:e}),n&&(t.references[e]=n)),n||null}onComponentConstructed(){}parseConfig(e=this.component){let t,n,a,r=this,l=e.domListeners,s=e.listeners,c=e.reference;l&&l.forEach((l=>{Object.entries(l).forEach((([s,c])=>{t=null,"scope"!==s&&"delegate"!==s&&(Neo.isString(c)?t=c:Neo.isObject(c)&&c.hasOwnProperty("fn")&&Neo.isString(c.fn)&&(t=c.fn),t&&(a=r.getHandlerScope(t),a?(n=a[t].bind(a),l[s]=n,o.Z.updateListenerPlaceholder({componentId:e.id,eventHandlerMethod:n,eventHandlerName:t,eventName:s,scope:void 0})):i.Z.logError("Unknown domEvent handler for",t,e)))}))})),s&&Object.entries(s).forEach((([n,o])=>{"scope"!==n&&"delegate"!==n&&o.forEach((n=>{Neo.isObject(n)&&n.hasOwnProperty("fn")&&Neo.isString(n.fn)&&(t=n.fn,a=r.getHandlerScope(t),a?n.fn=a[t].bind(a):i.Z.logError("Unknown event handler for",t,e))}))})),c&&(r.references[c]=e)}removeReference(e){let t,n=this.references;for(t in n)if(e===n[t]){delete n[t];break}}}Neo.applyClassConfig(r)},3474:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(2680),o=n(2232),i=n(9342);class r extends a.Z{static getConfig(){return{className:"Neo.form.Container",ntype:"form-container",cls:["neo-form-container"],vdom:{tag:"form",cn:[]}}}getField(e){let t=i.Z.getChildren(this);for(let n of t)if(n instanceof o.Z&&(n.id===e||n.name===e))return n;return null}getFields(){let e=i.Z.getChildren(this),t=[];return e.forEach((e=>{e instanceof o.Z&&t.push(e)})),t}getValues(){let e=this.getFields(),t={};return e.forEach((e=>{t[e.name||e.id]=e.value})),t}isValid(){let e=this.getFields(),t=0,n=e.length;for(;t<n;t++)if(!e[t].isValid())return!1;return!0}reset(e={}){let t,n=this.getFields(),a=e?Object.keys(e):[];n.forEach((n=>{t=a.indexOf(n.name),t<0&&(t=a.indexOf(n.id)),n.reset(t>-1?e[a[t]]:null)}))}setValues(e={}){let t,n=this.getFields(),a=Object.keys(e);n.forEach((n=>{t=a.indexOf(n.name),t<0&&(t=a.indexOf(n.id)),t>-1&&(n.value=e[a[t]])}))}}Neo.applyClassConfig(r)},9840:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(3520),o=n(4274),i=n(5992),r=n(5062);class l extends r.Z{static getStaticConfig(){return{triggerPositions:["right","sides"]}}static getConfig(){return{className:"Neo.form.field.Number",ntype:"numberfield",cls:["neo-numberfield","neo-textfield"],excludedValues:null,inputEditable_:!0,inputType:"number",maxValue_:100,minValue_:0,stepSize_:1,triggerPosition_:"right",useSpinButtons_:!0}}afterSetInputEditable(e,t){let n=this,a=n.vdom,o=n.getInputEl().style||{};e?delete o.pointerEvents:o.pointerEvents="none",n.vdom=a}afterSetMaxValue(e,t){this.changeInputElKey("max",e)}afterSetMinValue(e,t){this.changeInputElKey("min",e)}afterSetStepSize(e,t){let n,a=this,o=a.value;a.changeInputElKey("step",e),null!==o&&(n=(o-a.minValue)%e,0!==n&&(n/e>.5?o+e-n<a.maxValue?a.value=o+e-n:o-n>a.minValue&&(a.value=o-n):o-n>a.minValue?a.value=o-n:o+e-n<a.maxValue&&(a.value=o+e-n)))}afterSetTriggerPosition(e,t){t&&this.updateTriggers()}afterSetUseSpinButtons(e,t){"boolean"==typeof t&&this.updateTriggers()}beforeSetTriggerPosition(e,t){return this.beforeSetEnumValue(e,t,"triggerPosition")}onConstructed(){this.updateTriggers(),super.onConstructed()}onInputValueChange(e){let t=this,n=e.value,a=t.value;n||t.required?(n=parseInt(n),Neo.isNumber(n)?(n-=n%t.stepSize,n=Math.max(t.minValue,n),n=Math.min(t.maxValue,n),e.value=n,super.onInputValueChange(e)):t._value=a):super.onInputValueChange(e)}onSpinButtonDownClick(){let e=this,t=e.value||e.maxValue+e.stepSize,n=Math.max(e.minValue,t-e.stepSize);if(e.excludedValues)for(;e.excludedValues.includes(n);)n=Math.max(e.minValue,n-e.stepSize);t!==n&&(e.value=n)}onSpinButtonUpClick(){let e=this,t=e.value||e.minValue-e.stepSize,n=Math.min(e.maxValue,t+e.stepSize);if(e.excludedValues)for(;e.excludedValues.includes(n);)n=Math.min(e.maxValue,n+e.stepSize);t!==n&&(e.value=n)}updateTriggers(){let e=this,t=e.triggers||[];e.useSpinButtons?"right"===e.triggerPosition?(e.hasTrigger("spinupdown")||t.push(i.Z),e.removeTrigger("spindown",!0,t),e.removeTrigger("spinup",!0,t)):(e.hasTrigger("spindown")||t.push(a.Z),e.hasTrigger("spinup")||t.push(o.Z),e.removeTrigger("spinupdown",!0,t)):(e.removeTrigger("spindown",!0,t),e.removeTrigger("spinup",!0,t),e.removeTrigger("spinupdown",!0,t)),e.triggers=t}}Neo.applyClassConfig(l)},4569:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(2680),o=n(9389),i=n(5062),r=n(524);class l extends i.Z{static getConfig(){return{className:"Neo.form.field.Picker",ntype:"pickerfield",clientRects:null,cls:["neo-pickerfield","neo-textfield"],keys:{Enter:"onKeyDownEnter",Escape:"onKeyDownEscape"},matchPickerWidth:!0,picker:null,pickerConfig:null,pickerHeight:100,pickerIsMounted_:!1,pickerMaxHeight:200,pickerWidth:100,triggers:[{module:o.Z}]}}applyClientRects(e){let t=this,n=(t.clientRects[2],t.clientRects[1]),a=t.clientRects[0],o=t.picker.vdom,i=t.matchPickerWidth?n.width-1:t.pickerWidth;t.pickerWidth=i,o.style=o.style||{},Object.assign(o.style,{left:a.left+a.width-i+"px",top:`${a.top+a.height+1}px`,width:`${i}px`}),t.picker[e?"_vdom":"vdom"]=o}createPicker(){let e=this,t=e.createPickerComponent();return Neo.create(a.Z,{appName:e.appName,cls:["neo-picker-container","neo-container"],height:e.pickerHeight,id:e.getPickerId(),items:t?[t]:[],maxHeight:e.pickerMaxHeight,vdom:{cn:[],tabIndex:-1},width:e.pickerWidth,...e.pickerConfig||{}})}createPickerComponent(){return null}getClientRectsThenShow(e,t){let n=this;Neo.main.DomAccess.getBoundingClientRect({id:[n.id,n.id+"-input-wrapper","body"]}).then((a=>{n.clientRects=a,n.showPicker(e,t)}))}getPicker(){let e=this;return e.picker||(e.picker=e.createPicker()),e.picker}getPickerId(){return this.id+"__picker"}hidePicker(e=!1){let t=this,n=t.getPicker(),a=t.vdom;t.pickerIsMounted&&r.Z.removeVdomChild(a,t.getPickerId()),t.pickerIsMounted=!1,e?(t._vdom=a,n.mounted=!1):t.promiseVdomUpdate().then((e=>{n.mounted=t.pickerIsMounted}))}onFocusLeave(e){let t=this;"inline"!==t.labelPosition||""!==t.value&&null!==t.value?t.hidePicker():t.hidePicker(!0),super.onFocusLeave(e)}onKeyDownEnter(e,t,n){this.pickerIsMounted||this.getClientRectsThenShow(t,n)}onKeyDownEscape(e){this.pickerIsMounted&&this.hidePicker()}onPickerTriggerClick(){let e=this;e.pickerIsMounted?e.hidePicker():e.getClientRectsThenShow()}showPicker(e,t){let n=this,a=n.getPicker(),o=n.vdom;n.applyClientRects(!0),o.cn.push(a.vdom),n.promiseVdomUpdate().then((o=>{n.pickerIsMounted=!0,a.mounted=n.pickerIsMounted,e&&e.apply(t||n)}))}}Neo.applyClassConfig(l)},4759:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(2783),o=n(7703),i=n(4569),r=n(4228);class l extends i.Z{static getConfig(){return{className:"Neo.form.field.Time",ntype:"timefield",cls:["neo-timefield","neo-pickerfield","neo-textfield"],collection:null,inputType:"time",keys:{Enter:"onKeyDownEnter",Escape:"onKeyDownEscape"},list:null,listConfig:null,maxValue_:"16:00",minValue_:"08:00",pickerHeight:150,stepSize_:300,triggers:[{module:r.Z}]}}constructor(e){super(e);let t=this;t.collection=Neo.create({module:a.Z,items:t.createCollectionItems(),keyProperty:"value"}),t.list=Neo.create({module:o.Z,displayField:"value",store:t.collection,...t.listConfig||{}}),t.list.keys._keys.push({fn:"onContainerKeyDownEnter",key:"Enter",scope:t.id},{fn:"onContainerKeyDownEscape",key:"Escape",scope:t.id}),t.list.on({itemClick:t.onListItemClick,itemNavigate:t.onListItemNavigate,scope:t})}afterSetMaxValue(e,t){this.changeInputElKey("max",e),void 0!==t&&this.recreateListItems()}afterSetMinValue(e,t){this.changeInputElKey("min",e),void 0!==t&&this.recreateListItems()}afterSetPickerIsMounted(e,t){e&&this.selectCurrentListItem()}afterSetStepSize(e,t){this.changeInputElKey("step",e)}afterSetValue(e,t,n=!1){super.afterSetValue(e,t);let a=this;a.getTrigger("time").value=e,a.pickerIsMounted&&!n&&a.selectCurrentListItem(!0)}beforeSetMaxValue(e,t){return e}beforeSetMinValue(e,t){return e}createCollectionItems(){let e=this,t=new Date,n=e.maxValue.split(":").map(Number),a=new Date,o=e.minValue.split(":").map(Number),i=[];const r=new Intl.DateTimeFormat(Neo.config.locale,{hour:"2-digit",minute:"2-digit",second:e.stepSize<60?"2-digit":void 0});for(n.length<3&&n.push(0),a.setHours(...n),o.length<3&&o.push(0),t.setHours(...o);t<=a;)i.push({value:r.format(t)}),t.setSeconds(t.getSeconds()+e.stepSize);return i}createPickerComponent(){return this.list}focusInputEl(e){let t=this;Neo.main.DomAccess.focus({id:t.getInputElId()}).then((()=>{e&&e.apply(t)}))}onContainerKeyDownEnter(e){this.hidePicker()}onContainerKeyDownEscape(e){this.focusInputEl(this.hidePicker)}onKeyDownEnter(e){let t=this;t.pickerIsMounted?(super.onKeyDownEnter(e),t.selectCurrentListItem()):super.onKeyDownEnter(e,t.selectCurrentListItem)}onListItemClick(e){let t=this,n=t.value,a=e.value;t.value!==a&&(t._value=a,t.afterSetValue(a,n,!0))}onListItemNavigate(e){this.onListItemClick(e)}recreateListItems(){let e=this;e.collection.clear(),e.collection.add(e.createCollectionItems()),e.list.createItems()}selectCurrentListItem(e=!1){let t=this.list,n=t.getItemId(this.value);t.selectionModel.select(n),e?Neo.main.DomAccess.scrollIntoView({id:n}):t.focus(n)}}Neo.applyClassConfig(l)},9389:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(877);class o extends a.Z{static getConfig(){return{className:"Neo.form.field.trigger.Picker",ntype:"trigger-picker",iconCls:"fa fa-caret-down",type:"picker"}}onTriggerClick(e){this.field.onPickerTriggerClick()}}Neo.applyClassConfig(o)},3520:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(877);class o extends a.Z{static getConfig(){return{className:"Neo.form.field.trigger.SpinDown",ntype:"trigger-spindown",align:"start",iconCls:"fa fa-chevron-left",type:"spindown"}}onTriggerClick(e){this.field.onSpinButtonDownClick()}}Neo.applyClassConfig(o)},4274:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(877);class o extends a.Z{static getConfig(){return{className:"Neo.form.field.trigger.SpinUp",ntype:"trigger-spinup",iconCls:"fa fa-chevron-right",type:"spinup"}}onTriggerClick(e){this.field.onSpinButtonUpClick()}}Neo.applyClassConfig(o)},5992:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(877);class o extends a.Z{static getConfig(){return{className:"Neo.form.field.trigger.SpinUpDown",ntype:"trigger-spinupdown",cls:["neo-field-trigger","neo-spin-buttons"],spinButtonDownIconCls:"fa fa-chevron-down",spinButtonUpIconCls:"fa fa-chevron-up",type:"spinupdown"}}onConstructed(){let e=this,t=e.vdom;t.cn=[{cls:["neo-spin-button","neo-up",e.spinButtonUpIconCls]},{cls:["neo-spin-button","neo-down",e.spinButtonDownIconCls]}],e.vdom=t,super.onConstructed()}onTriggerClick(e){let t=e.path[0].cls.join(" ");t.includes("neo-down")?this.field.onSpinButtonDownClick():t.includes("neo-up")&&this.field.onSpinButtonUpClick()}}Neo.applyClassConfig(o)},4228:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(3817),o=n(9389);class i extends o.Z{static getConfig(){return{className:"Neo.form.field.trigger.Time",ntype:"trigger-time",cls:["neo-timefield-trigger","neo-field-trigger"],clock:null,clockConfig:null,iconCls:null,type:"time",value_:null}}constructor(e){super(e);let t=this,n=t.vdom;t.clock=Neo.create({module:a.Z,appName:t.appName,parentId:t.id,fontSize:.6,showDisc:!1,size:null,...t.clockConfig||{}}),n.cn=[t.clock.vdom],t.vdom=n}afterSetAppName(e,t){super.afterSetAppName(e,t),e&&(this.clock.appName=e)}afterSetValue(e,t){e&&(this.clock.time=e)}}Neo.applyClassConfig(i)},7703:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(4508),o=n(9132),i=n(4896);class r extends i.Z{static getConfig(){return{className:"Neo.selection.ListModel",ntype:"selection-listmodel",stayInList:!0}}onKeyDownDown(e){this.view.disableSelection||this.onNavKey(e,1)}onKeyDownLeft(e){this.onKeyDownUp(e)}onKeyDownRight(e){this.onKeyDownDown(e)}onKeyDownUp(e){this.view.disableSelection||this.onNavKey(e,-1)}onNavKey(e,t){let n,a,o,i,r=this,l=e.path[0],s=r.view,c=s.store,d=c.getCount(),m=!1;l.cls.includes(s.itemCls)?(i=s.getItemRecordId(l.id),n=c.indexOf(i)+t,n<0?r.stayInList?n=d-1:(m=!0,s.fire("selectPreFirstItem")):n>=d&&(r.stayInList?n=0:(m=!0,s.fire("selectPostLastItem")))):n=0,m?r.deselectAll():(o=c.getAt(n),a=s.getItemId(o[r.view.getKeyProperty()]),r.select(a),s.focus(a),s.fire("itemNavigate",o))}register(e){super.register(e);let t=this.id,n=this.view;n.keys&&n.keys._keys.push({fn:"onKeyDownDown",key:"Down",scope:t},{fn:"onKeyDownLeft",key:"Left",scope:t},{fn:"onKeyDownRight",key:"Right",scope:t},{fn:"onKeyDownUp",key:"Up",scope:t})}selectAt(e){let t=this.view,n=t.store.getKeyAt(e),a=n&&t.getItemId(n);a&&(this.select(a),t.focus(a))}unregister(){let e=this.id,t=this.view;t.keys&&t.keys.removeKeys([{fn:"onKeyDownDown",key:"Down",scope:e},{fn:"onKeyDownLeft",key:"Left",scope:e},{fn:"onKeyDownRight",key:"Right",scope:e},{fn:"onKeyDownUp",key:"Up",scope:e}]),super.unregister()}}Neo.applyClassConfig(r);var l=n(3501);n(7816);class s extends o.Z{static getConfig(){return{className:"Neo.list.Base",ntype:"list",autoDestroyStore:!0,cls:["neo-list-container","neo-list"],disableSelection_:!1,displayField:"name",draggable_:!1,dragZone:null,dragZoneConfig:null,highlightFilterValue:!0,itemCls:"neo-list-item",keys:{},selectionModel_:null,silentSelect:!1,store_:null,useCheckBoxes_:!1,_vdom:{tag:"ul",cn:[]}}}constructor(e){super(e);let t=this,n=t.domListeners;n.push({click:{fn:t.onClick,scope:t}}),t.domListeners=n}afterSetDisableSelection(e,t){let n=this;e&&n.rendered&&n.selectionModel&&n.selectionModel.deselectAll()}afterSetDraggable(e,t){let a=this;e&&!a.dragZone&&n.e(4023).then(n.bind(n,4023)).then((e=>{a.dragZone=Neo.create({module:e.default,appName:a.appName,owner:a,...a.dragZoneConfig||{}})}))}afterSetSelectionModel(e,t){this.rendered&&e.register(this)}afterSetStore(e,t){let n=this;e&&(e.on({filter:n.onStoreFilter,load:n.onStoreLoad,scope:n}),e.getCount()>0&&n.onStoreLoad())}afterSetUseCheckBoxes(e,t){let n=this.cls;l.Z[e?"add":"remove"](n,"neo-use-checkicons"),this.cls=n}beforeSetSelectionModel(e,t){return t&&t.destroy(),a.Z.beforeSetInstance(e,r)}beforeSetStore(e,t){return t&&t.destroy(),a.Z.beforeSetInstance(e)}createItem(e){let t=this,n=t.createItemContent(e);const a={tag:"li",cls:[t.itemCls],id:t.getItemId(e[t.getKeyProperty()]),tabIndex:-1};return a["string"==typeof n?"html":"cn"]=n,a}createItemContent(e){let t,n=this,a=e[this.displayField];return n.highlightFilterValue&&(t=n.store.getFilter(n.displayField),t&&null!==t.value&&""!==t.value&&(a=a.replace(new RegExp(t.value,"gi"),(function(e){return'<span class="neo-highlight-search">'+e+"</span>"})))),a}createItems(e=!1){let t=this,n=t.vdom;n.cn=[],t.store.items.forEach((e=>{n.cn.push(t.createItem(e))})),e?t._vdom=n:t.promiseVdomUpdate().then((()=>{t.fire("createItems")}))}destroy(){let e=this;e.selectionModel&&e.selectionModel.destroy(),e.store&&e.autoDestroyStore&&e.store.destroy(),super.destroy()}focus(e){super.focus(e),e&&Neo.main.DomAccess.scrollIntoView({behavior:"auto",id:e||this.id})}getItemId(e){return this.id+"__"+e}getItemRecordId(e){let t=e.split("__")[1],n=this.store.model,a=n&&n.getField(n.keyProperty);return!a||"integer"!==a.type.toLowerCase()&&"number"!==a.type.toLowerCase()||(t=parseInt(t)),t}getKeyProperty(){return this.store.keyProperty||this.store.model.keyProperty}onClick(e){let t=this;e.path[0].id===t.id?t.onContainerClick(e):e.path[0].cls.includes(t.itemCls)&&t.onItemClick(e)}onConstructed(){super.onConstructed();let e=this;e.selectionModel&&e.selectionModel.register(e)}onContainerClick(e){this.fire("containerClick",e)}onItemClick(e){let t=this,n=e.path[0].id;!t.disableSelection&&t.selectionModel&&t.selectionModel.select(n),t.fire("itemClick",t.store.get(t.getItemRecordId(n)))}onStoreFilter(){this.createItems()}onStoreLoad(){let e=this;if(!e.mounted&&e.rendering){const t=e.on("rendered",(()=>{e.un("rendered",t),e.createItems()}))}else e.createItems()}selectItem(e){let t=this;!t.disableSelection&&t.selectionModel&&t.selectionModel.selectAt(e)}}Neo.applyClassConfig(s)},1645:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(2325),o=n(4508),i=n(3501);n(3648);const r=/\${(.+?)}/g,l=/(data|[a-z])((?!(\.[a-z_]\w*\(\)))\.[a-z_]\w*)+/gi;class s extends a.Z{static getStaticConfig(){return{observable:!0}}static getConfig(){return{className:"Neo.model.Component",ntype:"component-model",bindings_:null,component:null,data_:null,parent_:null,stores_:null}}constructor(e){Neo.currentWorker.isUsingViewModels=!0,super(e),this.bindings={}}addDataProperty(e,t){let n,a,o=this;Neo.ns(e,!0,o.data),n=o.getDataScope(e),a=n.scope,a[n.key]=t,o.createDataProperties(o.data,"data")}afterSetData(e,t){e&&this.createDataProperties(e,"data")}beforeGetData(e){return e||{}}beforeSetParent(e,t){return e||this.getParent()}beforeSetStores(e,t){return e&&Object.entries(e).forEach((([t,n])=>{e[t]=o.Z.beforeSetInstance(n)})),e}callFormatter(e,t=null){return t||(t=this.getHierarchyData()),e.call(this,t)}createBinding(e,t,n,a){let o,i,r=this,l=r.getDataScope(t),s=l.scope,c=l.key;s&&s[c]?(o=Neo.ns(`${t}.${e}`,!0,r.bindings),o[n]=a):(i=r.getParent(),i?i.createBinding(e,t,n,a):console.error("No model.Component found with the specified data property",n))}createBindingByFormatter(e,t,n){let a=this;a.getFormatterVariables(t).forEach((o=>{a.createBinding(e,o,n,t)}))}createBindings(e){Object.entries(e.bind).forEach((([t,n])=>{this.isStoreValue(n)||this.createBindingByFormatter(e.id,n,t)}))}createDataProperties(e,t){let n,a,o,i=this,r=Neo.ns(t,!1,i);Object.entries(e).forEach((([l,s])=>{l.startsWith("_")||(n=Object.getOwnPropertyDescriptor(r,l),o=`${t}.${l}`,"object"==typeof n&&"function"==typeof n.set||(a=e[l],i.createDataProperty(l,o,r),r[l]=a),Neo.isObject(s)&&i.createDataProperties(e[l],o))}))}createDataProperty(e,t,n=this.data){let a=this;t&&t.startsWith("data.")&&(t=t.substring(5)),Object.defineProperty(n,e,{get:()=>n["_"+e],set(o){let i=`_${e}`,r=n[i];n[i]?n[i]=o:Object.defineProperty(n,i,{enumerable:!1,value:o,writable:!0}),o!==r&&a.onDataPropertyChange(t||e,o,r)}})}getData(e,t=this){let n,a=this.getDataScope(e),o=a.scope,i=a.key;return o&&o.hasOwnProperty(i)?o[i]:(n=this.getParent(),n||console.error(`data property '${e}' does not exist.`,t),n.getData(e,t))}getDataScope(e){let t=e,n=this.data;return e.includes(".")&&(t=(e=e.split(".")).pop(),n=Neo.ns(e.join("."),!1,n)),{key:t,scope:n}}getFormatterVariables(e){Neo.isFunction(e)&&(e=e.toString());let t,n=e.match(r)||e.match(l)||[],a=[];return n.forEach((e=>{t=e.match(l)||[],t.forEach((e=>{e=e.substr(e.indexOf(".")+1),i.Z.add(a,e)}))})),a.sort(),a}getHierarchyData(e=this.getPlainData()){let t=this,n=t.getParent();return n?{...n.getHierarchyData(e),...t.getPlainData()}:t.getPlainData()}getPlainData(){return JSON.parse(JSON.stringify(this.data))}getParent(){let e,t,n=this;return n.parent?n.parent:(t=n.component.parentId,e=t&&Neo.getComponent(t),e&&e.getModel()||null)}internalSetData(e,t,n){let a,o,i,r,l=this;Neo.isObject(e)?Object.entries(e).forEach((([e,t])=>{l.internalSetData(e,t,n)})):(a=l.getDataScope(e),r=a.scope,o=a.key,r&&r.hasOwnProperty(o)?r[o]=t:n?(i=l.getParent(),i?i.internalSetData(e,t,n):n.addDataProperty(e,t)):l.addDataProperty(e,t))}isStoreValue(e){return Neo.isString(e)&&e.startsWith("stores.")}onDataPropertyChange(e,t,n){let a,o,i,r,l=this,s=l.bindings&&Neo.ns(e,!1,l.bindings);s&&(i={},Object.entries(s).forEach((([e,t])=>{a=Neo.getComponent(e),o={},r=a.getModel(),i[r.id]||(i[r.id]=r.getHierarchyData()),Object.entries(t).forEach((([e,t])=>{o[e]=r.callFormatter(t,i[r.id])})),a&&a.set(o)}))),l.fire("dataPropertyChange",{key:e,id:l.id,oldValue:n,value:t})}parseConfig(e=this.component){let t=this,n={};e.bind&&(t.createBindings(e),Object.entries(e.bind).forEach((([a,o])=>{t.isStoreValue(o)?t.resolveStore(e,a,o.substring(7)):n[a]=t.callFormatter(o)})),e.set(n))}removeBindings(e){let t=this.getParent();Object.entries(this.bindings).forEach((([t,n])=>{delete n[e]})),t&&t.removeBindings(e)}resolveStore(e,t,n,a=this){let o,i=this;i.stores&&i.stores.hasOwnProperty(n)?e[t]=i.stores[n]:(o=i.getParent(),o?o.resolveStore(e,t,n):console.error("bound store not found inside this model or parents:",n,a))}setData(e,t){this.internalSetData(e,t,this)}setDataAtSameLevel(e,t){this.internalSetData(e,t)}}Neo.applyClassConfig(s)}}]);