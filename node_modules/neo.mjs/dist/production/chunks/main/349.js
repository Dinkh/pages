"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[349],{349:(e,o,s)=>{s.r(o),s.d(o,{default:()=>i});var n=s(375),r=s(377);class a extends n.Z{static getConfig(){return{className:"Neo.main.addon.ServiceWorker",singleton:!0}}construct(e){if("serviceWorker"in navigator){let e=this,o=Neo.config,s="development"===o.environment,n=s?"ServiceWorker.mjs":"serviceworker.js",a=window.location.pathname.includes("/examples/")?"examples/":"apps/",t=s?{type:"module"}:{},i=(s?o.basePath:o.workerBasePath)+(s?a:"")+n,c=navigator.serviceWorker;window.addEventListener("beforeunload",e.onBeforeUnload.bind(e)),c.register(i,t).then((e=>{c.ready.then((()=>{c.onmessage=r.Z.onWorkerMessage.bind(r.Z),r.Z.sendMessage("service",{action:"registerNeoConfig",data:o})}))}))}}onBeforeUnload(){r.Z.sendMessage("service",{action:"unregisterPort"})}}Neo.applyClassConfig(a);let t=Neo.create(a);Neo.applyToGlobalNs(t);const i=t}}]);