"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[349],{349:(e,r,s)=>{s.r(r),s.d(r,{default:()=>i});var n=s(375),o=s(377);class a extends n.Z{static getConfig(){return{className:"Neo.main.addon.ServiceWorker",singleton:!0}}construct(e){if("serviceWorker"in navigator){let e=this,r=Neo.config,s="development"===r.environment,n=s?"ServiceWorker.mjs":"serviceworker.js",a=window.location.pathname.includes("/examples/")?"examples/":"apps/",i=s?{type:"module"}:{},t=(s?r.basePath:r.workerBasePath)+(s?a:"")+n,c=navigator.serviceWorker;window.addEventListener("beforeunload",e.onBeforeUnload.bind(e)),c.register(t,i).then((e=>{c.ready.then((()=>{c.onmessage=o.Z.onWorkerMessage.bind(o.Z),o.Z.getWorker("service")||(o.Z.serviceWorker=e.active),o.Z.sendMessage("service",{action:"registerNeoConfig",data:r})}))}))}}onBeforeUnload(){o.Z.sendMessage("service",{action:"unregisterPort"})}}const i=Neo.applyClassConfig(a)}}]);